





<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">



  <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/frameworks-d7b19415c108234b91acac0d0c02091c860993c13687a757ee345cc1ecd3a9d1.css" media="all" rel="stylesheet" />
  <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/github-d3d79f67a533758106eb43cd943edc6cc25eb8b60a18efdb65d7ccb1646af576.css" media="all" rel="stylesheet" />
  
  
  <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/site-537c466d44a69d38c4bd60c2fd2955373ef96d051bd97b2ad30ed039acc97bff.css" media="all" rel="stylesheet" />
  

  <meta name="viewport" content="width=device-width">
  
  <title>Crossfaction Battlegrounds For Last Revision Trinity · GitHub</title>
  <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="GitHub">
  <link rel="fluid-icon" href="https://gist.github.com/fluidicon.png" title="GitHub">
  <meta property="fb:app_id" content="1401488693436528">

    
    <meta content="https://avatars1.githubusercontent.com/u/5402381?v=3&amp;s=400" property="og:image" /><meta content="Gist" property="og:site_name" /><meta content="object" property="og:type" /><meta content="Crossfaction Battlegrounds For Last Revision Trinity" property="og:title" /><meta content="https://gist.github.com/irancore/10913800" property="og:url" /><meta content="Crossfaction Battlegrounds For Last Revision Trinity" property="og:description" />

  <link rel="assets" href="https://assets-cdn.github.com/">
  
  <meta name="pjax-timeout" content="1000">
  
  <meta name="request-id" content="805C:22A9:2345DE0:3771B22:59054C43" data-pjax-transient>
  

  <meta name="selected-link" value="gist_code" data-pjax-transient>

  <meta name="google-site-verification" content="KT5gs8h0wvaagLKAVWq8bbeNwnZZK1r1XQysX3xurLU">
<meta name="google-site-verification" content="ZzhVyEFwb7w3e0-uOTltm8Jsck2F5StVihD0exw2fsA">
    <meta name="google-analytics" content="UA-3769691-4">

<meta content="collector.githubapp.com" name="octolytics-host" /><meta content="gist" name="octolytics-app-id" /><meta content="https://collector.githubapp.com/github-external/browser_event" name="octolytics-event-url" /><meta content="805C:22A9:2345DE0:3771B22:59054C43" name="octolytics-dimension-request_id" />
<meta content="/&lt;user-name&gt;/&lt;gist-id&gt;" data-pjax-transient="true" name="analytics-location" />




  <meta class="js-ga-set" name="dimension1" content="Logged Out">



    <meta content="true" name="octolytics-dimension-public" /><meta content="10913800" name="octolytics-dimension-gist_id" /><meta content="10913800" name="octolytics-dimension-gist_name" /><meta content="false" name="octolytics-dimension-anonymous" /><meta content="5402381" name="octolytics-dimension-owner_id" /><meta content="irancore" name="octolytics-dimension-owner_login" /><meta content="false" name="octolytics-dimension-forked" />

  <meta class="js-ga-set" name="dimension5" content="public">
  <meta class="js-ga-set" name="dimension6" content="owned">
  <meta class="js-ga-set" name="dimension7" content="diff">


      <meta name="hostname" content="gist.github.com">
  <meta name="user-login" content="">

      <meta name="expected-hostname" content="gist.github.com">
    <meta name="js-proxy-site-detection-payload" content="NzEzNzc1MmVjNTlkYjM0MzYxZDU0ZTFjM2NmZTFkMWQ4Nzg2OWIyYTRkOTlhYmMxMWZhMzQxZTc3NWUwMmEyOHx7InJlbW90ZV9hZGRyZXNzIjoiMTQ5LjU2LjEwMi4zIiwicmVxdWVzdF9pZCI6IjgwNUM6MjJBOToyMzQ1REUwOjM3NzFCMjI6NTkwNTRDNDMiLCJ0aW1lc3RhbXAiOjE0OTM1MTk0MjgsImhvc3QiOiJnaXRodWIuY29tIn0=">


  <meta name="html-safe-nonce" content="24a62c210f13d1e7e0db92eccb0d3c13def15542">

  <meta http-equiv="x-pjax-version" content="52e1159c744ba21d485393372d7ad68c">
  

      <link href="/irancore.atom" rel="alternate" title="atom" type="application/atom+xml">
  
  <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/gist-67dd5139d22e4e9921ef362b5458f51e5973a20db04a54c9d74116748f852917.css" media="all" rel="stylesheet" />




  <meta name="browser-stats-url" content="https://api.github.com/_private/browser/stats">

  <meta name="browser-errors-url" content="https://api.github.com/_private/browser/errors">

  <link rel="mask-icon" href="https://assets-cdn.github.com/pinned-octocat.svg" color="#000000">
  <link rel="icon" type="image/x-icon" href="https://assets-cdn.github.com/favicon.ico">

<meta name="theme-color" content="#1e2327">



  </head>

  <body class="logged-out env-production">
    


  <div class="position-relative js-header-wrapper ">
    <a href="#start-of-content" tabindex="1" class="accessibility-aid js-skip-to-content">Skip to content</a>
    <div id="js-pjax-loader-bar" class="pjax-loader-bar"><div class="progress"></div></div>

    
    
    



        <div class="header gist-header header-logged-out" role="banner">
  <div class="container clearfix">

    <a href="/" aria-label="Gist Homepage" class="header-logo-wordmark" data-hotkey="g d">
      <svg aria-hidden="true" class="octicon octicon-logo-github" height="28" version="1.1" viewBox="0 0 45 16" width="78"><path fill-rule="evenodd" d="M18.53 12.03h-.02c.009 0 .015.01.024.011h.006l-.01-.01zm.004.011c-.093.001-.327.05-.574.05-.78 0-1.05-.36-1.05-.83V8.13h1.59c.09 0 .16-.08.16-.19v-1.7c0-.09-.08-.17-.16-.17h-1.59V3.96c0-.08-.05-.13-.14-.13h-2.16c-.09 0-.14.05-.14.13v2.17s-1.09.27-1.16.28c-.08.02-.13.09-.13.17v1.36c0 .11.08.19.17.19h1.11v3.28c0 2.44 1.7 2.69 2.86 2.69.53 0 1.17-.17 1.27-.22.06-.02.09-.09.09-.16v-1.5a.177.177 0 0 0-.146-.18zm23.696-2.2c0-1.81-.73-2.05-1.5-1.97-.6.04-1.08.34-1.08.34v3.52s.49.34 1.22.36c1.03.03 1.36-.34 1.36-2.25zm2.43-.16c0 3.43-1.11 4.41-3.05 4.41-1.64 0-2.52-.83-2.52-.83s-.04.46-.09.52c-.03.06-.08.08-.14.08h-1.48c-.1 0-.19-.08-.19-.17l.02-11.11c0-.09.08-.17.17-.17h2.13c.09 0 .17.08.17.17v3.77s.82-.53 2.02-.53l-.01-.02c1.2 0 2.97.45 2.97 3.88zm-8.72-3.61H33.84c-.11 0-.17.08-.17.19v5.44s-.55.39-1.3.39-.97-.34-.97-1.09V6.25c0-.09-.08-.17-.17-.17h-2.14c-.09 0-.17.08-.17.17v5.11c0 2.2 1.23 2.75 2.92 2.75 1.39 0 2.52-.77 2.52-.77s.05.39.08.45c.02.05.09.09.16.09h1.34c.11 0 .17-.08.17-.17l.02-7.47c0-.09-.08-.17-.19-.17zm-23.7-.01h-2.13c-.09 0-.17.09-.17.2v7.34c0 .2.13.27.3.27h1.92c.2 0 .25-.09.25-.27V6.23c0-.09-.08-.17-.17-.17zm-1.05-3.38c-.77 0-1.38.61-1.38 1.38 0 .77.61 1.38 1.38 1.38.75 0 1.36-.61 1.36-1.38 0-.77-.61-1.38-1.36-1.38zm16.49-.25h-2.11c-.09 0-.17.08-.17.17v4.09h-3.31V2.6c0-.09-.08-.17-.17-.17h-2.13c-.09 0-.17.08-.17.17v11.11c0 .09.09.17.17.17h2.13c.09 0 .17-.08.17-.17V8.96h3.31l-.02 4.75c0 .09.08.17.17.17h2.13c.09 0 .17-.08.17-.17V2.6c0-.09-.08-.17-.17-.17zM8.81 7.35v5.74c0 .04-.01.11-.06.13 0 0-1.25.89-3.31.89-2.49 0-5.44-.78-5.44-5.92S2.58 1.99 5.1 2c2.18 0 3.06.49 3.2.58.04.05.06.09.06.14L7.94 4.5c0 .09-.09.2-.2.17-.36-.11-.9-.33-2.17-.33-1.47 0-3.05.42-3.05 3.73s1.5 3.7 2.58 3.7c.92 0 1.25-.11 1.25-.11v-2.3H4.88c-.11 0-.19-.08-.19-.17V7.35c0-.09.08-.17.19-.17h3.74c.11 0 .19.08.19.17z"/></svg>
      <svg aria-hidden="true" class="octicon octicon-logo-gist" height="28" version="1.1" viewBox="0 0 25 16" width="40"><path fill-rule="evenodd" d="M4.7 8.73h2.45v4.02c-.55.27-1.64.34-2.53.34-2.56 0-3.47-2.2-3.47-5.05 0-2.85.91-5.06 3.48-5.06 1.28 0 2.06.23 3.28.73V2.66C7.27 2.33 6.25 2 4.63 2 1.13 2 0 4.69 0 8.03c0 3.34 1.11 6.03 4.63 6.03 1.64 0 2.81-.27 3.59-.64V7.73H4.7v1zm6.39 3.72V6.06h-1.05v6.28c0 1.25.58 1.72 1.72 1.72v-.89c-.48 0-.67-.16-.67-.7v-.02zm.25-8.72c0-.44-.33-.78-.78-.78s-.77.34-.77.78.33.78.77.78.78-.34.78-.78zm4.34 5.69c-1.5-.13-1.78-.48-1.78-1.17 0-.77.33-1.34 1.88-1.34 1.05 0 1.66.16 2.27.36v-.94c-.69-.3-1.52-.39-2.25-.39-2.2 0-2.92 1.2-2.92 2.31 0 1.08.47 1.88 2.73 2.08 1.55.13 1.77.63 1.77 1.34 0 .73-.44 1.42-2.06 1.42-1.11 0-1.86-.19-2.33-.36v.94c.5.2 1.58.39 2.33.39 2.38 0 3.14-1.2 3.14-2.41 0-1.28-.53-2.03-2.75-2.23h-.03zm8.58-2.47v-.86h-2.42v-2.5l-1.08.31v2.11l-1.56.44v.48h1.56v5c0 1.53 1.19 2.13 2.5 2.13.19 0 .52-.02.69-.05v-.89c-.19.03-.41.03-.61.03-.97 0-1.5-.39-1.5-1.34V6.94h2.42v.02-.01z"/></svg>
</a>
    <div class="site-search js-site-search" role="search">
        <div class="header-search" role="search">

<!-- '"` --><!-- </textarea></xmp> --></option></form><form accept-charset="UTF-8" action="/search" class="position-relative" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /></div>
  <label class="header-search-wrapper form-control js-chromeless-input-container">
    <input type="text"
      class="form-control js-site-search-focus header-search-input"
      data-hotkey="s"
      name="q"
      placeholder="Search…"
      tabindex="1"
      autocorrect="off"
      autocomplete="off"
      autocapitalize="off">
  </label>

</form></div>

    </div>
    <ul class="header-nav float-left" role="navigation">
      <li class="header-nav-item">
        <a href="/discover" class="header-nav-link" data-ga-click="Header, go to all gists, text:all gists">All gists</a>
      </li>

      <li class="header-nav-item">
        <a href="https://github.com" class="header-nav-link" data-ga-click="Header, go to GitHub, text:GitHub">GitHub</a>
      </li>
    </ul>

      <div class="header-actions" role="navigation">
          <a href="/join?source=header-gist" class="btn btn-primary" data-ga-click="Header, sign up">Sign up for a GitHub account</a>
        <a href="https://gist.github.com/auth/github?return_to=gist" class="btn" data-ga-click="Header, sign in">Sign in</a>
      </div>
  </div>
</div>



  </div>

  <div id="start-of-content" class="accessibility-aid"></div>

    <div id="js-flash-container">
</div>



  <div role="main">
        <div itemscope itemtype="http://schema.org/Code">
    <div id="gist-pjax-container" class="gist-content-wrapper" data-pjax-container>
      


  <div class="gist-detail-intro gist-banner">
    <div class="container">
      <a href="/" class="btn btn-outline float-right">Create a gist now</a>
      <p class="lead">
        Instantly share code, notes, and snippets.
      </p>
    </div>
  </div>


<div class="gisthead pagehead repohead instapaper_ignore readability-menu experiment-repo-nav mb-4">
  <div class="container">
    
  
<div class="container repohead-details-container">

  <ul class="pagehead-actions">


    <li>
        <a href="/login?return_to=https%3A%2F%2Fgist.github.com%2Firancore%2F10913800" aria-label="You must be signed in to star a gist" class="btn btn-sm btn-with-count tooltipped tooltipped-n" rel="nofollow">
    <svg aria-hidden="true" class="octicon octicon-star" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path fill-rule="evenodd" d="M14 6l-4.9-.64L7 1 4.9 5.36 0 6l3.6 3.26L2.67 14 7 11.67 11.33 14l-.93-4.74z"/></svg>
    Star
</a>
  <a href="/irancore/10913800/stargazers" aria-label="0 users starred this gist" class="social-count">
    0
</a>
    </li>

      <li>
          <a href="/login?return_to=https%3A%2F%2Fgist.github.com%2Firancore%2F10913800" aria-label="You must be signed in to fork a gist" class="btn btn-sm btn-with-count tooltipped tooltipped-n" rel="nofollow">
    <svg aria-hidden="true" class="octicon octicon-repo-forked" height="16" version="1.1" viewBox="0 0 10 16" width="10"><path fill-rule="evenodd" d="M8 1a1.993 1.993 0 0 0-1 3.72V6L5 8 3 6V4.72A1.993 1.993 0 0 0 2 1a1.993 1.993 0 0 0-1 3.72V6.5l3 3v1.78A1.993 1.993 0 0 0 5 15a1.993 1.993 0 0 0 1-3.72V9.5l3-3V4.72A1.993 1.993 0 0 0 8 1zM2 4.2C1.34 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm3 10c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm3-10c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"/></svg>
    Fork
</a>
  <a href="/irancore/10913800/forks" aria-label="3 users forked this gist" class="social-count">
    3
</a>
      </li>

  </ul>

  <h1 class="public css-truncate">
    <img alt="@irancore" class="avatar gist-avatar" height="26" src="https://avatars3.githubusercontent.com/u/5402381?v=3&amp;s=52" width="26" />
    <span class="author"><a href="/irancore" class="url fn" rel="author"><span itemprop="author">irancore</span></a></span><!--
        --><span class="path-divider">/</span><!--
        --><strong itemprop="name" class="gist-header-title css-truncate-target"><a href="/irancore/10913800">gist:10913800</a></strong>

    <div class="gist-timestamp">Last active <time-ago datetime="2017-04-09T20:48:31Z">Apr 9, 2017</time-ago></div>
  </h1>
</div>

<div class="container gist-file-navigation">
  <div class="float-right file-navigation-options" data-multiple>

    <div class="file-navigation-option">
  <input type="hidden" name="protocol_type" value="clone">

  <div class="select-menu js-menu-container js-select-menu">
    <div class="input-group js-select-button js-zeroclipboard-container">
      <div class="input-group-button">
  <button type="button" class="btn btn-sm select-menu-button js-menu-target" data-ga-click="Repository, clone Embed, location:repo overview">
    Embed
  </button>
</div>
<input type="text" class="form-control input-monospace input-sm js-zeroclipboard-target js-url-field" value="&lt;script src=&quot;https://gist.github.com/irancore/10913800.js&quot;&gt;&lt;/script&gt;" aria-label="Clone this repository at &lt;script src=&quot;https://gist.github.com/irancore/10913800.js&quot;&gt;&lt;/script&gt;" readonly>
<div class="input-group-button">
  <button aria-label="Copy to clipboard" class="js-zeroclipboard btn btn-sm zeroclipboard-button tooltipped tooltipped-s" data-copied-hint="Copied!" type="button"><svg aria-hidden="true" class="octicon octicon-clippy" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path fill-rule="evenodd" d="M2 13h4v1H2v-1zm5-6H2v1h5V7zm2 3V8l-3 3 3 3v-2h5v-2H9zM4.5 9H2v1h2.5V9zM2 12h2.5v-1H2v1zm9 1h1v2c-.02.28-.11.52-.3.7-.19.18-.42.28-.7.3H1c-.55 0-1-.45-1-1V4c0-.55.45-1 1-1h3c0-1.11.89-2 2-2 1.11 0 2 .89 2 2h3c.55 0 1 .45 1 1v5h-1V6H1v9h10v-2zM2 5h8c0-.55-.45-1-1-1H8c-.55 0-1-.45-1-1s-.45-1-1-1-1 .45-1 1-.45 1-1 1H3c-.55 0-1 .45-1 1z"/></svg></button>
</div>

    </div>

    <div class="select-menu-modal-holder">
      <div class="select-menu-modal js-menu-content">
        <div class="select-menu-header">
          <svg aria-label="Close" class="octicon octicon-x js-menu-close" height="16" role="img" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48z"/></svg>
          <span class="select-menu-title">What would you like to do?</span>
        </div>

        <div class="select-menu-list js-navigation-container" role="menu">
            <div class="select-menu-item js-navigation-item selected" role="menuitem" tabindex="0">
              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5z"/></svg>
              <div class="select-menu-item-text">
                <input type="radio" name="protocol_selector" value="embed" checked>
                <span class="select-menu-item-heading">
                  
                  Embed
                </span>
                  <span class="description">
                    Embed this gist in your website.
                  </span>
                <span class="js-select-button-text hidden-select-button-text">
                  <div class="input-group-button">
  <button type="button" class="btn btn-sm select-menu-button js-menu-target" data-ga-click="Repository, clone Embed, location:repo overview">
    Embed
  </button>
</div>
<input type="text" class="form-control input-monospace input-sm js-zeroclipboard-target js-url-field" value="&lt;script src=&quot;https://gist.github.com/irancore/10913800.js&quot;&gt;&lt;/script&gt;" aria-label="Clone this repository at &lt;script src=&quot;https://gist.github.com/irancore/10913800.js&quot;&gt;&lt;/script&gt;" readonly>
<div class="input-group-button">
  <button aria-label="Copy to clipboard" class="js-zeroclipboard btn btn-sm zeroclipboard-button tooltipped tooltipped-s" data-copied-hint="Copied!" type="button"><svg aria-hidden="true" class="octicon octicon-clippy" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path fill-rule="evenodd" d="M2 13h4v1H2v-1zm5-6H2v1h5V7zm2 3V8l-3 3 3 3v-2h5v-2H9zM4.5 9H2v1h2.5V9zM2 12h2.5v-1H2v1zm9 1h1v2c-.02.28-.11.52-.3.7-.19.18-.42.28-.7.3H1c-.55 0-1-.45-1-1V4c0-.55.45-1 1-1h3c0-1.11.89-2 2-2 1.11 0 2 .89 2 2h3c.55 0 1 .45 1 1v5h-1V6H1v9h10v-2zM2 5h8c0-.55-.45-1-1-1H8c-.55 0-1-.45-1-1s-.45-1-1-1-1 .45-1 1-.45 1-1 1H3c-.55 0-1 .45-1 1z"/></svg></button>
</div>

                </span>
              </div>
            </div>
            <div class="select-menu-item js-navigation-item " role="menuitem" tabindex="0">
              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5z"/></svg>
              <div class="select-menu-item-text">
                <input type="radio" name="protocol_selector" value="share" >
                <span class="select-menu-item-heading">
                  
                  Share
                </span>
                  <span class="description">
                    Copy sharable URL for this gist.
                  </span>
                <span class="js-select-button-text hidden-select-button-text">
                  <div class="input-group-button">
  <button type="button" class="btn btn-sm select-menu-button js-menu-target" data-ga-click="Repository, clone Share, location:repo overview">
    Share
  </button>
</div>
<input type="text" class="form-control input-monospace input-sm js-zeroclipboard-target js-url-field" value="https://gist.github.com/irancore/10913800" aria-label="Clone this repository at https://gist.github.com/irancore/10913800" readonly>
<div class="input-group-button">
  <button aria-label="Copy to clipboard" class="js-zeroclipboard btn btn-sm zeroclipboard-button tooltipped tooltipped-s" data-copied-hint="Copied!" type="button"><svg aria-hidden="true" class="octicon octicon-clippy" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path fill-rule="evenodd" d="M2 13h4v1H2v-1zm5-6H2v1h5V7zm2 3V8l-3 3 3 3v-2h5v-2H9zM4.5 9H2v1h2.5V9zM2 12h2.5v-1H2v1zm9 1h1v2c-.02.28-.11.52-.3.7-.19.18-.42.28-.7.3H1c-.55 0-1-.45-1-1V4c0-.55.45-1 1-1h3c0-1.11.89-2 2-2 1.11 0 2 .89 2 2h3c.55 0 1 .45 1 1v5h-1V6H1v9h10v-2zM2 5h8c0-.55-.45-1-1-1H8c-.55 0-1-.45-1-1s-.45-1-1-1-1 .45-1 1-.45 1-1 1H3c-.55 0-1 .45-1 1z"/></svg></button>
</div>

                </span>
              </div>
            </div>
            <div class="select-menu-item js-navigation-item " role="menuitem" tabindex="0">
              <svg aria-hidden="true" class="octicon octicon-check select-menu-item-icon" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5z"/></svg>
              <div class="select-menu-item-text">
                <input type="radio" name="protocol_selector" value="http" >
                <span class="select-menu-item-heading">
                  Clone via
                  HTTPS
                </span>
                  <span class="description">
                    Clone with Git or checkout with SVN using the repository's web address.
                  </span>
                <span class="js-select-button-text hidden-select-button-text">
                  <div class="input-group-button">
  <button type="button" class="btn btn-sm select-menu-button js-menu-target" data-ga-click="Repository, clone HTTPS, location:repo overview">
    HTTPS
  </button>
</div>
<input type="text" class="form-control input-monospace input-sm js-zeroclipboard-target js-url-field" value="https://gist.github.com/10913800.git" aria-label="Clone this repository at https://gist.github.com/10913800.git" readonly>
<div class="input-group-button">
  <button aria-label="Copy to clipboard" class="js-zeroclipboard btn btn-sm zeroclipboard-button tooltipped tooltipped-s" data-copied-hint="Copied!" type="button"><svg aria-hidden="true" class="octicon octicon-clippy" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path fill-rule="evenodd" d="M2 13h4v1H2v-1zm5-6H2v1h5V7zm2 3V8l-3 3 3 3v-2h5v-2H9zM4.5 9H2v1h2.5V9zM2 12h2.5v-1H2v1zm9 1h1v2c-.02.28-.11.52-.3.7-.19.18-.42.28-.7.3H1c-.55 0-1-.45-1-1V4c0-.55.45-1 1-1h3c0-1.11.89-2 2-2 1.11 0 2 .89 2 2h3c.55 0 1 .45 1 1v5h-1V6H1v9h10v-2zM2 5h8c0-.55-.45-1-1-1H8c-.55 0-1-.45-1-1s-.45-1-1-1-1 .45-1 1-.45 1-1 1H3c-.55 0-1 .45-1 1z"/></svg></button>
</div>

                </span>
              </div>
            </div>
        </div>
        <div class="select-menu-list" role="menu">
          <a class="select-menu-item select-menu-action" href="https://help.github.com/articles/which-remote-url-should-i-use" target="_blank">
            <svg aria-hidden="true" class="octicon octicon-question select-menu-item-icon" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path fill-rule="evenodd" d="M6 10h2v2H6v-2zm4-3.5C10 8.64 8 9 8 9H6c0-.55.45-1 1-1h.5c.28 0 .5-.22.5-.5v-1c0-.28-.22-.5-.5-.5h-1c-.28 0-.5.22-.5.5V7H4c0-1.5 1.5-3 3-3s3 1 3 2.5zM7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7z"/></svg>
            <div class="select-menu-item-text">
              Learn more about clone URLs
            </div>
          </a>
        </div>
      </div>
    </div>
  </div>
</div>


    <div class="file-navigation-option">
</div>


    <div class="file-navigation-option">
      <a href="/irancore/10913800/archive/e59394aeb27aeeb006cf61b4726d466a136c58a9.zip"
          class="btn btn-sm"
          rel="nofollow"
          data-ga-click="Gist, download zip, location:gist overview">
        Download ZIP
      </a>
    </div>
  </div>

  <div class="float-left">
    <nav class="reponav js-repo-nav js-sidenav-container-pjax"
     role="navigation"
     data-pjax="#gist-pjax-container">

  <a href="/irancore/10913800" aria-label="Code" class="js-selected-navigation-item selected reponav-item" data-hotkey="g c" data-pjax="true" data-selected-links="gist_code /irancore/10913800">
    <svg aria-hidden="true" class="octicon octicon-code" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path fill-rule="evenodd" d="M9.5 3L8 4.5 11.5 8 8 11.5 9.5 13 14 8 9.5 3zm-5 0L0 8l4.5 5L6 11.5 2.5 8 6 4.5 4.5 3z"/></svg>
    Code
</a>
    <a href="/irancore/10913800/revisions" aria-label="Revisions" class="js-selected-navigation-item reponav-item" data-hotkey="g r" data-pjax="true" data-selected-links="gist_revisions /irancore/10913800/revisions">
      <svg aria-hidden="true" class="octicon octicon-git-commit" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path fill-rule="evenodd" d="M10.86 7c-.45-1.72-2-3-3.86-3-1.86 0-3.41 1.28-3.86 3H0v2h3.14c.45 1.72 2 3 3.86 3 1.86 0 3.41-1.28 3.86-3H14V7h-3.14zM7 10.2c-1.22 0-2.2-.98-2.2-2.2 0-1.22.98-2.2 2.2-2.2 1.22 0 2.2.98 2.2 2.2 0 1.22-.98 2.2-2.2 2.2z"/></svg>
      Revisions
      <span class="Counter">19</span>
</a>

    <a href="/irancore/10913800/forks" aria-label="Forks" class="js-selected-navigation-item reponav-item" data-hotkey="g f" data-pjax="true" data-selected-links="gist_forks /irancore/10913800/forks">
      <svg aria-hidden="true" class="octicon octicon-git-branch" height="16" version="1.1" viewBox="0 0 10 16" width="10"><path fill-rule="evenodd" d="M10 5c0-1.11-.89-2-2-2a1.993 1.993 0 0 0-1 3.72v.3c-.02.52-.23.98-.63 1.38-.4.4-.86.61-1.38.63-.83.02-1.48.16-2 .45V4.72a1.993 1.993 0 0 0-1-3.72C.88 1 0 1.89 0 3a2 2 0 0 0 1 1.72v6.56c-.59.35-1 .99-1 1.72 0 1.11.89 2 2 2 1.11 0 2-.89 2-2 0-.53-.2-1-.53-1.36.09-.06.48-.41.59-.47.25-.11.56-.17.94-.17 1.05-.05 1.95-.45 2.75-1.25S8.95 7.77 9 6.73h-.02C9.59 6.37 10 5.73 10 5zM2 1.8c.66 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2C1.35 4.2.8 3.65.8 3c0-.65.55-1.2 1.2-1.2zm0 12.41c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2zm6-8c-.66 0-1.2-.55-1.2-1.2 0-.65.55-1.2 1.2-1.2.65 0 1.2.55 1.2 1.2 0 .65-.55 1.2-1.2 1.2z"/></svg>
      Forks
      <span class="Counter">3</span>
</a></nav>

  </div>
</div>


  </div>
</div>

<div class="container new-discussion-timeline experiment-repo-nav">
  <div class="repository-content gist-content">
    
  <div>
    <div class="repository-meta js-details-container Details">
  <div class="repository-meta-content" itemprop="about">
    Crossfaction Battlegrounds For Last Revision Trinity
  </div>
</div>


        <div class="js-gist-file-update-container js-task-list-container file-box">
  <div id="file-gistfile1-diff" class="file">
      <div class="file-header">
        <div class="file-actions">

          <a href="/irancore/10913800/raw/e59394aeb27aeeb006cf61b4726d466a136c58a9/gistfile1.diff" class="btn btn-sm ">Raw</a>
        </div>
        <div class="file-info">
          <span class="icon">
            <svg aria-hidden="true" class="octicon octicon-gist" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M7.5 5L10 7.5 7.5 10l-.75-.75L8.5 7.5 6.75 5.75 7.5 5zm-3 0L2 7.5 4.5 10l.75-.75L3.5 7.5l1.75-1.75L4.5 5zM0 13V2c0-.55.45-1 1-1h10c.55 0 1 .45 1 1v11c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1zm1 0h10V2H1v11z"/></svg>
          </span>
          <a class="tooltipped tooltipped-s css-truncate" aria-label="Permalink" href="#file-gistfile1-diff">
            <strong class="user-select-contain gist-blob-name css-truncate-target">
              gistfile1.diff
            </strong>
          </a>
        </div>
      </div>
    

  <div itemprop="text" class="blob-wrapper data type-diff">
      <table class="highlight tab-size js-file-line-container" data-tab-size="8">
      <tr>
        <td id="file-gistfile1-diff-L1" class="blob-num js-line-number" data-line-number="1"></td>
        <td id="file-gistfile1-diff-LC1" class="blob-code blob-code-inner js-file-line">From abac204e631b08b82e00d2284e67549b403a0b40 Mon Sep 17 00:00:00 2001</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L2" class="blob-num js-line-number" data-line-number="2"></td>
        <td id="file-gistfile1-diff-LC2" class="blob-code blob-code-inner js-file-line">From: irancore &lt;amir.cinderella@gmail.com&gt;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L3" class="blob-num js-line-number" data-line-number="3"></td>
        <td id="file-gistfile1-diff-LC3" class="blob-code blob-code-inner js-file-line">Orginal Code By: Lillecarl</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L4" class="blob-num js-line-number" data-line-number="4"></td>
        <td id="file-gistfile1-diff-LC4" class="blob-code blob-code-inner js-file-line">Date: Wed, 16 Jul 2014 12:27:44 +0430</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L5" class="blob-num js-line-number" data-line-number="5"></td>
        <td id="file-gistfile1-diff-LC5" class="blob-code blob-code-inner js-file-line">Subject: [PATCH] crossfaction bg last rev</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L6" class="blob-num js-line-number" data-line-number="6"></td>
        <td id="file-gistfile1-diff-LC6" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L7" class="blob-num js-line-number" data-line-number="7"></td>
        <td id="file-gistfile1-diff-LC7" class="blob-code blob-code-inner js-file-line"><span class="pl-ms">---</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L8" class="blob-num js-line-number" data-line-number="8"></td>
        <td id="file-gistfile1-diff-LC8" class="blob-code blob-code-inner js-file-line"> cmake/compiler/msvc/settings.cmake                 |    2 +-</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L9" class="blob-num js-line-number" data-line-number="9"></td>
        <td id="file-gistfile1-diff-LC9" class="blob-code blob-code-inner js-file-line"> sql/custom/AVFix.sql                               |    3 +</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L10" class="blob-num js-line-number" data-line-number="10"></td>
        <td id="file-gistfile1-diff-LC10" class="blob-code blob-code-inner js-file-line"> src/server/game/Battlegrounds/Battleground.cpp     |   47 ++-</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L11" class="blob-num js-line-number" data-line-number="11"></td>
        <td id="file-gistfile1-diff-LC11" class="blob-code blob-code-inner js-file-line"> src/server/game/Battlegrounds/Battleground.h       |    2 +-</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L12" class="blob-num js-line-number" data-line-number="12"></td>
        <td id="file-gistfile1-diff-LC12" class="blob-code blob-code-inner js-file-line"> src/server/game/Battlegrounds/BattlegroundMgr.cpp  |    2 +-</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L13" class="blob-num js-line-number" data-line-number="13"></td>
        <td id="file-gistfile1-diff-LC13" class="blob-code blob-code-inner js-file-line"> .../game/Battlegrounds/BattlegroundQueue.cpp       |   83 +++--</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L14" class="blob-num js-line-number" data-line-number="14"></td>
        <td id="file-gistfile1-diff-LC14" class="blob-code blob-code-inner js-file-line"> src/server/game/Battlegrounds/BattlegroundQueue.h  |   11 +-</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L15" class="blob-num js-line-number" data-line-number="15"></td>
        <td id="file-gistfile1-diff-LC15" class="blob-code blob-code-inner js-file-line"> .../game/Battlegrounds/Zones/BattlegroundAB.cpp    |    2 +-</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L16" class="blob-num js-line-number" data-line-number="16"></td>
        <td id="file-gistfile1-diff-LC16" class="blob-code blob-code-inner js-file-line"> .../game/Battlegrounds/Zones/BattlegroundAV.cpp    |   19 +-</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L17" class="blob-num js-line-number" data-line-number="17"></td>
        <td id="file-gistfile1-diff-LC17" class="blob-code blob-code-inner js-file-line"> .../game/Battlegrounds/Zones/BattlegroundWS.cpp    |    3 +-</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L18" class="blob-num js-line-number" data-line-number="18"></td>
        <td id="file-gistfile1-diff-LC18" class="blob-code blob-code-inner js-file-line"> src/server/game/CMakeLists.txt                     |    2 +</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L19" class="blob-num js-line-number" data-line-number="19"></td>
        <td id="file-gistfile1-diff-LC19" class="blob-code blob-code-inner js-file-line"> src/server/game/Cfbg/Cfbg.cpp                      |  325 ++++++++++++++++++++</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L20" class="blob-num js-line-number" data-line-number="20"></td>
        <td id="file-gistfile1-diff-LC20" class="blob-code blob-code-inner js-file-line"> src/server/game/Cfbg/Cfbg.h                        |   35 +++</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L21" class="blob-num js-line-number" data-line-number="21"></td>
        <td id="file-gistfile1-diff-LC21" class="blob-code blob-code-inner js-file-line"> src/server/game/Entities/Player/Player.cpp         |  100 ++++--</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L22" class="blob-num js-line-number" data-line-number="22"></td>
        <td id="file-gistfile1-diff-LC22" class="blob-code blob-code-inner js-file-line"> src/server/game/Entities/Player/Player.h           |   37 ++-</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L23" class="blob-num js-line-number" data-line-number="23"></td>
        <td id="file-gistfile1-diff-LC23" class="blob-code blob-code-inner js-file-line"> src/server/game/Entities/Unit/Unit.cpp             |   17 +-</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L24" class="blob-num js-line-number" data-line-number="24"></td>
        <td id="file-gistfile1-diff-LC24" class="blob-code blob-code-inner js-file-line"> src/server/game/Entities/Unit/Unit.h               |    4 +-</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L25" class="blob-num js-line-number" data-line-number="25"></td>
        <td id="file-gistfile1-diff-LC25" class="blob-code blob-code-inner js-file-line"> src/server/game/Handlers/BattleGroundHandler.cpp   |    4 +-</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L26" class="blob-num js-line-number" data-line-number="26"></td>
        <td id="file-gistfile1-diff-LC26" class="blob-code blob-code-inner js-file-line"> src/server/game/Handlers/CharacterHandler.cpp      |    3 +</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L27" class="blob-num js-line-number" data-line-number="27"></td>
        <td id="file-gistfile1-diff-LC27" class="blob-code blob-code-inner js-file-line"> src/server/game/Handlers/ChatHandler.cpp           |   18 +-</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L28" class="blob-num js-line-number" data-line-number="28"></td>
        <td id="file-gistfile1-diff-LC28" class="blob-code blob-code-inner js-file-line"> src/server/game/Handlers/MiscHandler.cpp           |   15 +</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L29" class="blob-num js-line-number" data-line-number="29"></td>
        <td id="file-gistfile1-diff-LC29" class="blob-code blob-code-inner js-file-line"> src/server/game/Handlers/QueryHandler.cpp          |    2 +-</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L30" class="blob-num js-line-number" data-line-number="30"></td>
        <td id="file-gistfile1-diff-LC30" class="blob-code blob-code-inner js-file-line"> src/server/game/World/World.cpp                    |    2 +</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L31" class="blob-num js-line-number" data-line-number="31"></td>
        <td id="file-gistfile1-diff-LC31" class="blob-code blob-code-inner js-file-line"> src/server/game/World/World.h                      |    1 +</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L32" class="blob-num js-line-number" data-line-number="32"></td>
        <td id="file-gistfile1-diff-LC32" class="blob-code blob-code-inner js-file-line"> src/server/worldserver/worldserver.conf.dist       |   12 +</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L33" class="blob-num js-line-number" data-line-number="33"></td>
        <td id="file-gistfile1-diff-LC33" class="blob-code blob-code-inner js-file-line"> 25 files changed, 660 insertions(+), 91 deletions(-)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L34" class="blob-num js-line-number" data-line-number="34"></td>
        <td id="file-gistfile1-diff-LC34" class="blob-code blob-code-inner js-file-line"> create mode 100644 sql/custom/AVFix.sql</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L35" class="blob-num js-line-number" data-line-number="35"></td>
        <td id="file-gistfile1-diff-LC35" class="blob-code blob-code-inner js-file-line"> create mode 100644 src/server/game/Cfbg/Cfbg.cpp</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L36" class="blob-num js-line-number" data-line-number="36"></td>
        <td id="file-gistfile1-diff-LC36" class="blob-code blob-code-inner js-file-line"> create mode 100644 src/server/game/Cfbg/Cfbg.h</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L37" class="blob-num js-line-number" data-line-number="37"></td>
        <td id="file-gistfile1-diff-LC37" class="blob-code blob-code-inner js-file-line">
</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L38" class="blob-num js-line-number" data-line-number="38"></td>
        <td id="file-gistfile1-diff-LC38" class="blob-code blob-code-inner js-file-line"><span class="pl-c1">diff --git a/cmake/compiler/msvc/settings.cmake b/cmake/compiler/msvc/settings.cmake</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L39" class="blob-num js-line-number" data-line-number="39"></td>
        <td id="file-gistfile1-diff-LC39" class="blob-code blob-code-inner js-file-line">index 3194967..6aa603a 100644</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L40" class="blob-num js-line-number" data-line-number="40"></td>
        <td id="file-gistfile1-diff-LC40" class="blob-code blob-code-inner js-file-line"><span class="pl-md">--- a/cmake/compiler/msvc/settings.cmake</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L41" class="blob-num js-line-number" data-line-number="41"></td>
        <td id="file-gistfile1-diff-LC41" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1">+++ b/cmake/compiler/msvc/settings.cmake</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L42" class="blob-num js-line-number" data-line-number="42"></td>
        <td id="file-gistfile1-diff-LC42" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -1,7 +1,7 @@</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L43" class="blob-num js-line-number" data-line-number="43"></td>
        <td id="file-gistfile1-diff-LC43" class="blob-code blob-code-inner js-file-line"> # set up output paths for executable binaries (.exe-files, and .dll-files on DLL-capable platforms)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L44" class="blob-num js-line-number" data-line-number="44"></td>
        <td id="file-gistfile1-diff-LC44" class="blob-code blob-code-inner js-file-line"> set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/bin)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L45" class="blob-num js-line-number" data-line-number="45"></td>
        <td id="file-gistfile1-diff-LC45" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L46" class="blob-num js-line-number" data-line-number="46"></td>
        <td id="file-gistfile1-diff-LC46" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>set(MSVC_EXPECTED_VERSION 18.0)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L47" class="blob-num js-line-number" data-line-number="47"></td>
        <td id="file-gistfile1-diff-LC47" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>set(MSVC_EXPECTED_VERSION 16.0)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L48" class="blob-num js-line-number" data-line-number="48"></td>
        <td id="file-gistfile1-diff-LC48" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L49" class="blob-num js-line-number" data-line-number="49"></td>
        <td id="file-gistfile1-diff-LC49" class="blob-code blob-code-inner js-file-line"> if(CMAKE_CXX_COMPILER_VERSION VERSION_LESS MSVC_EXPECTED_VERSION)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L50" class="blob-num js-line-number" data-line-number="50"></td>
        <td id="file-gistfile1-diff-LC50" class="blob-code blob-code-inner js-file-line">   message(FATAL_ERROR &quot;MSVC: TrinityCore requires version ${MSVC_EXPECTED_VERSION} (MSVC 2013) to build but found ${CMAKE_CXX_COMPILER_VERSION}&quot;)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L51" class="blob-num js-line-number" data-line-number="51"></td>
        <td id="file-gistfile1-diff-LC51" class="blob-code blob-code-inner js-file-line"><span class="pl-c1">diff --git a/sql/custom/AVFix.sql b/sql/custom/AVFix.sql</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L52" class="blob-num js-line-number" data-line-number="52"></td>
        <td id="file-gistfile1-diff-LC52" class="blob-code blob-code-inner js-file-line">new file mode 100644</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L53" class="blob-num js-line-number" data-line-number="53"></td>
        <td id="file-gistfile1-diff-LC53" class="blob-code blob-code-inner js-file-line">index 0000000..a0c7eb9</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L54" class="blob-num js-line-number" data-line-number="54"></td>
        <td id="file-gistfile1-diff-LC54" class="blob-code blob-code-inner js-file-line"><span class="pl-md">--- /dev/null</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L55" class="blob-num js-line-number" data-line-number="55"></td>
        <td id="file-gistfile1-diff-LC55" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1">+++ b/sql/custom/AVFix.sql</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L56" class="blob-num js-line-number" data-line-number="56"></td>
        <td id="file-gistfile1-diff-LC56" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -0,0 +1,3 @@</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L57" class="blob-num js-line-number" data-line-number="57"></td>
        <td id="file-gistfile1-diff-LC57" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>UPDATE creature_template SET faction = 1 WHERE entry IN (4255,4257,5134,5135,5139,11948,11949,11997,12050,12096,12127,13086,13096,13138,13216,13257,13296,13298,13299,13317,13318,13319,13320,13326,13327,13331,13422,13437,13438,13439,13442,13443,13447,13546,13576,13577,13598,13617,13797,14187,14188,14284,14762,14763,14765,14766,14768,14769,12047,13396,13358,13080,13078);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L58" class="blob-num js-line-number" data-line-number="58"></td>
        <td id="file-gistfile1-diff-LC58" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L59" class="blob-num js-line-number" data-line-number="59"></td>
        <td id="file-gistfile1-diff-LC59" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>UPDATE creature_template SET faction = 2 WHERE entry IN (2225,3343,3625,10364,10367,11946,11947,11998,12051,12052,12053,12097,12121,12122,13088,13089,13097,13137,13140,13143,13144,13145,13146,13147,13152,13153,13154,13176,13179,13180,13181,13218,13236,13284,13316,13359,13377,13397,13425,13428,13441,13448,13536,13539,13545,13597,13616,13618,13798,14185,14186,14282,14285,14772,14773,14774,14775,14776,14777,13332,13099,13079);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L60" class="blob-num js-line-number" data-line-number="60"></td>
        <td id="file-gistfile1-diff-LC60" class="blob-code blob-code-inner js-file-line"><span class="pl-c1">diff --git a/src/server/game/Battlegrounds/Battleground.cpp b/src/server/game/Battlegrounds/Battleground.cpp</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L61" class="blob-num js-line-number" data-line-number="61"></td>
        <td id="file-gistfile1-diff-LC61" class="blob-code blob-code-inner js-file-line">index fd3e13c..702d147 100644</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L62" class="blob-num js-line-number" data-line-number="62"></td>
        <td id="file-gistfile1-diff-LC62" class="blob-code blob-code-inner js-file-line"><span class="pl-md">--- a/src/server/game/Battlegrounds/Battleground.cpp</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L63" class="blob-num js-line-number" data-line-number="63"></td>
        <td id="file-gistfile1-diff-LC63" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1">+++ b/src/server/game/Battlegrounds/Battleground.cpp</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L64" class="blob-num js-line-number" data-line-number="64"></td>
        <td id="file-gistfile1-diff-LC64" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -313,7 +313,7 @@</span> inline void Battleground::_CheckSafePositions(uint32 diff)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L65" class="blob-num js-line-number" data-line-number="65"></td>
        <td id="file-gistfile1-diff-LC65" class="blob-code blob-code-inner js-file-line">             if (Player* player = ObjectAccessor::FindPlayer(itr-&gt;first))</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L66" class="blob-num js-line-number" data-line-number="66"></td>
        <td id="file-gistfile1-diff-LC66" class="blob-code blob-code-inner js-file-line">             {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L67" class="blob-num js-line-number" data-line-number="67"></td>
        <td id="file-gistfile1-diff-LC67" class="blob-code blob-code-inner js-file-line">                 Position pos = player-&gt;GetPosition();</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L68" class="blob-num js-line-number" data-line-number="68"></td>
        <td id="file-gistfile1-diff-LC68" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>                GetTeamStartLoc(player-&gt;GetBGTeam(), x, y, z, o);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L69" class="blob-num js-line-number" data-line-number="69"></td>
        <td id="file-gistfile1-diff-LC69" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                GetTeamStartLoc(player-&gt;GetTeam(), x, y, z, o);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L70" class="blob-num js-line-number" data-line-number="70"></td>
        <td id="file-gistfile1-diff-LC70" class="blob-code blob-code-inner js-file-line">                 if (pos.GetExactDistSq(x, y, z) &gt; maxDist)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L71" class="blob-num js-line-number" data-line-number="71"></td>
        <td id="file-gistfile1-diff-LC71" class="blob-code blob-code-inner js-file-line">                 {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L72" class="blob-num js-line-number" data-line-number="72"></td>
        <td id="file-gistfile1-diff-LC72" class="blob-code blob-code-inner js-file-line">                     TC_LOG_DEBUG(&quot;bg.battleground&quot;, &quot;BATTLEGROUND: Sending %s back to start location (map: %u) (possible exploit)&quot;, player-&gt;GetName().c_str(), GetMapId());</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L73" class="blob-num js-line-number" data-line-number="73"></td>
        <td id="file-gistfile1-diff-LC73" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -519,7 +519,7 @@</span> inline void Battleground::_ProcessJoin(uint32 diff)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L74" class="blob-num js-line-number" data-line-number="74"></td>
        <td id="file-gistfile1-diff-LC74" class="blob-code blob-code-inner js-file-line">                     WorldPacket status;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L75" class="blob-num js-line-number" data-line-number="75"></td>
        <td id="file-gistfile1-diff-LC75" class="blob-code blob-code-inner js-file-line">                     BattlegroundQueueTypeId bgQueueTypeId = sBattlegroundMgr-&gt;BGQueueTypeId(m_TypeID, GetArenaType());</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L76" class="blob-num js-line-number" data-line-number="76"></td>
        <td id="file-gistfile1-diff-LC76" class="blob-code blob-code-inner js-file-line">                     uint32 queueSlot = player-&gt;GetBattlegroundQueueIndex(bgQueueTypeId);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L77" class="blob-num js-line-number" data-line-number="77"></td>
        <td id="file-gistfile1-diff-LC77" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>                    sBattlegroundMgr-&gt;BuildBattlegroundStatusPacket(&amp;status, this, queueSlot, STATUS_IN_PROGRESS, 0, GetStartTime(), GetArenaType(), player-&gt;GetBGTeam());</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L78" class="blob-num js-line-number" data-line-number="78"></td>
        <td id="file-gistfile1-diff-LC78" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                    sBattlegroundMgr-&gt;BuildBattlegroundStatusPacket(&amp;status, this, queueSlot, STATUS_IN_PROGRESS, 0, GetStartTime(), GetArenaType(), player-&gt;GetTeam());</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L79" class="blob-num js-line-number" data-line-number="79"></td>
        <td id="file-gistfile1-diff-LC79" class="blob-code blob-code-inner js-file-line">                     player-&gt;SendDirectMessage(&amp;status);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L80" class="blob-num js-line-number" data-line-number="80"></td>
        <td id="file-gistfile1-diff-LC80" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L81" class="blob-num js-line-number" data-line-number="81"></td>
        <td id="file-gistfile1-diff-LC81" class="blob-code blob-code-inner js-file-line">                     player-&gt;RemoveAurasDueToSpell(SPELL_ARENA_PREPARATION);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L82" class="blob-num js-line-number" data-line-number="82"></td>
        <td id="file-gistfile1-diff-LC82" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -705,12 +705,32 @@</span> void Battleground::RewardHonorToTeam(uint32 Honor, uint32 TeamID)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L83" class="blob-num js-line-number" data-line-number="83"></td>
        <td id="file-gistfile1-diff-LC83" class="blob-code blob-code-inner js-file-line">             UpdatePlayerScore(player, SCORE_BONUS_HONOR, Honor);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L84" class="blob-num js-line-number" data-line-number="84"></td>
        <td id="file-gistfile1-diff-LC84" class="blob-code blob-code-inner js-file-line"> }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L85" class="blob-num js-line-number" data-line-number="85"></td>
        <td id="file-gistfile1-diff-LC85" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L86" class="blob-num js-line-number" data-line-number="86"></td>
        <td id="file-gistfile1-diff-LC86" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>void Battleground::RewardReputationToTeam(uint32 faction_id, uint32 Reputation, uint32 TeamID)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L87" class="blob-num js-line-number" data-line-number="87"></td>
        <td id="file-gistfile1-diff-LC87" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>void Battleground::RewardReputationToTeam(uint32 a_faction_id, uint32 h_faction_id, uint32 Reputation, uint32 teamId)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L88" class="blob-num js-line-number" data-line-number="88"></td>
        <td id="file-gistfile1-diff-LC88" class="blob-code blob-code-inner js-file-line"> {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L89" class="blob-num js-line-number" data-line-number="89"></td>
        <td id="file-gistfile1-diff-LC89" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>    if (FactionEntry const* factionEntry = sFactionStore.LookupEntry(faction_id))</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L90" class="blob-num js-line-number" data-line-number="90"></td>
        <td id="file-gistfile1-diff-LC90" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>        for (BattlegroundPlayerMap::const_iterator itr = m_Players.begin(); itr != m_Players.end(); ++itr)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L91" class="blob-num js-line-number" data-line-number="91"></td>
        <td id="file-gistfile1-diff-LC91" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>            if (Player* player = _GetPlayerForTeam(TeamID, itr, &quot;RewardReputationToTeam&quot;))</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L92" class="blob-num js-line-number" data-line-number="92"></td>
        <td id="file-gistfile1-diff-LC92" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>                player-&gt;GetReputationMgr().ModifyReputation(factionEntry, Reputation);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L93" class="blob-num js-line-number" data-line-number="93"></td>
        <td id="file-gistfile1-diff-LC93" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    FactionEntry const* a_factionEntry = sFactionStore.LookupEntry(a_faction_id);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L94" class="blob-num js-line-number" data-line-number="94"></td>
        <td id="file-gistfile1-diff-LC94" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    FactionEntry const* h_factionEntry = sFactionStore.LookupEntry(h_faction_id);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L95" class="blob-num js-line-number" data-line-number="95"></td>
        <td id="file-gistfile1-diff-LC95" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L96" class="blob-num js-line-number" data-line-number="96"></td>
        <td id="file-gistfile1-diff-LC96" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    if (!a_factionEntry || !h_factionEntry)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L97" class="blob-num js-line-number" data-line-number="97"></td>
        <td id="file-gistfile1-diff-LC97" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        return;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L98" class="blob-num js-line-number" data-line-number="98"></td>
        <td id="file-gistfile1-diff-LC98" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L99" class="blob-num js-line-number" data-line-number="99"></td>
        <td id="file-gistfile1-diff-LC99" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    for (BattlegroundPlayerMap::const_iterator itr = m_Players.begin(); itr != m_Players.end(); ++itr)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L100" class="blob-num js-line-number" data-line-number="100"></td>
        <td id="file-gistfile1-diff-LC100" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    {</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L101" class="blob-num js-line-number" data-line-number="101"></td>
        <td id="file-gistfile1-diff-LC101" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        if (itr-&gt;second.OfflineRemoveTime)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L102" class="blob-num js-line-number" data-line-number="102"></td>
        <td id="file-gistfile1-diff-LC102" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            continue;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L103" class="blob-num js-line-number" data-line-number="103"></td>
        <td id="file-gistfile1-diff-LC103" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L104" class="blob-num js-line-number" data-line-number="104"></td>
        <td id="file-gistfile1-diff-LC104" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        Player* plr = ObjectAccessor::FindPlayer(itr-&gt;first);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L105" class="blob-num js-line-number" data-line-number="105"></td>
        <td id="file-gistfile1-diff-LC105" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L106" class="blob-num js-line-number" data-line-number="106"></td>
        <td id="file-gistfile1-diff-LC106" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        if (!plr)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L107" class="blob-num js-line-number" data-line-number="107"></td>
        <td id="file-gistfile1-diff-LC107" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        {</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L108" class="blob-num js-line-number" data-line-number="108"></td>
        <td id="file-gistfile1-diff-LC108" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            TC_LOG_ERROR(&quot;bg.battleground&quot;, &quot;BattleGround:RewardReputationToTeam: %u not found!&quot;, itr-&gt;first);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L109" class="blob-num js-line-number" data-line-number="109"></td>
        <td id="file-gistfile1-diff-LC109" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            continue;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L110" class="blob-num js-line-number" data-line-number="110"></td>
        <td id="file-gistfile1-diff-LC110" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L111" class="blob-num js-line-number" data-line-number="111"></td>
        <td id="file-gistfile1-diff-LC111" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L112" class="blob-num js-line-number" data-line-number="112"></td>
        <td id="file-gistfile1-diff-LC112" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        uint32 team = plr-&gt;GetTeam();</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L113" class="blob-num js-line-number" data-line-number="113"></td>
        <td id="file-gistfile1-diff-LC113" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L114" class="blob-num js-line-number" data-line-number="114"></td>
        <td id="file-gistfile1-diff-LC114" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        if (team == teamId)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L115" class="blob-num js-line-number" data-line-number="115"></td>
        <td id="file-gistfile1-diff-LC115" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            plr-&gt;GetReputationMgr().ModifyReputation(plr-&gt;GetOTeam() == ALLIANCE ? a_factionEntry : h_factionEntry, Reputation);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L116" class="blob-num js-line-number" data-line-number="116"></td>
        <td id="file-gistfile1-diff-LC116" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L117" class="blob-num js-line-number" data-line-number="117"></td>
        <td id="file-gistfile1-diff-LC117" class="blob-code blob-code-inner js-file-line"> }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L118" class="blob-num js-line-number" data-line-number="118"></td>
        <td id="file-gistfile1-diff-LC118" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L119" class="blob-num js-line-number" data-line-number="119"></td>
        <td id="file-gistfile1-diff-LC119" class="blob-code blob-code-inner js-file-line"> void Battleground::UpdateWorldState(uint32 Field, uint32 Value)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L120" class="blob-num js-line-number" data-line-number="120"></td>
        <td id="file-gistfile1-diff-LC120" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -920,7 +940,7 @@</span> void Battleground::EndBattleground(uint32 winner)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L121" class="blob-num js-line-number" data-line-number="121"></td>
        <td id="file-gistfile1-diff-LC121" class="blob-code blob-code-inner js-file-line">         player-&gt;SendDirectMessage(&amp;pvpLogData);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L122" class="blob-num js-line-number" data-line-number="122"></td>
        <td id="file-gistfile1-diff-LC122" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L123" class="blob-num js-line-number" data-line-number="123"></td>
        <td id="file-gistfile1-diff-LC123" class="blob-code blob-code-inner js-file-line">         WorldPacket data;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L124" class="blob-num js-line-number" data-line-number="124"></td>
        <td id="file-gistfile1-diff-LC124" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>        sBattlegroundMgr-&gt;BuildBattlegroundStatusPacket(&amp;data, this, player-&gt;GetBattlegroundQueueIndex(bgQueueTypeId), STATUS_IN_PROGRESS, TIME_TO_AUTOREMOVE, GetStartTime(), GetArenaType(), player-&gt;GetBGTeam());</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L125" class="blob-num js-line-number" data-line-number="125"></td>
        <td id="file-gistfile1-diff-LC125" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        sBattlegroundMgr-&gt;BuildBattlegroundStatusPacket(&amp;data, this, player-&gt;GetBattlegroundQueueIndex(bgQueueTypeId), STATUS_IN_PROGRESS, TIME_TO_AUTOREMOVE, GetStartTime(), GetArenaType(), player-&gt;GetTeam());</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L126" class="blob-num js-line-number" data-line-number="126"></td>
        <td id="file-gistfile1-diff-LC126" class="blob-code blob-code-inner js-file-line">         player-&gt;SendDirectMessage(&amp;data);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L127" class="blob-num js-line-number" data-line-number="127"></td>
        <td id="file-gistfile1-diff-LC127" class="blob-code blob-code-inner js-file-line">         player-&gt;UpdateAchievementCriteria(ACHIEVEMENT_CRITERIA_TYPE_COMPLETE_BATTLEGROUND, 1);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L128" class="blob-num js-line-number" data-line-number="128"></td>
        <td id="file-gistfile1-diff-LC128" class="blob-code blob-code-inner js-file-line">     }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L129" class="blob-num js-line-number" data-line-number="129"></td>
        <td id="file-gistfile1-diff-LC129" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -1069,6 +1089,7 @@</span> void Battleground::RemovePlayerAtLeave(uint64 guid, bool Transport, bool SendPac</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L130" class="blob-num js-line-number" data-line-number="130"></td>
        <td id="file-gistfile1-diff-LC130" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L131" class="blob-num js-line-number" data-line-number="131"></td>
        <td id="file-gistfile1-diff-LC131" class="blob-code blob-code-inner js-file-line">     if (player)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L132" class="blob-num js-line-number" data-line-number="132"></td>
        <td id="file-gistfile1-diff-LC132" class="blob-code blob-code-inner js-file-line">     {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L133" class="blob-num js-line-number" data-line-number="133"></td>
        <td id="file-gistfile1-diff-LC133" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        player-&gt;FitPlayerInTeam(false, this);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L134" class="blob-num js-line-number" data-line-number="134"></td>
        <td id="file-gistfile1-diff-LC134" class="blob-code blob-code-inner js-file-line">         // Do next only if found in battleground</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L135" class="blob-num js-line-number" data-line-number="135"></td>
        <td id="file-gistfile1-diff-LC135" class="blob-code blob-code-inner js-file-line">         player-&gt;SetBattlegroundId(0, BATTLEGROUND_TYPE_NONE);  // We&#39;re not in BG.</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L136" class="blob-num js-line-number" data-line-number="136"></td>
        <td id="file-gistfile1-diff-LC136" class="blob-code blob-code-inner js-file-line">         // reset destination bg team</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L137" class="blob-num js-line-number" data-line-number="137"></td>
        <td id="file-gistfile1-diff-LC137" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -1135,7 +1156,7 @@</span> void Battleground::AddPlayer(Player* player)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L138" class="blob-num js-line-number" data-line-number="138"></td>
        <td id="file-gistfile1-diff-LC138" class="blob-code blob-code-inner js-file-line">     // score struct must be created in inherited class</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L139" class="blob-num js-line-number" data-line-number="139"></td>
        <td id="file-gistfile1-diff-LC139" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L140" class="blob-num js-line-number" data-line-number="140"></td>
        <td id="file-gistfile1-diff-LC140" class="blob-code blob-code-inner js-file-line">     uint64 guid = player-&gt;GetGUID();</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L141" class="blob-num js-line-number" data-line-number="141"></td>
        <td id="file-gistfile1-diff-LC141" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>    uint32 team = player-&gt;GetBGTeam();</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L142" class="blob-num js-line-number" data-line-number="142"></td>
        <td id="file-gistfile1-diff-LC142" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    uint32 team = player-&gt;GetTeam();</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L143" class="blob-num js-line-number" data-line-number="143"></td>
        <td id="file-gistfile1-diff-LC143" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L144" class="blob-num js-line-number" data-line-number="144"></td>
        <td id="file-gistfile1-diff-LC144" class="blob-code blob-code-inner js-file-line">     BattlegroundPlayer bp;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L145" class="blob-num js-line-number" data-line-number="145"></td>
        <td id="file-gistfile1-diff-LC145" class="blob-code blob-code-inner js-file-line">     bp.OfflineRemoveTime = 0;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L146" class="blob-num js-line-number" data-line-number="146"></td>
        <td id="file-gistfile1-diff-LC146" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -1201,6 +1222,8 @@</span> void Battleground::AddPlayer(Player* player)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L147" class="blob-num js-line-number" data-line-number="147"></td>
        <td id="file-gistfile1-diff-LC147" class="blob-code blob-code-inner js-file-line">     // setup BG group membership</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L148" class="blob-num js-line-number" data-line-number="148"></td>
        <td id="file-gistfile1-diff-LC148" class="blob-code blob-code-inner js-file-line">     PlayerAddedToBGCheckIfBGIsRunning(player);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L149" class="blob-num js-line-number" data-line-number="149"></td>
        <td id="file-gistfile1-diff-LC149" class="blob-code blob-code-inner js-file-line">     AddOrSetPlayerToCorrectBgGroup(player, team);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L150" class="blob-num js-line-number" data-line-number="150"></td>
        <td id="file-gistfile1-diff-LC150" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L151" class="blob-num js-line-number" data-line-number="151"></td>
        <td id="file-gistfile1-diff-LC151" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    player-&gt;FitPlayerInTeam(true, this);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L152" class="blob-num js-line-number" data-line-number="152"></td>
        <td id="file-gistfile1-diff-LC152" class="blob-code blob-code-inner js-file-line"> }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L153" class="blob-num js-line-number" data-line-number="153"></td>
        <td id="file-gistfile1-diff-LC153" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L154" class="blob-num js-line-number" data-line-number="154"></td>
        <td id="file-gistfile1-diff-LC154" class="blob-code blob-code-inner js-file-line"> // this method adds player to his team&#39;s bg group, or sets his correct group if player is already in bg group</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L155" class="blob-num js-line-number" data-line-number="155"></td>
        <td id="file-gistfile1-diff-LC155" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -1270,8 +1293,8 @@</span> void Battleground::EventPlayerLoggedOut(Player* player)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L156" class="blob-num js-line-number" data-line-number="156"></td>
        <td id="file-gistfile1-diff-LC156" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L157" class="blob-num js-line-number" data-line-number="157"></td>
        <td id="file-gistfile1-diff-LC157" class="blob-code blob-code-inner js-file-line">         // 1 player is logging out, if it is the last, then end arena!</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L158" class="blob-num js-line-number" data-line-number="158"></td>
        <td id="file-gistfile1-diff-LC158" class="blob-code blob-code-inner js-file-line">         if (isArena())</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L159" class="blob-num js-line-number" data-line-number="159"></td>
        <td id="file-gistfile1-diff-LC159" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>            if (GetAlivePlayersCountByTeam(player-&gt;GetBGTeam()) &lt;= 1 &amp;&amp; GetPlayersCountByTeam(GetOtherTeam(player-&gt;GetBGTeam())))</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L160" class="blob-num js-line-number" data-line-number="160"></td>
        <td id="file-gistfile1-diff-LC160" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>                EndBattleground(GetOtherTeam(player-&gt;GetBGTeam()));</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L161" class="blob-num js-line-number" data-line-number="161"></td>
        <td id="file-gistfile1-diff-LC161" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            if (GetAlivePlayersCountByTeam(player-&gt;GetTeam()) &lt;= 1 &amp;&amp; GetPlayersCountByTeam(GetOtherTeam(player-&gt;GetTeam())))</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L162" class="blob-num js-line-number" data-line-number="162"></td>
        <td id="file-gistfile1-diff-LC162" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                EndBattleground(GetOtherTeam(player-&gt;GetTeam()));</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L163" class="blob-num js-line-number" data-line-number="163"></td>
        <td id="file-gistfile1-diff-LC163" class="blob-code blob-code-inner js-file-line">     }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L164" class="blob-num js-line-number" data-line-number="164"></td>
        <td id="file-gistfile1-diff-LC164" class="blob-code blob-code-inner js-file-line"> }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L165" class="blob-num js-line-number" data-line-number="165"></td>
        <td id="file-gistfile1-diff-LC165" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L166" class="blob-num js-line-number" data-line-number="166"></td>
        <td id="file-gistfile1-diff-LC166" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -1880,7 +1903,7 @@</span> void Battleground::PlayerAddedToBGCheckIfBGIsRunning(Player* player)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L167" class="blob-num js-line-number" data-line-number="167"></td>
        <td id="file-gistfile1-diff-LC167" class="blob-code blob-code-inner js-file-line">     BuildPvPLogDataPacket(data);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L168" class="blob-num js-line-number" data-line-number="168"></td>
        <td id="file-gistfile1-diff-LC168" class="blob-code blob-code-inner js-file-line">     player-&gt;SendDirectMessage(&amp;data);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L169" class="blob-num js-line-number" data-line-number="169"></td>
        <td id="file-gistfile1-diff-LC169" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L170" class="blob-num js-line-number" data-line-number="170"></td>
        <td id="file-gistfile1-diff-LC170" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>    sBattlegroundMgr-&gt;BuildBattlegroundStatusPacket(&amp;data, this, player-&gt;GetBattlegroundQueueIndex(bgQueueTypeId), STATUS_IN_PROGRESS, GetEndTime(), GetStartTime(), GetArenaType(), player-&gt;GetBGTeam());</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L171" class="blob-num js-line-number" data-line-number="171"></td>
        <td id="file-gistfile1-diff-LC171" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    sBattlegroundMgr-&gt;BuildBattlegroundStatusPacket(&amp;data, this, player-&gt;GetBattlegroundQueueIndex(bgQueueTypeId), STATUS_IN_PROGRESS, GetEndTime(), GetStartTime(), GetArenaType(), player-&gt;GetTeam());</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L172" class="blob-num js-line-number" data-line-number="172"></td>
        <td id="file-gistfile1-diff-LC172" class="blob-code blob-code-inner js-file-line">     player-&gt;SendDirectMessage(&amp;data);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L173" class="blob-num js-line-number" data-line-number="173"></td>
        <td id="file-gistfile1-diff-LC173" class="blob-code blob-code-inner js-file-line"> }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L174" class="blob-num js-line-number" data-line-number="174"></td>
        <td id="file-gistfile1-diff-LC174" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L175" class="blob-num js-line-number" data-line-number="175"></td>
        <td id="file-gistfile1-diff-LC175" class="blob-code blob-code-inner js-file-line"><span class="pl-c1">diff --git a/src/server/game/Battlegrounds/Battleground.h b/src/server/game/Battlegrounds/Battleground.h</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L176" class="blob-num js-line-number" data-line-number="176"></td>
        <td id="file-gistfile1-diff-LC176" class="blob-code blob-code-inner js-file-line">index 7d1bf55..5061d287 100644</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L177" class="blob-num js-line-number" data-line-number="177"></td>
        <td id="file-gistfile1-diff-LC177" class="blob-code blob-code-inner js-file-line"><span class="pl-md">--- a/src/server/game/Battlegrounds/Battleground.h</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L178" class="blob-num js-line-number" data-line-number="178"></td>
        <td id="file-gistfile1-diff-LC178" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1">+++ b/src/server/game/Battlegrounds/Battleground.h</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L179" class="blob-num js-line-number" data-line-number="179"></td>
        <td id="file-gistfile1-diff-LC179" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -382,7 +382,7 @@</span> class Battleground</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L180" class="blob-num js-line-number" data-line-number="180"></td>
        <td id="file-gistfile1-diff-LC180" class="blob-code blob-code-inner js-file-line">         void CastSpellOnTeam(uint32 SpellID, uint32 TeamID);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L181" class="blob-num js-line-number" data-line-number="181"></td>
        <td id="file-gistfile1-diff-LC181" class="blob-code blob-code-inner js-file-line">         void RemoveAuraOnTeam(uint32 SpellID, uint32 TeamID);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L182" class="blob-num js-line-number" data-line-number="182"></td>
        <td id="file-gistfile1-diff-LC182" class="blob-code blob-code-inner js-file-line">         void RewardHonorToTeam(uint32 Honor, uint32 TeamID);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L183" class="blob-num js-line-number" data-line-number="183"></td>
        <td id="file-gistfile1-diff-LC183" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>        void RewardReputationToTeam(uint32 faction_id, uint32 Reputation, uint32 TeamID);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L184" class="blob-num js-line-number" data-line-number="184"></td>
        <td id="file-gistfile1-diff-LC184" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        void RewardReputationToTeam(uint32 a_faction_id, uint32 h_faction_id, uint32 Reputation, uint32 teamId);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L185" class="blob-num js-line-number" data-line-number="185"></td>
        <td id="file-gistfile1-diff-LC185" class="blob-code blob-code-inner js-file-line">         void UpdateWorldState(uint32 Field, uint32 Value);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L186" class="blob-num js-line-number" data-line-number="186"></td>
        <td id="file-gistfile1-diff-LC186" class="blob-code blob-code-inner js-file-line">         void UpdateWorldStateForPlayer(uint32 Field, uint32 Value, Player* player);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L187" class="blob-num js-line-number" data-line-number="187"></td>
        <td id="file-gistfile1-diff-LC187" class="blob-code blob-code-inner js-file-line">         void EndBattleground(uint32 winner);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L188" class="blob-num js-line-number" data-line-number="188"></td>
        <td id="file-gistfile1-diff-LC188" class="blob-code blob-code-inner js-file-line"><span class="pl-c1">diff --git a/src/server/game/Battlegrounds/BattlegroundMgr.cpp b/src/server/game/Battlegrounds/BattlegroundMgr.cpp</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L189" class="blob-num js-line-number" data-line-number="189"></td>
        <td id="file-gistfile1-diff-LC189" class="blob-code blob-code-inner js-file-line">index ef78594..4acf096 100644</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L190" class="blob-num js-line-number" data-line-number="190"></td>
        <td id="file-gistfile1-diff-LC190" class="blob-code blob-code-inner js-file-line"><span class="pl-md">--- a/src/server/game/Battlegrounds/BattlegroundMgr.cpp</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L191" class="blob-num js-line-number" data-line-number="191"></td>
        <td id="file-gistfile1-diff-LC191" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1">+++ b/src/server/game/Battlegrounds/BattlegroundMgr.cpp</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L192" class="blob-num js-line-number" data-line-number="192"></td>
        <td id="file-gistfile1-diff-LC192" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -724,7 +724,7 @@</span> void BattlegroundMgr::SendToBattleground(Player* player, uint32 instanceId, Batt</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L193" class="blob-num js-line-number" data-line-number="193"></td>
        <td id="file-gistfile1-diff-LC193" class="blob-code blob-code-inner js-file-line">     {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L194" class="blob-num js-line-number" data-line-number="194"></td>
        <td id="file-gistfile1-diff-LC194" class="blob-code blob-code-inner js-file-line">         float x, y, z, O;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L195" class="blob-num js-line-number" data-line-number="195"></td>
        <td id="file-gistfile1-diff-LC195" class="blob-code blob-code-inner js-file-line">         uint32 mapid = bg-&gt;GetMapId();</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L196" class="blob-num js-line-number" data-line-number="196"></td>
        <td id="file-gistfile1-diff-LC196" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>        uint32 team = player-&gt;GetBGTeam();</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L197" class="blob-num js-line-number" data-line-number="197"></td>
        <td id="file-gistfile1-diff-LC197" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        uint32 team = player-&gt;GetTeam();</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L198" class="blob-num js-line-number" data-line-number="198"></td>
        <td id="file-gistfile1-diff-LC198" class="blob-code blob-code-inner js-file-line">         if (team == 0)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L199" class="blob-num js-line-number" data-line-number="199"></td>
        <td id="file-gistfile1-diff-LC199" class="blob-code blob-code-inner js-file-line">             team = player-&gt;GetTeam();</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L200" class="blob-num js-line-number" data-line-number="200"></td>
        <td id="file-gistfile1-diff-LC200" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L201" class="blob-num js-line-number" data-line-number="201"></td>
        <td id="file-gistfile1-diff-LC201" class="blob-code blob-code-inner js-file-line"><span class="pl-c1">diff --git a/src/server/game/Battlegrounds/BattlegroundQueue.cpp b/src/server/game/Battlegrounds/BattlegroundQueue.cpp</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L202" class="blob-num js-line-number" data-line-number="202"></td>
        <td id="file-gistfile1-diff-LC202" class="blob-code blob-code-inner js-file-line">index 547d6e9..9418296 100644</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L203" class="blob-num js-line-number" data-line-number="203"></td>
        <td id="file-gistfile1-diff-LC203" class="blob-code blob-code-inner js-file-line"><span class="pl-md">--- a/src/server/game/Battlegrounds/BattlegroundQueue.cpp</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L204" class="blob-num js-line-number" data-line-number="204"></td>
        <td id="file-gistfile1-diff-LC204" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1">+++ b/src/server/game/Battlegrounds/BattlegroundQueue.cpp</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L205" class="blob-num js-line-number" data-line-number="205"></td>
        <td id="file-gistfile1-diff-LC205" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -154,6 +154,10 @@</span> GroupQueueInfo* BattlegroundQueue::AddGroup(Player* leader, Group* grp, Battlegr</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L206" class="blob-num js-line-number" data-line-number="206"></td>
        <td id="file-gistfile1-diff-LC206" class="blob-code blob-code-inner js-file-line">         index += BG_TEAMS_COUNT;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L207" class="blob-num js-line-number" data-line-number="207"></td>
        <td id="file-gistfile1-diff-LC207" class="blob-code blob-code-inner js-file-line">     if (ginfo-&gt;Team == HORDE)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L208" class="blob-num js-line-number" data-line-number="208"></td>
        <td id="file-gistfile1-diff-LC208" class="blob-code blob-code-inner js-file-line">         index++;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L209" class="blob-num js-line-number" data-line-number="209"></td>
        <td id="file-gistfile1-diff-LC209" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L210" class="blob-num js-line-number" data-line-number="210"></td>
        <td id="file-gistfile1-diff-LC210" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    if (sWorld-&gt;getBoolConfig(BATTLEGROUND_CROSSFACTION_ENABLED) &amp;&amp; ArenaType == 0)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L211" class="blob-num js-line-number" data-line-number="211"></td>
        <td id="file-gistfile1-diff-LC211" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        index = BG_QUEUE_MIXED;                      // BG_QUEUE_*_* -&gt; BG_QUEUE_MIXED</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L212" class="blob-num js-line-number" data-line-number="212"></td>
        <td id="file-gistfile1-diff-LC212" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L213" class="blob-num js-line-number" data-line-number="213"></td>
        <td id="file-gistfile1-diff-LC213" class="blob-code blob-code-inner js-file-line">     TC_LOG_DEBUG(&quot;bg.battleground&quot;, &quot;Adding Group to BattlegroundQueue bgTypeId : %u, bracket_id : %u, index : %u&quot;, BgTypeId, bracketId, index);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L214" class="blob-num js-line-number" data-line-number="214"></td>
        <td id="file-gistfile1-diff-LC214" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L215" class="blob-num js-line-number" data-line-number="215"></td>
        <td id="file-gistfile1-diff-LC215" class="blob-code blob-code-inner js-file-line">     uint32 lastOnlineTime = getMSTime();</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L216" class="blob-num js-line-number" data-line-number="216"></td>
        <td id="file-gistfile1-diff-LC216" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -199,31 +203,56 @@</span> GroupQueueInfo* BattlegroundQueue::AddGroup(Player* leader, Group* grp, Battlegr</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L217" class="blob-num js-line-number" data-line-number="217"></td>
        <td id="file-gistfile1-diff-LC217" class="blob-code blob-code-inner js-file-line">         {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L218" class="blob-num js-line-number" data-line-number="218"></td>
        <td id="file-gistfile1-diff-LC218" class="blob-code blob-code-inner js-file-line">             if (Battleground* bg = sBattlegroundMgr-&gt;GetBattlegroundTemplate(ginfo-&gt;BgTypeId))</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L219" class="blob-num js-line-number" data-line-number="219"></td>
        <td id="file-gistfile1-diff-LC219" class="blob-code blob-code-inner js-file-line">             {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L220" class="blob-num js-line-number" data-line-number="220"></td>
        <td id="file-gistfile1-diff-LC220" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>                char const* bgName = bg-&gt;GetName();</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L221" class="blob-num js-line-number" data-line-number="221"></td>
        <td id="file-gistfile1-diff-LC221" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>                uint32 MinPlayers = bg-&gt;GetMinPlayersPerTeam();</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L222" class="blob-num js-line-number" data-line-number="222"></td>
        <td id="file-gistfile1-diff-LC222" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>                uint32 qHorde = 0;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L223" class="blob-num js-line-number" data-line-number="223"></td>
        <td id="file-gistfile1-diff-LC223" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>                uint32 qAlliance = 0;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L224" class="blob-num js-line-number" data-line-number="224"></td>
        <td id="file-gistfile1-diff-LC224" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>                uint32 q_min_level = bracketEntry-&gt;minLevel;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L225" class="blob-num js-line-number" data-line-number="225"></td>
        <td id="file-gistfile1-diff-LC225" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>                uint32 q_max_level = bracketEntry-&gt;maxLevel;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L226" class="blob-num js-line-number" data-line-number="226"></td>
        <td id="file-gistfile1-diff-LC226" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>                GroupsQueueType::const_iterator itr;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L227" class="blob-num js-line-number" data-line-number="227"></td>
        <td id="file-gistfile1-diff-LC227" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>                for (itr = m_QueuedGroups[bracketId][BG_QUEUE_NORMAL_ALLIANCE].begin(); itr != m_QueuedGroups[bracketId][BG_QUEUE_NORMAL_ALLIANCE].end(); ++itr)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L228" class="blob-num js-line-number" data-line-number="228"></td>
        <td id="file-gistfile1-diff-LC228" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>                    if (!(*itr)-&gt;IsInvitedToBGInstanceGUID)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L229" class="blob-num js-line-number" data-line-number="229"></td>
        <td id="file-gistfile1-diff-LC229" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>                        qAlliance += (*itr)-&gt;Players.size();</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L230" class="blob-num js-line-number" data-line-number="230"></td>
        <td id="file-gistfile1-diff-LC230" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>                for (itr = m_QueuedGroups[bracketId][BG_QUEUE_NORMAL_HORDE].begin(); itr != m_QueuedGroups[bracketId][BG_QUEUE_NORMAL_HORDE].end(); ++itr)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L231" class="blob-num js-line-number" data-line-number="231"></td>
        <td id="file-gistfile1-diff-LC231" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>                    if (!(*itr)-&gt;IsInvitedToBGInstanceGUID)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L232" class="blob-num js-line-number" data-line-number="232"></td>
        <td id="file-gistfile1-diff-LC232" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>                        qHorde += (*itr)-&gt;Players.size();</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L233" class="blob-num js-line-number" data-line-number="233"></td>
        <td id="file-gistfile1-diff-LC233" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L234" class="blob-num js-line-number" data-line-number="234"></td>
        <td id="file-gistfile1-diff-LC234" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>                // Show queue status to player only (when joining queue)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L235" class="blob-num js-line-number" data-line-number="235"></td>
        <td id="file-gistfile1-diff-LC235" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>                if (sWorld-&gt;getBoolConfig(CONFIG_BATTLEGROUND_QUEUE_ANNOUNCER_PLAYERONLY))</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L236" class="blob-num js-line-number" data-line-number="236"></td>
        <td id="file-gistfile1-diff-LC236" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                if (sWorld-&gt;getBoolConfig(BATTLEGROUND_CROSSFACTION_ENABLED))</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L237" class="blob-num js-line-number" data-line-number="237"></td>
        <td id="file-gistfile1-diff-LC237" class="blob-code blob-code-inner js-file-line">                 {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L238" class="blob-num js-line-number" data-line-number="238"></td>
        <td id="file-gistfile1-diff-LC238" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>                    ChatHandler(leader-&gt;GetSession()).PSendSysMessage(LANG_BG_QUEUE_ANNOUNCE_SELF, bgName, q_min_level, q_max_level,</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L239" class="blob-num js-line-number" data-line-number="239"></td>
        <td id="file-gistfile1-diff-LC239" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>                        qAlliance, (MinPlayers &gt; qAlliance) ? MinPlayers - qAlliance : (uint32)0, qHorde, (MinPlayers &gt; qHorde) ? MinPlayers - qHorde : (uint32)0);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L240" class="blob-num js-line-number" data-line-number="240"></td>
        <td id="file-gistfile1-diff-LC240" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                    char const* bgName = bg-&gt;GetName();</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L241" class="blob-num js-line-number" data-line-number="241"></td>
        <td id="file-gistfile1-diff-LC241" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                    uint32 MinPlayers = bg-&gt;GetMinPlayersPerTeam()*2;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L242" class="blob-num js-line-number" data-line-number="242"></td>
        <td id="file-gistfile1-diff-LC242" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                    uint32 qPlayers = 0;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L243" class="blob-num js-line-number" data-line-number="243"></td>
        <td id="file-gistfile1-diff-LC243" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                    uint32 q_min_level = bracketEntry-&gt;minLevel;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L244" class="blob-num js-line-number" data-line-number="244"></td>
        <td id="file-gistfile1-diff-LC244" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                    uint32 q_max_level = bracketEntry-&gt;maxLevel;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L245" class="blob-num js-line-number" data-line-number="245"></td>
        <td id="file-gistfile1-diff-LC245" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                    for (GroupsQueueType::const_iterator itr = m_QueuedGroups[bracketId][BG_QUEUE_MIXED].begin(); itr != m_QueuedGroups[bracketId][BG_QUEUE_MIXED].end(); ++itr)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L246" class="blob-num js-line-number" data-line-number="246"></td>
        <td id="file-gistfile1-diff-LC246" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                        if (!(*itr)-&gt;IsInvitedToBGInstanceGUID)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L247" class="blob-num js-line-number" data-line-number="247"></td>
        <td id="file-gistfile1-diff-LC247" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                            qPlayers += (*itr)-&gt;Players.size();</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L248" class="blob-num js-line-number" data-line-number="248"></td>
        <td id="file-gistfile1-diff-LC248" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L249" class="blob-num js-line-number" data-line-number="249"></td>
        <td id="file-gistfile1-diff-LC249" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                    if (sWorld-&gt;getBoolConfig(CONFIG_BATTLEGROUND_QUEUE_ANNOUNCER_PLAYERONLY))</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L250" class="blob-num js-line-number" data-line-number="250"></td>
        <td id="file-gistfile1-diff-LC250" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                    {</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L251" class="blob-num js-line-number" data-line-number="251"></td>
        <td id="file-gistfile1-diff-LC251" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                        ChatHandler(leader-&gt;GetSession()).PSendSysMessage(&quot;Queue status for %s (Lvl: %u to %u) Queued players: %u (Need at least %u more)&quot;, bgName, q_min_level, q_max_level, qPlayers, MinPlayers - qPlayers);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L252" class="blob-num js-line-number" data-line-number="252"></td>
        <td id="file-gistfile1-diff-LC252" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                    }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L253" class="blob-num js-line-number" data-line-number="253"></td>
        <td id="file-gistfile1-diff-LC253" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                    else</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L254" class="blob-num js-line-number" data-line-number="254"></td>
        <td id="file-gistfile1-diff-LC254" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                    {</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L255" class="blob-num js-line-number" data-line-number="255"></td>
        <td id="file-gistfile1-diff-LC255" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                        std::ostringstream ss;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L256" class="blob-num js-line-number" data-line-number="256"></td>
        <td id="file-gistfile1-diff-LC256" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                        ss &lt;&lt; &quot;|cffff0000[BG Queue Announcer]:|r &quot; &lt;&lt; bgName &lt;&lt; &quot; -- [&quot; &lt;&lt; q_min_level &lt;&lt; &quot;-&quot; &lt;&lt; q_max_level &lt;&lt; &quot;] &quot; &lt;&lt; qPlayers &lt;&lt; &quot;/&quot; &lt;&lt; MinPlayers;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L257" class="blob-num js-line-number" data-line-number="257"></td>
        <td id="file-gistfile1-diff-LC257" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                        sWorld-&gt;SendGlobalText(ss.str().c_str(), NULL);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L258" class="blob-num js-line-number" data-line-number="258"></td>
        <td id="file-gistfile1-diff-LC258" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                    }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L259" class="blob-num js-line-number" data-line-number="259"></td>
        <td id="file-gistfile1-diff-LC259" class="blob-code blob-code-inner js-file-line">                 }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L260" class="blob-num js-line-number" data-line-number="260"></td>
        <td id="file-gistfile1-diff-LC260" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>                // System message</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L261" class="blob-num js-line-number" data-line-number="261"></td>
        <td id="file-gistfile1-diff-LC261" class="blob-code blob-code-inner js-file-line">                 else</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L262" class="blob-num js-line-number" data-line-number="262"></td>
        <td id="file-gistfile1-diff-LC262" class="blob-code blob-code-inner js-file-line">                 {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L263" class="blob-num js-line-number" data-line-number="263"></td>
        <td id="file-gistfile1-diff-LC263" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>                    sWorld-&gt;SendWorldText(LANG_BG_QUEUE_ANNOUNCE_WORLD, bgName, q_min_level, q_max_level,</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L264" class="blob-num js-line-number" data-line-number="264"></td>
        <td id="file-gistfile1-diff-LC264" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>                        qAlliance, (MinPlayers &gt; qAlliance) ? MinPlayers - qAlliance : (uint32)0, qHorde, (MinPlayers &gt; qHorde) ? MinPlayers - qHorde : (uint32)0);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L265" class="blob-num js-line-number" data-line-number="265"></td>
        <td id="file-gistfile1-diff-LC265" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                    char const* bgName = bg-&gt;GetName();</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L266" class="blob-num js-line-number" data-line-number="266"></td>
        <td id="file-gistfile1-diff-LC266" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                    uint32 MinPlayers = bg-&gt;GetMinPlayersPerTeam();</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L267" class="blob-num js-line-number" data-line-number="267"></td>
        <td id="file-gistfile1-diff-LC267" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                    uint32 qHorde = 0;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L268" class="blob-num js-line-number" data-line-number="268"></td>
        <td id="file-gistfile1-diff-LC268" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                    uint32 qAlliance = 0;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L269" class="blob-num js-line-number" data-line-number="269"></td>
        <td id="file-gistfile1-diff-LC269" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                    uint32 q_min_level = bracketEntry-&gt;minLevel;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L270" class="blob-num js-line-number" data-line-number="270"></td>
        <td id="file-gistfile1-diff-LC270" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                    uint32 q_max_level = bracketEntry-&gt;maxLevel;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L271" class="blob-num js-line-number" data-line-number="271"></td>
        <td id="file-gistfile1-diff-LC271" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                    GroupsQueueType::const_iterator itr;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L272" class="blob-num js-line-number" data-line-number="272"></td>
        <td id="file-gistfile1-diff-LC272" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                    for (itr = m_QueuedGroups[bracketId][BG_QUEUE_NORMAL_ALLIANCE].begin(); itr != m_QueuedGroups[bracketId][BG_QUEUE_NORMAL_ALLIANCE].end(); ++itr)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L273" class="blob-num js-line-number" data-line-number="273"></td>
        <td id="file-gistfile1-diff-LC273" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                        if (!(*itr)-&gt;IsInvitedToBGInstanceGUID)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L274" class="blob-num js-line-number" data-line-number="274"></td>
        <td id="file-gistfile1-diff-LC274" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                            qAlliance += (*itr)-&gt;Players.size();</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L275" class="blob-num js-line-number" data-line-number="275"></td>
        <td id="file-gistfile1-diff-LC275" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                    for (itr = m_QueuedGroups[bracketId][BG_QUEUE_NORMAL_HORDE].begin(); itr != m_QueuedGroups[bracketId][BG_QUEUE_NORMAL_HORDE].end(); ++itr)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L276" class="blob-num js-line-number" data-line-number="276"></td>
        <td id="file-gistfile1-diff-LC276" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                        if (!(*itr)-&gt;IsInvitedToBGInstanceGUID)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L277" class="blob-num js-line-number" data-line-number="277"></td>
        <td id="file-gistfile1-diff-LC277" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                            qHorde += (*itr)-&gt;Players.size();</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L278" class="blob-num js-line-number" data-line-number="278"></td>
        <td id="file-gistfile1-diff-LC278" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L279" class="blob-num js-line-number" data-line-number="279"></td>
        <td id="file-gistfile1-diff-LC279" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                    // Show queue status to player only (when joining queue)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L280" class="blob-num js-line-number" data-line-number="280"></td>
        <td id="file-gistfile1-diff-LC280" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                    if (sWorld-&gt;getBoolConfig(CONFIG_BATTLEGROUND_QUEUE_ANNOUNCER_PLAYERONLY))</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L281" class="blob-num js-line-number" data-line-number="281"></td>
        <td id="file-gistfile1-diff-LC281" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                    {</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L282" class="blob-num js-line-number" data-line-number="282"></td>
        <td id="file-gistfile1-diff-LC282" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                        ChatHandler(leader-&gt;GetSession()).PSendSysMessage(LANG_BG_QUEUE_ANNOUNCE_SELF, bgName, q_min_level, q_max_level,</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L283" class="blob-num js-line-number" data-line-number="283"></td>
        <td id="file-gistfile1-diff-LC283" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                            qAlliance, (MinPlayers &gt; qAlliance) ? MinPlayers - qAlliance : (uint32)0, qHorde, (MinPlayers &gt; qHorde) ? MinPlayers - qHorde : (uint32)0);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L284" class="blob-num js-line-number" data-line-number="284"></td>
        <td id="file-gistfile1-diff-LC284" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                    }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L285" class="blob-num js-line-number" data-line-number="285"></td>
        <td id="file-gistfile1-diff-LC285" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                    // System message</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L286" class="blob-num js-line-number" data-line-number="286"></td>
        <td id="file-gistfile1-diff-LC286" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                    else</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L287" class="blob-num js-line-number" data-line-number="287"></td>
        <td id="file-gistfile1-diff-LC287" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                    {</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L288" class="blob-num js-line-number" data-line-number="288"></td>
        <td id="file-gistfile1-diff-LC288" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                        sWorld-&gt;SendWorldText(LANG_BG_QUEUE_ANNOUNCE_WORLD, bgName, q_min_level, q_max_level,</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L289" class="blob-num js-line-number" data-line-number="289"></td>
        <td id="file-gistfile1-diff-LC289" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                            qAlliance, (MinPlayers &gt; qAlliance) ? MinPlayers - qAlliance : (uint32)0, qHorde, (MinPlayers &gt; qHorde) ? MinPlayers - qHorde : (uint32)0);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L290" class="blob-num js-line-number" data-line-number="290"></td>
        <td id="file-gistfile1-diff-LC290" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                    }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L291" class="blob-num js-line-number" data-line-number="291"></td>
        <td id="file-gistfile1-diff-LC291" class="blob-code blob-code-inner js-file-line">                 }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L292" class="blob-num js-line-number" data-line-number="292"></td>
        <td id="file-gistfile1-diff-LC292" class="blob-code blob-code-inner js-file-line">             }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L293" class="blob-num js-line-number" data-line-number="293"></td>
        <td id="file-gistfile1-diff-LC293" class="blob-code blob-code-inner js-file-line">         }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L294" class="blob-num js-line-number" data-line-number="294"></td>
        <td id="file-gistfile1-diff-LC294" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -310,7 +339,7 @@</span> void BattlegroundQueue::RemovePlayer(uint64 guid, bool decreaseInvitedCount)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L295" class="blob-num js-line-number" data-line-number="295"></td>
        <td id="file-gistfile1-diff-LC295" class="blob-code blob-code-inner js-file-line">     {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L296" class="blob-num js-line-number" data-line-number="296"></td>
        <td id="file-gistfile1-diff-LC296" class="blob-code blob-code-inner js-file-line">         //we must check premade and normal team&#39;s queue - because when players from premade are joining bg,</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L297" class="blob-num js-line-number" data-line-number="297"></td>
        <td id="file-gistfile1-diff-LC297" class="blob-code blob-code-inner js-file-line">         //they leave groupinfo so we can&#39;t use its players size to find out index</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L298" class="blob-num js-line-number" data-line-number="298"></td>
        <td id="file-gistfile1-diff-LC298" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>        for (uint32 j = index; j &lt; BG_QUEUE_GROUP_TYPES_COUNT; j += BG_TEAMS_COUNT)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L299" class="blob-num js-line-number" data-line-number="299"></td>
        <td id="file-gistfile1-diff-LC299" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        for (uint8 j = 0; j &lt; BG_QUEUE_GROUP_TYPES_COUNT; ++j)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L300" class="blob-num js-line-number" data-line-number="300"></td>
        <td id="file-gistfile1-diff-LC300" class="blob-code blob-code-inner js-file-line">         {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L301" class="blob-num js-line-number" data-line-number="301"></td>
        <td id="file-gistfile1-diff-LC301" class="blob-code blob-code-inner js-file-line">             GroupsQueueType::iterator k = m_QueuedGroups[bracket_id_tmp][j].begin();</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L302" class="blob-num js-line-number" data-line-number="302"></td>
        <td id="file-gistfile1-diff-LC302" class="blob-code blob-code-inner js-file-line">             for (; k != m_QueuedGroups[bracket_id_tmp][j].end(); ++k)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L303" class="blob-num js-line-number" data-line-number="303"></td>
        <td id="file-gistfile1-diff-LC303" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -499,6 +528,10 @@</span> void BattlegroundQueue::FillPlayersToBG(Battleground* bg, BattlegroundBracketId</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L304" class="blob-num js-line-number" data-line-number="304"></td>
        <td id="file-gistfile1-diff-LC304" class="blob-code blob-code-inner js-file-line">     int32 hordeFree = bg-&gt;GetFreeSlotsForTeam(HORDE);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L305" class="blob-num js-line-number" data-line-number="305"></td>
        <td id="file-gistfile1-diff-LC305" class="blob-code blob-code-inner js-file-line">     int32 aliFree   = bg-&gt;GetFreeSlotsForTeam(ALLIANCE);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L306" class="blob-num js-line-number" data-line-number="306"></td>
        <td id="file-gistfile1-diff-LC306" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L307" class="blob-num js-line-number" data-line-number="307"></td>
        <td id="file-gistfile1-diff-LC307" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    if (!bg-&gt;isArena())</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L308" class="blob-num js-line-number" data-line-number="308"></td>
        <td id="file-gistfile1-diff-LC308" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        if (FillXPlayersToBG(bracket_id, bg, false))</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L309" class="blob-num js-line-number" data-line-number="309"></td>
        <td id="file-gistfile1-diff-LC309" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            return;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L310" class="blob-num js-line-number" data-line-number="310"></td>
        <td id="file-gistfile1-diff-LC310" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L311" class="blob-num js-line-number" data-line-number="311"></td>
        <td id="file-gistfile1-diff-LC311" class="blob-code blob-code-inner js-file-line">     //iterator for iterating through bg queue</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L312" class="blob-num js-line-number" data-line-number="312"></td>
        <td id="file-gistfile1-diff-LC312" class="blob-code blob-code-inner js-file-line">     GroupsQueueType::const_iterator Ali_itr = m_QueuedGroups[bracket_id][BG_QUEUE_NORMAL_ALLIANCE].begin();</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L313" class="blob-num js-line-number" data-line-number="313"></td>
        <td id="file-gistfile1-diff-LC313" class="blob-code blob-code-inner js-file-line">     //count of groups in queue - used to stop cycles</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L314" class="blob-num js-line-number" data-line-number="314"></td>
        <td id="file-gistfile1-diff-LC314" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -747,7 +780,8 @@</span> void BattlegroundQueue::BattlegroundQueueUpdate(uint32 /*diff*/, BattlegroundTyp</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L315" class="blob-num js-line-number" data-line-number="315"></td>
        <td id="file-gistfile1-diff-LC315" class="blob-code blob-code-inner js-file-line">     if (m_QueuedGroups[bracket_id][BG_QUEUE_PREMADE_ALLIANCE].empty() &amp;&amp;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L316" class="blob-num js-line-number" data-line-number="316"></td>
        <td id="file-gistfile1-diff-LC316" class="blob-code blob-code-inner js-file-line">         m_QueuedGroups[bracket_id][BG_QUEUE_PREMADE_HORDE].empty() &amp;&amp;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L317" class="blob-num js-line-number" data-line-number="317"></td>
        <td id="file-gistfile1-diff-LC317" class="blob-code blob-code-inner js-file-line">         m_QueuedGroups[bracket_id][BG_QUEUE_NORMAL_ALLIANCE].empty() &amp;&amp;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L318" class="blob-num js-line-number" data-line-number="318"></td>
        <td id="file-gistfile1-diff-LC318" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>        m_QueuedGroups[bracket_id][BG_QUEUE_NORMAL_HORDE].empty())</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L319" class="blob-num js-line-number" data-line-number="319"></td>
        <td id="file-gistfile1-diff-LC319" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        m_QueuedGroups[bracket_id][BG_QUEUE_NORMAL_HORDE].empty() &amp;&amp;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L320" class="blob-num js-line-number" data-line-number="320"></td>
        <td id="file-gistfile1-diff-LC320" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        m_QueuedGroups[bracket_id][BG_QUEUE_MIXED].empty())</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L321" class="blob-num js-line-number" data-line-number="321"></td>
        <td id="file-gistfile1-diff-LC321" class="blob-code blob-code-inner js-file-line">         return;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L322" class="blob-num js-line-number" data-line-number="322"></td>
        <td id="file-gistfile1-diff-LC322" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L323" class="blob-num js-line-number" data-line-number="323"></td>
        <td id="file-gistfile1-diff-LC323" class="blob-code blob-code-inner js-file-line">     // battleground with free slot for player should be always in the beggining of the queue</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L324" class="blob-num js-line-number" data-line-number="324"></td>
        <td id="file-gistfile1-diff-LC324" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -838,7 +872,8 @@</span> void BattlegroundQueue::BattlegroundQueueUpdate(uint32 /*diff*/, BattlegroundTyp</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L325" class="blob-num js-line-number" data-line-number="325"></td>
        <td id="file-gistfile1-diff-LC325" class="blob-code blob-code-inner js-file-line">     {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L326" class="blob-num js-line-number" data-line-number="326"></td>
        <td id="file-gistfile1-diff-LC326" class="blob-code blob-code-inner js-file-line">         // if there are enough players in pools, start new battleground or non rated arena</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L327" class="blob-num js-line-number" data-line-number="327"></td>
        <td id="file-gistfile1-diff-LC327" class="blob-code blob-code-inner js-file-line">         if (CheckNormalMatch(bg_template, bracket_id, MinPlayersPerTeam, MaxPlayersPerTeam)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L328" class="blob-num js-line-number" data-line-number="328"></td>
        <td id="file-gistfile1-diff-LC328" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>            || (bg_template-&gt;isArena() &amp;&amp; CheckSkirmishForSameFaction(bracket_id, MinPlayersPerTeam)))</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L329" class="blob-num js-line-number" data-line-number="329"></td>
        <td id="file-gistfile1-diff-LC329" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            || (bg_template-&gt;isArena() &amp;&amp; CheckSkirmishForSameFaction(bracket_id, MinPlayersPerTeam))</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L330" class="blob-num js-line-number" data-line-number="330"></td>
        <td id="file-gistfile1-diff-LC330" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            || CheckCrossFactionMatch(bracket_id, bg_template))</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L331" class="blob-num js-line-number" data-line-number="331"></td>
        <td id="file-gistfile1-diff-LC331" class="blob-code blob-code-inner js-file-line">         {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L332" class="blob-num js-line-number" data-line-number="332"></td>
        <td id="file-gistfile1-diff-LC332" class="blob-code blob-code-inner js-file-line">             // we successfully created a pool</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L333" class="blob-num js-line-number" data-line-number="333"></td>
        <td id="file-gistfile1-diff-LC333" class="blob-code blob-code-inner js-file-line">             Battleground* bg2 = sBattlegroundMgr-&gt;CreateNewBattleground(bgTypeId, bracketEntry, arenaType, false);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L334" class="blob-num js-line-number" data-line-number="334"></td>
        <td id="file-gistfile1-diff-LC334" class="blob-code blob-code-inner js-file-line"><span class="pl-c1">diff --git a/src/server/game/Battlegrounds/BattlegroundQueue.h b/src/server/game/Battlegrounds/BattlegroundQueue.h</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L335" class="blob-num js-line-number" data-line-number="335"></td>
        <td id="file-gistfile1-diff-LC335" class="blob-code blob-code-inner js-file-line">index af283cb..da808ef 100644</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L336" class="blob-num js-line-number" data-line-number="336"></td>
        <td id="file-gistfile1-diff-LC336" class="blob-code blob-code-inner js-file-line"><span class="pl-md">--- a/src/server/game/Battlegrounds/BattlegroundQueue.h</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L337" class="blob-num js-line-number" data-line-number="337"></td>
        <td id="file-gistfile1-diff-LC337" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1">+++ b/src/server/game/Battlegrounds/BattlegroundQueue.h</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L338" class="blob-num js-line-number" data-line-number="338"></td>
        <td id="file-gistfile1-diff-LC338" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -42,6 +42,7 @@</span> struct GroupQueueInfo                                       // stores informatio</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L339" class="blob-num js-line-number" data-line-number="339"></td>
        <td id="file-gistfile1-diff-LC339" class="blob-code blob-code-inner js-file-line"> {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L340" class="blob-num js-line-number" data-line-number="340"></td>
        <td id="file-gistfile1-diff-LC340" class="blob-code blob-code-inner js-file-line">     std::map&lt;uint64, PlayerQueueInfo*&gt; Players;             // player queue info map</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L341" class="blob-num js-line-number" data-line-number="341"></td>
        <td id="file-gistfile1-diff-LC341" class="blob-code blob-code-inner js-file-line">     uint32  Team;                                           // Player team (ALLIANCE/HORDE)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L342" class="blob-num js-line-number" data-line-number="342"></td>
        <td id="file-gistfile1-diff-LC342" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    uint32  OTeam;                                          // Player team (ALLIANCE/HORDE)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L343" class="blob-num js-line-number" data-line-number="343"></td>
        <td id="file-gistfile1-diff-LC343" class="blob-code blob-code-inner js-file-line">     BattlegroundTypeId BgTypeId;                            // battleground type id</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L344" class="blob-num js-line-number" data-line-number="344"></td>
        <td id="file-gistfile1-diff-LC344" class="blob-code blob-code-inner js-file-line">     bool    IsRated;                                        // rated</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L345" class="blob-num js-line-number" data-line-number="345"></td>
        <td id="file-gistfile1-diff-LC345" class="blob-code blob-code-inner js-file-line">     uint8   ArenaType;                                      // 2v2, 3v3, 5v5 or 0 when BG</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L346" class="blob-num js-line-number" data-line-number="346"></td>
        <td id="file-gistfile1-diff-LC346" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -60,9 +61,10 @@</span> enum BattlegroundQueueGroupTypes</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L347" class="blob-num js-line-number" data-line-number="347"></td>
        <td id="file-gistfile1-diff-LC347" class="blob-code blob-code-inner js-file-line">     BG_QUEUE_PREMADE_ALLIANCE   = 0,</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L348" class="blob-num js-line-number" data-line-number="348"></td>
        <td id="file-gistfile1-diff-LC348" class="blob-code blob-code-inner js-file-line">     BG_QUEUE_PREMADE_HORDE      = 1,</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L349" class="blob-num js-line-number" data-line-number="349"></td>
        <td id="file-gistfile1-diff-LC349" class="blob-code blob-code-inner js-file-line">     BG_QUEUE_NORMAL_ALLIANCE    = 2,</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L350" class="blob-num js-line-number" data-line-number="350"></td>
        <td id="file-gistfile1-diff-LC350" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>    BG_QUEUE_NORMAL_HORDE       = 3</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L351" class="blob-num js-line-number" data-line-number="351"></td>
        <td id="file-gistfile1-diff-LC351" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    BG_QUEUE_NORMAL_HORDE       = 3,</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L352" class="blob-num js-line-number" data-line-number="352"></td>
        <td id="file-gistfile1-diff-LC352" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    BG_QUEUE_MIXED              = 4</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L353" class="blob-num js-line-number" data-line-number="353"></td>
        <td id="file-gistfile1-diff-LC353" class="blob-code blob-code-inner js-file-line"> };</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L354" class="blob-num js-line-number" data-line-number="354"></td>
        <td id="file-gistfile1-diff-LC354" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>#define BG_QUEUE_GROUP_TYPES_COUNT 4</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L355" class="blob-num js-line-number" data-line-number="355"></td>
        <td id="file-gistfile1-diff-LC355" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>#define BG_QUEUE_GROUP_TYPES_COUNT 5</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L356" class="blob-num js-line-number" data-line-number="356"></td>
        <td id="file-gistfile1-diff-LC356" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L357" class="blob-num js-line-number" data-line-number="357"></td>
        <td id="file-gistfile1-diff-LC357" class="blob-code blob-code-inner js-file-line"> class Battleground;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L358" class="blob-num js-line-number" data-line-number="358"></td>
        <td id="file-gistfile1-diff-LC358" class="blob-code blob-code-inner js-file-line"> class BattlegroundQueue</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L359" class="blob-num js-line-number" data-line-number="359"></td>
        <td id="file-gistfile1-diff-LC359" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -74,6 +76,11 @@</span> class BattlegroundQueue</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L360" class="blob-num js-line-number" data-line-number="360"></td>
        <td id="file-gistfile1-diff-LC360" class="blob-code blob-code-inner js-file-line">         void BattlegroundQueueUpdate(uint32 diff, BattlegroundTypeId bgTypeId, BattlegroundBracketId bracket_id, uint8 arenaType = 0, bool isRated = false, uint32 minRating = 0);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L361" class="blob-num js-line-number" data-line-number="361"></td>
        <td id="file-gistfile1-diff-LC361" class="blob-code blob-code-inner js-file-line">         void UpdateEvents(uint32 diff);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L362" class="blob-num js-line-number" data-line-number="362"></td>
        <td id="file-gistfile1-diff-LC362" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L363" class="blob-num js-line-number" data-line-number="363"></td>
        <td id="file-gistfile1-diff-LC363" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        bool FillXPlayersToBG(BattlegroundBracketId bracket_id, Battleground* bg, bool start = false);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L364" class="blob-num js-line-number" data-line-number="364"></td>
        <td id="file-gistfile1-diff-LC364" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        typedef std::multimap&lt;int32, GroupQueueInfo*&gt; QueuedGroupMap;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L365" class="blob-num js-line-number" data-line-number="365"></td>
        <td id="file-gistfile1-diff-LC365" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        int32 PreAddPlayers(QueuedGroupMap m_PreGroupMap, int32 MaxAdd, uint32 MaxInTeam);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L366" class="blob-num js-line-number" data-line-number="366"></td>
        <td id="file-gistfile1-diff-LC366" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        bool CheckCrossFactionMatch(BattlegroundBracketId bracket_id, Battleground* bg);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L367" class="blob-num js-line-number" data-line-number="367"></td>
        <td id="file-gistfile1-diff-LC367" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L368" class="blob-num js-line-number" data-line-number="368"></td>
        <td id="file-gistfile1-diff-LC368" class="blob-code blob-code-inner js-file-line">         void FillPlayersToBG(Battleground* bg, BattlegroundBracketId bracket_id);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L369" class="blob-num js-line-number" data-line-number="369"></td>
        <td id="file-gistfile1-diff-LC369" class="blob-code blob-code-inner js-file-line">         bool CheckPremadeMatch(BattlegroundBracketId bracket_id, uint32 MinPlayersPerTeam, uint32 MaxPlayersPerTeam);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L370" class="blob-num js-line-number" data-line-number="370"></td>
        <td id="file-gistfile1-diff-LC370" class="blob-code blob-code-inner js-file-line">         bool CheckNormalMatch(Battleground* bg_template, BattlegroundBracketId bracket_id, uint32 minPlayers, uint32 maxPlayers);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L371" class="blob-num js-line-number" data-line-number="371"></td>
        <td id="file-gistfile1-diff-LC371" class="blob-code blob-code-inner js-file-line"><span class="pl-c1">diff --git a/src/server/game/Battlegrounds/Zones/BattlegroundAB.cpp b/src/server/game/Battlegrounds/Zones/BattlegroundAB.cpp</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L372" class="blob-num js-line-number" data-line-number="372"></td>
        <td id="file-gistfile1-diff-LC372" class="blob-code blob-code-inner js-file-line">index 2622ab9..4438c56 100644</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L373" class="blob-num js-line-number" data-line-number="373"></td>
        <td id="file-gistfile1-diff-LC373" class="blob-code blob-code-inner js-file-line"><span class="pl-md">--- a/src/server/game/Battlegrounds/Zones/BattlegroundAB.cpp</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L374" class="blob-num js-line-number" data-line-number="374"></td>
        <td id="file-gistfile1-diff-LC374" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1">+++ b/src/server/game/Battlegrounds/Zones/BattlegroundAB.cpp</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L375" class="blob-num js-line-number" data-line-number="375"></td>
        <td id="file-gistfile1-diff-LC375" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -141,7 +141,7 @@</span> void BattlegroundAB::PostUpdateImpl(uint32 diff)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L376" class="blob-num js-line-number" data-line-number="376"></td>
        <td id="file-gistfile1-diff-LC376" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L377" class="blob-num js-line-number" data-line-number="377"></td>
        <td id="file-gistfile1-diff-LC377" class="blob-code blob-code-inner js-file-line">                 if (m_ReputationScoreTics[team] &gt;= m_ReputationTics)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L378" class="blob-num js-line-number" data-line-number="378"></td>
        <td id="file-gistfile1-diff-LC378" class="blob-code blob-code-inner js-file-line">                 {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L379" class="blob-num js-line-number" data-line-number="379"></td>
        <td id="file-gistfile1-diff-LC379" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>                    (team == TEAM_ALLIANCE) ? RewardReputationToTeam(509, 10, ALLIANCE) : RewardReputationToTeam(510, 10, HORDE);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L380" class="blob-num js-line-number" data-line-number="380"></td>
        <td id="file-gistfile1-diff-LC380" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                    RewardReputationToTeam(509, 510, 10, team == ALLIANCE ? ALLIANCE : HORDE);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L381" class="blob-num js-line-number" data-line-number="381"></td>
        <td id="file-gistfile1-diff-LC381" class="blob-code blob-code-inner js-file-line">                     m_ReputationScoreTics[team] -= m_ReputationTics;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L382" class="blob-num js-line-number" data-line-number="382"></td>
        <td id="file-gistfile1-diff-LC382" class="blob-code blob-code-inner js-file-line">                 }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L383" class="blob-num js-line-number" data-line-number="383"></td>
        <td id="file-gistfile1-diff-LC383" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L384" class="blob-num js-line-number" data-line-number="384"></td>
        <td id="file-gistfile1-diff-LC384" class="blob-code blob-code-inner js-file-line"><span class="pl-c1">diff --git a/src/server/game/Battlegrounds/Zones/BattlegroundAV.cpp b/src/server/game/Battlegrounds/Zones/BattlegroundAV.cpp</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L385" class="blob-num js-line-number" data-line-number="385"></td>
        <td id="file-gistfile1-diff-LC385" class="blob-code blob-code-inner js-file-line">index eafb02f..9c374a4 100644</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L386" class="blob-num js-line-number" data-line-number="386"></td>
        <td id="file-gistfile1-diff-LC386" class="blob-code blob-code-inner js-file-line"><span class="pl-md">--- a/src/server/game/Battlegrounds/Zones/BattlegroundAV.cpp</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L387" class="blob-num js-line-number" data-line-number="387"></td>
        <td id="file-gistfile1-diff-LC387" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1">+++ b/src/server/game/Battlegrounds/Zones/BattlegroundAV.cpp</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L388" class="blob-num js-line-number" data-line-number="388"></td>
        <td id="file-gistfile1-diff-LC388" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -88,7 +88,7 @@</span> void BattlegroundAV::HandleKillUnit(Creature* unit, Player* killer)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L389" class="blob-num js-line-number" data-line-number="389"></td>
        <td id="file-gistfile1-diff-LC389" class="blob-code blob-code-inner js-file-line">     if (entry == BG_AV_CreatureInfo[AV_NPC_A_BOSS][0])</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L390" class="blob-num js-line-number" data-line-number="390"></td>
        <td id="file-gistfile1-diff-LC390" class="blob-code blob-code-inner js-file-line">     {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L391" class="blob-num js-line-number" data-line-number="391"></td>
        <td id="file-gistfile1-diff-LC391" class="blob-code blob-code-inner js-file-line">         CastSpellOnTeam(23658, HORDE); //this is a spell which finishes a quest where a player has to kill the boss</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L392" class="blob-num js-line-number" data-line-number="392"></td>
        <td id="file-gistfile1-diff-LC392" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>        RewardReputationToTeam(729, BG_AV_REP_BOSS, HORDE);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L393" class="blob-num js-line-number" data-line-number="393"></td>
        <td id="file-gistfile1-diff-LC393" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        RewardReputationToTeam(729, 730, BG_AV_REP_BOSS, killer-&gt;GetTeam() == ALLIANCE ? ALLIANCE : HORDE);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L394" class="blob-num js-line-number" data-line-number="394"></td>
        <td id="file-gistfile1-diff-LC394" class="blob-code blob-code-inner js-file-line">         RewardHonorToTeam(GetBonusHonorFromKill(BG_AV_KILL_BOSS), HORDE);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L395" class="blob-num js-line-number" data-line-number="395"></td>
        <td id="file-gistfile1-diff-LC395" class="blob-code blob-code-inner js-file-line">         EndBattleground(HORDE);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L396" class="blob-num js-line-number" data-line-number="396"></td>
        <td id="file-gistfile1-diff-LC396" class="blob-code blob-code-inner js-file-line">         DelCreature(AV_CPLACE_TRIGGER17);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L397" class="blob-num js-line-number" data-line-number="397"></td>
        <td id="file-gistfile1-diff-LC397" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -96,7 +96,7 @@</span> void BattlegroundAV::HandleKillUnit(Creature* unit, Player* killer)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L398" class="blob-num js-line-number" data-line-number="398"></td>
        <td id="file-gistfile1-diff-LC398" class="blob-code blob-code-inner js-file-line">     else if (entry == BG_AV_CreatureInfo[AV_NPC_H_BOSS][0])</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L399" class="blob-num js-line-number" data-line-number="399"></td>
        <td id="file-gistfile1-diff-LC399" class="blob-code blob-code-inner js-file-line">     {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L400" class="blob-num js-line-number" data-line-number="400"></td>
        <td id="file-gistfile1-diff-LC400" class="blob-code blob-code-inner js-file-line">         CastSpellOnTeam(23658, ALLIANCE); //this is a spell which finishes a quest where a player has to kill the boss</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L401" class="blob-num js-line-number" data-line-number="401"></td>
        <td id="file-gistfile1-diff-LC401" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>        RewardReputationToTeam(730, BG_AV_REP_BOSS, ALLIANCE);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L402" class="blob-num js-line-number" data-line-number="402"></td>
        <td id="file-gistfile1-diff-LC402" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        RewardReputationToTeam(729, 730, BG_AV_REP_BOSS, killer-&gt;GetTeam() == ALLIANCE ? ALLIANCE : HORDE);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L403" class="blob-num js-line-number" data-line-number="403"></td>
        <td id="file-gistfile1-diff-LC403" class="blob-code blob-code-inner js-file-line">         RewardHonorToTeam(GetBonusHonorFromKill(BG_AV_KILL_BOSS), ALLIANCE);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L404" class="blob-num js-line-number" data-line-number="404"></td>
        <td id="file-gistfile1-diff-LC404" class="blob-code blob-code-inner js-file-line">         EndBattleground(ALLIANCE);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L405" class="blob-num js-line-number" data-line-number="405"></td>
        <td id="file-gistfile1-diff-LC405" class="blob-code blob-code-inner js-file-line">         DelCreature(AV_CPLACE_TRIGGER19);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L406" class="blob-num js-line-number" data-line-number="406"></td>
        <td id="file-gistfile1-diff-LC406" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -109,7 +109,7 @@</span> void BattlegroundAV::HandleKillUnit(Creature* unit, Player* killer)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L407" class="blob-num js-line-number" data-line-number="407"></td>
        <td id="file-gistfile1-diff-LC407" class="blob-code blob-code-inner js-file-line">             return;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L408" class="blob-num js-line-number" data-line-number="408"></td>
        <td id="file-gistfile1-diff-LC408" class="blob-code blob-code-inner js-file-line">         }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L409" class="blob-num js-line-number" data-line-number="409"></td>
        <td id="file-gistfile1-diff-LC409" class="blob-code blob-code-inner js-file-line">         m_CaptainAlive[0]=false;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L410" class="blob-num js-line-number" data-line-number="410"></td>
        <td id="file-gistfile1-diff-LC410" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>        RewardReputationToTeam(729, BG_AV_REP_CAPTAIN, HORDE);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L411" class="blob-num js-line-number" data-line-number="411"></td>
        <td id="file-gistfile1-diff-LC411" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        RewardReputationToTeam(729, 730, BG_AV_REP_CAPTAIN, killer-&gt;GetTeam() == ALLIANCE ? ALLIANCE : HORDE);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L412" class="blob-num js-line-number" data-line-number="412"></td>
        <td id="file-gistfile1-diff-LC412" class="blob-code blob-code-inner js-file-line">         RewardHonorToTeam(GetBonusHonorFromKill(BG_AV_KILL_CAPTAIN), HORDE);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L413" class="blob-num js-line-number" data-line-number="413"></td>
        <td id="file-gistfile1-diff-LC413" class="blob-code blob-code-inner js-file-line">         UpdateScore(ALLIANCE, (-1)*BG_AV_RES_CAPTAIN);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L414" class="blob-num js-line-number" data-line-number="414"></td>
        <td id="file-gistfile1-diff-LC414" class="blob-code blob-code-inner js-file-line">         //spawn destroyed aura</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L415" class="blob-num js-line-number" data-line-number="415"></td>
        <td id="file-gistfile1-diff-LC415" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -128,7 +128,7 @@</span> void BattlegroundAV::HandleKillUnit(Creature* unit, Player* killer)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L416" class="blob-num js-line-number" data-line-number="416"></td>
        <td id="file-gistfile1-diff-LC416" class="blob-code blob-code-inner js-file-line">             return;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L417" class="blob-num js-line-number" data-line-number="417"></td>
        <td id="file-gistfile1-diff-LC417" class="blob-code blob-code-inner js-file-line">         }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L418" class="blob-num js-line-number" data-line-number="418"></td>
        <td id="file-gistfile1-diff-LC418" class="blob-code blob-code-inner js-file-line">         m_CaptainAlive[1]=false;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L419" class="blob-num js-line-number" data-line-number="419"></td>
        <td id="file-gistfile1-diff-LC419" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>        RewardReputationToTeam(730, BG_AV_REP_CAPTAIN, ALLIANCE);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L420" class="blob-num js-line-number" data-line-number="420"></td>
        <td id="file-gistfile1-diff-LC420" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        RewardReputationToTeam(729, 730, BG_AV_REP_CAPTAIN, killer-&gt;GetTeam() == ALLIANCE ? ALLIANCE : HORDE);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L421" class="blob-num js-line-number" data-line-number="421"></td>
        <td id="file-gistfile1-diff-LC421" class="blob-code blob-code-inner js-file-line">         RewardHonorToTeam(GetBonusHonorFromKill(BG_AV_KILL_CAPTAIN), ALLIANCE);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L422" class="blob-num js-line-number" data-line-number="422"></td>
        <td id="file-gistfile1-diff-LC422" class="blob-code blob-code-inner js-file-line">         UpdateScore(HORDE, (-1)*BG_AV_RES_CAPTAIN);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L423" class="blob-num js-line-number" data-line-number="423"></td>
        <td id="file-gistfile1-diff-LC423" class="blob-code blob-code-inner js-file-line">         //spawn destroyed aura</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L424" class="blob-num js-line-number" data-line-number="424"></td>
        <td id="file-gistfile1-diff-LC424" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -150,6 +150,7 @@</span> void BattlegroundAV::HandleQuestComplete(uint32 questid, Player* player)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L425" class="blob-num js-line-number" data-line-number="425"></td>
        <td id="file-gistfile1-diff-LC425" class="blob-code blob-code-inner js-file-line">     if (GetStatus() != STATUS_IN_PROGRESS)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L426" class="blob-num js-line-number" data-line-number="426"></td>
        <td id="file-gistfile1-diff-LC426" class="blob-code blob-code-inner js-file-line">         return;//maybe we should log this, cause this must be a cheater or a big bug</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L427" class="blob-num js-line-number" data-line-number="427"></td>
        <td id="file-gistfile1-diff-LC427" class="blob-code blob-code-inner js-file-line">     uint8 team = GetTeamIndexByTeamId(player-&gt;GetTeam());</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L428" class="blob-num js-line-number" data-line-number="428"></td>
        <td id="file-gistfile1-diff-LC428" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    uint8 oteam = GetTeamIndexByTeamId(GetOtherTeam(player-&gt;GetTeam()));</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L429" class="blob-num js-line-number" data-line-number="429"></td>
        <td id="file-gistfile1-diff-LC429" class="blob-code blob-code-inner js-file-line">     /// @todo add reputation, events (including quest not available anymore, next quest availabe, go/npc de/spawning)and maybe honor</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L430" class="blob-num js-line-number" data-line-number="430"></td>
        <td id="file-gistfile1-diff-LC430" class="blob-code blob-code-inner js-file-line">     TC_LOG_DEBUG(&quot;bg.battleground&quot;, &quot;BG_AV Quest %i completed&quot;, questid);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L431" class="blob-num js-line-number" data-line-number="431"></td>
        <td id="file-gistfile1-diff-LC431" class="blob-code blob-code-inner js-file-line">     switch (questid)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L432" class="blob-num js-line-number" data-line-number="432"></td>
        <td id="file-gistfile1-diff-LC432" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -174,21 +175,21 @@</span> void BattlegroundAV::HandleQuestComplete(uint32 questid, Player* player)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L433" class="blob-num js-line-number" data-line-number="433"></td>
        <td id="file-gistfile1-diff-LC433" class="blob-code blob-code-inner js-file-line">         case AV_QUEST_A_COMMANDER1:</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L434" class="blob-num js-line-number" data-line-number="434"></td>
        <td id="file-gistfile1-diff-LC434" class="blob-code blob-code-inner js-file-line">         case AV_QUEST_H_COMMANDER1:</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L435" class="blob-num js-line-number" data-line-number="435"></td>
        <td id="file-gistfile1-diff-LC435" class="blob-code blob-code-inner js-file-line">             m_Team_QuestStatus[team][1]++;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L436" class="blob-num js-line-number" data-line-number="436"></td>
        <td id="file-gistfile1-diff-LC436" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>            RewardReputationToTeam(team, 1, player-&gt;GetTeam());</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L437" class="blob-num js-line-number" data-line-number="437"></td>
        <td id="file-gistfile1-diff-LC437" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            RewardReputationToTeam(team, oteam, 1, player-&gt;GetTeam());</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L438" class="blob-num js-line-number" data-line-number="438"></td>
        <td id="file-gistfile1-diff-LC438" class="blob-code blob-code-inner js-file-line">             if (m_Team_QuestStatus[team][1] == 30)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L439" class="blob-num js-line-number" data-line-number="439"></td>
        <td id="file-gistfile1-diff-LC439" class="blob-code blob-code-inner js-file-line">                 TC_LOG_DEBUG(&quot;bg.battleground&quot;, &quot;BG_AV Quest %i completed (need to implement some events here&quot;, questid);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L440" class="blob-num js-line-number" data-line-number="440"></td>
        <td id="file-gistfile1-diff-LC440" class="blob-code blob-code-inner js-file-line">             break;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L441" class="blob-num js-line-number" data-line-number="441"></td>
        <td id="file-gistfile1-diff-LC441" class="blob-code blob-code-inner js-file-line">         case AV_QUEST_A_COMMANDER2:</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L442" class="blob-num js-line-number" data-line-number="442"></td>
        <td id="file-gistfile1-diff-LC442" class="blob-code blob-code-inner js-file-line">         case AV_QUEST_H_COMMANDER2:</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L443" class="blob-num js-line-number" data-line-number="443"></td>
        <td id="file-gistfile1-diff-LC443" class="blob-code blob-code-inner js-file-line">             m_Team_QuestStatus[team][2]++;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L444" class="blob-num js-line-number" data-line-number="444"></td>
        <td id="file-gistfile1-diff-LC444" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>            RewardReputationToTeam(team, 1, player-&gt;GetTeam());</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L445" class="blob-num js-line-number" data-line-number="445"></td>
        <td id="file-gistfile1-diff-LC445" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            RewardReputationToTeam(team, oteam, 1, player-&gt;GetTeam());</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L446" class="blob-num js-line-number" data-line-number="446"></td>
        <td id="file-gistfile1-diff-LC446" class="blob-code blob-code-inner js-file-line">             if (m_Team_QuestStatus[team][2] == 60)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L447" class="blob-num js-line-number" data-line-number="447"></td>
        <td id="file-gistfile1-diff-LC447" class="blob-code blob-code-inner js-file-line">                 TC_LOG_DEBUG(&quot;bg.battleground&quot;, &quot;BG_AV Quest %i completed (need to implement some events here&quot;, questid);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L448" class="blob-num js-line-number" data-line-number="448"></td>
        <td id="file-gistfile1-diff-LC448" class="blob-code blob-code-inner js-file-line">             break;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L449" class="blob-num js-line-number" data-line-number="449"></td>
        <td id="file-gistfile1-diff-LC449" class="blob-code blob-code-inner js-file-line">         case AV_QUEST_A_COMMANDER3:</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L450" class="blob-num js-line-number" data-line-number="450"></td>
        <td id="file-gistfile1-diff-LC450" class="blob-code blob-code-inner js-file-line">         case AV_QUEST_H_COMMANDER3:</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L451" class="blob-num js-line-number" data-line-number="451"></td>
        <td id="file-gistfile1-diff-LC451" class="blob-code blob-code-inner js-file-line">             m_Team_QuestStatus[team][3]++;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L452" class="blob-num js-line-number" data-line-number="452"></td>
        <td id="file-gistfile1-diff-LC452" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>            RewardReputationToTeam(team, 1, player-&gt;GetTeam());</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L453" class="blob-num js-line-number" data-line-number="453"></td>
        <td id="file-gistfile1-diff-LC453" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            RewardReputationToTeam(team, oteam, 1, player-&gt;GetTeam());</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L454" class="blob-num js-line-number" data-line-number="454"></td>
        <td id="file-gistfile1-diff-LC454" class="blob-code blob-code-inner js-file-line">             if (m_Team_QuestStatus[team][3] == 120)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L455" class="blob-num js-line-number" data-line-number="455"></td>
        <td id="file-gistfile1-diff-LC455" class="blob-code blob-code-inner js-file-line">                 TC_LOG_DEBUG(&quot;bg.battleground&quot;, &quot;BG_AV Quest %i completed (need to implement some events here&quot;, questid);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L456" class="blob-num js-line-number" data-line-number="456"></td>
        <td id="file-gistfile1-diff-LC456" class="blob-code blob-code-inner js-file-line">             break;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L457" class="blob-num js-line-number" data-line-number="457"></td>
        <td id="file-gistfile1-diff-LC457" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -472,7 +473,7 @@</span> void BattlegroundAV::EndBattleground(uint32 winner)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L458" class="blob-num js-line-number" data-line-number="458"></td>
        <td id="file-gistfile1-diff-LC458" class="blob-code blob-code-inner js-file-line">             rep[i]   += BG_AV_REP_SURVIVING_CAPTAIN;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L459" class="blob-num js-line-number" data-line-number="459"></td>
        <td id="file-gistfile1-diff-LC459" class="blob-code blob-code-inner js-file-line">         }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L460" class="blob-num js-line-number" data-line-number="460"></td>
        <td id="file-gistfile1-diff-LC460" class="blob-code blob-code-inner js-file-line">         if (rep[i] != 0)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L461" class="blob-num js-line-number" data-line-number="461"></td>
        <td id="file-gistfile1-diff-LC461" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>            RewardReputationToTeam(i == 0 ? 730 : 729, rep[i], i == 0 ? ALLIANCE : HORDE);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L462" class="blob-num js-line-number" data-line-number="462"></td>
        <td id="file-gistfile1-diff-LC462" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            RewardReputationToTeam(729, 730, 10, i == ALLIANCE ? ALLIANCE : HORDE);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L463" class="blob-num js-line-number" data-line-number="463"></td>
        <td id="file-gistfile1-diff-LC463" class="blob-code blob-code-inner js-file-line">         if (kills[i] != 0)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L464" class="blob-num js-line-number" data-line-number="464"></td>
        <td id="file-gistfile1-diff-LC464" class="blob-code blob-code-inner js-file-line">             RewardHonorToTeam(GetBonusHonorFromKill(kills[i]), i == 0 ? ALLIANCE : HORDE);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L465" class="blob-num js-line-number" data-line-number="465"></td>
        <td id="file-gistfile1-diff-LC465" class="blob-code blob-code-inner js-file-line">     }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L466" class="blob-num js-line-number" data-line-number="466"></td>
        <td id="file-gistfile1-diff-LC466" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -577,7 +578,7 @@</span> void BattlegroundAV::EventPlayerDestroyedPoint(BG_AV_Nodes node)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L467" class="blob-num js-line-number" data-line-number="467"></td>
        <td id="file-gistfile1-diff-LC467" class="blob-code blob-code-inner js-file-line">             SpawnBGObject(BG_AV_OBJECT_BURN_DUNBALDAR_SOUTH + i + (tmp * 10), RESPAWN_IMMEDIATELY);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L468" class="blob-num js-line-number" data-line-number="468"></td>
        <td id="file-gistfile1-diff-LC468" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L469" class="blob-num js-line-number" data-line-number="469"></td>
        <td id="file-gistfile1-diff-LC469" class="blob-code blob-code-inner js-file-line">         UpdateScore((owner == ALLIANCE) ? HORDE : ALLIANCE, -1 * BG_AV_RES_TOWER);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L470" class="blob-num js-line-number" data-line-number="470"></td>
        <td id="file-gistfile1-diff-LC470" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>        RewardReputationToTeam(owner == ALLIANCE ? 730 : 729, BG_AV_REP_TOWER, owner);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L471" class="blob-num js-line-number" data-line-number="471"></td>
        <td id="file-gistfile1-diff-LC471" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        RewardReputationToTeam(729, 730, BG_AV_REP_TOWER, owner);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L472" class="blob-num js-line-number" data-line-number="472"></td>
        <td id="file-gistfile1-diff-LC472" class="blob-code blob-code-inner js-file-line">         RewardHonorToTeam(GetBonusHonorFromKill(BG_AV_KILL_TOWER), owner);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L473" class="blob-num js-line-number" data-line-number="473"></td>
        <td id="file-gistfile1-diff-LC473" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L474" class="blob-num js-line-number" data-line-number="474"></td>
        <td id="file-gistfile1-diff-LC474" class="blob-code blob-code-inner js-file-line">         SpawnBGObject(BG_AV_OBJECT_TAURA_A_DUNBALDAR_SOUTH+GetTeamIndexByTeamId(owner)+(2*tmp), RESPAWN_ONE_DAY);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L475" class="blob-num js-line-number" data-line-number="475"></td>
        <td id="file-gistfile1-diff-LC475" class="blob-code blob-code-inner js-file-line"><span class="pl-c1">diff --git a/src/server/game/Battlegrounds/Zones/BattlegroundWS.cpp b/src/server/game/Battlegrounds/Zones/BattlegroundWS.cpp</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L476" class="blob-num js-line-number" data-line-number="476"></td>
        <td id="file-gistfile1-diff-LC476" class="blob-code blob-code-inner js-file-line">index 1faa336..6dfebca 100644</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L477" class="blob-num js-line-number" data-line-number="477"></td>
        <td id="file-gistfile1-diff-LC477" class="blob-code blob-code-inner js-file-line"><span class="pl-md">--- a/src/server/game/Battlegrounds/Zones/BattlegroundWS.cpp</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L478" class="blob-num js-line-number" data-line-number="478"></td>
        <td id="file-gistfile1-diff-LC478" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1">+++ b/src/server/game/Battlegrounds/Zones/BattlegroundWS.cpp</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L479" class="blob-num js-line-number" data-line-number="479"></td>
        <td id="file-gistfile1-diff-LC479" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -309,7 +309,6 @@</span> void BattlegroundWS::EventPlayerCapturedFlag(Player* player)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L480" class="blob-num js-line-number" data-line-number="480"></td>
        <td id="file-gistfile1-diff-LC480" class="blob-code blob-code-inner js-file-line">         if (GetTeamScore(TEAM_ALLIANCE) &lt; BG_WS_MAX_TEAM_SCORE)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L481" class="blob-num js-line-number" data-line-number="481"></td>
        <td id="file-gistfile1-diff-LC481" class="blob-code blob-code-inner js-file-line">             AddPoint(ALLIANCE, 1);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L482" class="blob-num js-line-number" data-line-number="482"></td>
        <td id="file-gistfile1-diff-LC482" class="blob-code blob-code-inner js-file-line">         PlaySoundToAll(BG_WS_SOUND_FLAG_CAPTURED_ALLIANCE);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L483" class="blob-num js-line-number" data-line-number="483"></td>
        <td id="file-gistfile1-diff-LC483" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>        RewardReputationToTeam(890, m_ReputationCapture, ALLIANCE);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L484" class="blob-num js-line-number" data-line-number="484"></td>
        <td id="file-gistfile1-diff-LC484" class="blob-code blob-code-inner js-file-line">     }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L485" class="blob-num js-line-number" data-line-number="485"></td>
        <td id="file-gistfile1-diff-LC485" class="blob-code blob-code-inner js-file-line">     else</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L486" class="blob-num js-line-number" data-line-number="486"></td>
        <td id="file-gistfile1-diff-LC486" class="blob-code blob-code-inner js-file-line">     {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L487" class="blob-num js-line-number" data-line-number="487"></td>
        <td id="file-gistfile1-diff-LC487" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -328,8 +327,8 @@</span> void BattlegroundWS::EventPlayerCapturedFlag(Player* player)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L488" class="blob-num js-line-number" data-line-number="488"></td>
        <td id="file-gistfile1-diff-LC488" class="blob-code blob-code-inner js-file-line">         if (GetTeamScore(TEAM_HORDE) &lt; BG_WS_MAX_TEAM_SCORE)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L489" class="blob-num js-line-number" data-line-number="489"></td>
        <td id="file-gistfile1-diff-LC489" class="blob-code blob-code-inner js-file-line">             AddPoint(HORDE, 1);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L490" class="blob-num js-line-number" data-line-number="490"></td>
        <td id="file-gistfile1-diff-LC490" class="blob-code blob-code-inner js-file-line">         PlaySoundToAll(BG_WS_SOUND_FLAG_CAPTURED_HORDE);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L491" class="blob-num js-line-number" data-line-number="491"></td>
        <td id="file-gistfile1-diff-LC491" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>        RewardReputationToTeam(889, m_ReputationCapture, HORDE);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L492" class="blob-num js-line-number" data-line-number="492"></td>
        <td id="file-gistfile1-diff-LC492" class="blob-code blob-code-inner js-file-line">     }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L493" class="blob-num js-line-number" data-line-number="493"></td>
        <td id="file-gistfile1-diff-LC493" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    RewardReputationToTeam(890, 889, m_ReputationCapture, player-&gt;GetTeam());</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L494" class="blob-num js-line-number" data-line-number="494"></td>
        <td id="file-gistfile1-diff-LC494" class="blob-code blob-code-inner js-file-line">     //for flag capture is reward 2 honorable kills</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L495" class="blob-num js-line-number" data-line-number="495"></td>
        <td id="file-gistfile1-diff-LC495" class="blob-code blob-code-inner js-file-line">     RewardHonorToTeam(GetBonusHonorFromKill(2), player-&gt;GetTeam());</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L496" class="blob-num js-line-number" data-line-number="496"></td>
        <td id="file-gistfile1-diff-LC496" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L497" class="blob-num js-line-number" data-line-number="497"></td>
        <td id="file-gistfile1-diff-LC497" class="blob-code blob-code-inner js-file-line"><span class="pl-c1">diff --git a/src/server/game/CMakeLists.txt b/src/server/game/CMakeLists.txt</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L498" class="blob-num js-line-number" data-line-number="498"></td>
        <td id="file-gistfile1-diff-LC498" class="blob-code blob-code-inner js-file-line">index 26fd081..d0d5a49 100644</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L499" class="blob-num js-line-number" data-line-number="499"></td>
        <td id="file-gistfile1-diff-LC499" class="blob-code blob-code-inner js-file-line"><span class="pl-md">--- a/src/server/game/CMakeLists.txt</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L500" class="blob-num js-line-number" data-line-number="500"></td>
        <td id="file-gistfile1-diff-LC500" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1">+++ b/src/server/game/CMakeLists.txt</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L501" class="blob-num js-line-number" data-line-number="501"></td>
        <td id="file-gistfile1-diff-LC501" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -48,6 +48,7 @@</span> file(GLOB_RECURSE sources_Tickets Tickets/*.cpp Tickets/*.h)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L502" class="blob-num js-line-number" data-line-number="502"></td>
        <td id="file-gistfile1-diff-LC502" class="blob-code blob-code-inner js-file-line"> file(GLOB_RECURSE sources_Warden Warden/*.cpp Warden/*.h)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L503" class="blob-num js-line-number" data-line-number="503"></td>
        <td id="file-gistfile1-diff-LC503" class="blob-code blob-code-inner js-file-line"> file(GLOB_RECURSE sources_Weather Weather/*.cpp Weather/*.h)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L504" class="blob-num js-line-number" data-line-number="504"></td>
        <td id="file-gistfile1-diff-LC504" class="blob-code blob-code-inner js-file-line"> file(GLOB_RECURSE sources_World World/*.cpp World/*.h)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L505" class="blob-num js-line-number" data-line-number="505"></td>
        <td id="file-gistfile1-diff-LC505" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>file(GLOB_RECURSE sources_Cfbg Cfbg/*.cpp Cfbg/*.h)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L506" class="blob-num js-line-number" data-line-number="506"></td>
        <td id="file-gistfile1-diff-LC506" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L507" class="blob-num js-line-number" data-line-number="507"></td>
        <td id="file-gistfile1-diff-LC507" class="blob-code blob-code-inner js-file-line"> # Create game-libary</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L508" class="blob-num js-line-number" data-line-number="508"></td>
        <td id="file-gistfile1-diff-LC508" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L509" class="blob-num js-line-number" data-line-number="509"></td>
        <td id="file-gistfile1-diff-LC509" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -98,6 +99,7 @@</span> set(game_STAT_SRCS</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L510" class="blob-num js-line-number" data-line-number="510"></td>
        <td id="file-gistfile1-diff-LC510" class="blob-code blob-code-inner js-file-line">   ${sources_Warden}</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L511" class="blob-num js-line-number" data-line-number="511"></td>
        <td id="file-gistfile1-diff-LC511" class="blob-code blob-code-inner js-file-line">   ${sources_Weather}</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L512" class="blob-num js-line-number" data-line-number="512"></td>
        <td id="file-gistfile1-diff-LC512" class="blob-code blob-code-inner js-file-line">   ${sources_World}</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L513" class="blob-num js-line-number" data-line-number="513"></td>
        <td id="file-gistfile1-diff-LC513" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>  ${sources_Cfbg}</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L514" class="blob-num js-line-number" data-line-number="514"></td>
        <td id="file-gistfile1-diff-LC514" class="blob-code blob-code-inner js-file-line"> )</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L515" class="blob-num js-line-number" data-line-number="515"></td>
        <td id="file-gistfile1-diff-LC515" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L516" class="blob-num js-line-number" data-line-number="516"></td>
        <td id="file-gistfile1-diff-LC516" class="blob-code blob-code-inner js-file-line"> include_directories(</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L517" class="blob-num js-line-number" data-line-number="517"></td>
        <td id="file-gistfile1-diff-LC517" class="blob-code blob-code-inner js-file-line"><span class="pl-c1">diff --git a/src/server/game/Cfbg/Cfbg.cpp b/src/server/game/Cfbg/Cfbg.cpp</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L518" class="blob-num js-line-number" data-line-number="518"></td>
        <td id="file-gistfile1-diff-LC518" class="blob-code blob-code-inner js-file-line">new file mode 100644</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L519" class="blob-num js-line-number" data-line-number="519"></td>
        <td id="file-gistfile1-diff-LC519" class="blob-code blob-code-inner js-file-line">index 0000000..d0c9d3b</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L520" class="blob-num js-line-number" data-line-number="520"></td>
        <td id="file-gistfile1-diff-LC520" class="blob-code blob-code-inner js-file-line"><span class="pl-md">--- /dev/null</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L521" class="blob-num js-line-number" data-line-number="521"></td>
        <td id="file-gistfile1-diff-LC521" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1">+++ b/src/server/game/Cfbg/Cfbg.cpp</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L522" class="blob-num js-line-number" data-line-number="522"></td>
        <td id="file-gistfile1-diff-LC522" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -0,0 +1,325 @@</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L523" class="blob-num js-line-number" data-line-number="523"></td>
        <td id="file-gistfile1-diff-LC523" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>#include &quot;Cfbg.h&quot;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L524" class="blob-num js-line-number" data-line-number="524"></td>
        <td id="file-gistfile1-diff-LC524" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>#include &quot;Battleground.h&quot;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L525" class="blob-num js-line-number" data-line-number="525"></td>
        <td id="file-gistfile1-diff-LC525" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>#include &quot;BattlegroundMgr.h&quot;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L526" class="blob-num js-line-number" data-line-number="526"></td>
        <td id="file-gistfile1-diff-LC526" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>#include &quot;Player.h&quot;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L527" class="blob-num js-line-number" data-line-number="527"></td>
        <td id="file-gistfile1-diff-LC527" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>#include &quot;Chat.h&quot;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L528" class="blob-num js-line-number" data-line-number="528"></td>
        <td id="file-gistfile1-diff-LC528" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>#include &quot;BattlegroundQueue.h&quot;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L529" class="blob-num js-line-number" data-line-number="529"></td>
        <td id="file-gistfile1-diff-LC529" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L530" class="blob-num js-line-number" data-line-number="530"></td>
        <td id="file-gistfile1-diff-LC530" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>/*####################################################################################</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L531" class="blob-num js-line-number" data-line-number="531"></td>
        <td id="file-gistfile1-diff-LC531" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>###############################CROSSFACTION BATTLEGROUNDS#############################</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L532" class="blob-num js-line-number" data-line-number="532"></td>
        <td id="file-gistfile1-diff-LC532" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>####################################################################################*/</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L533" class="blob-num js-line-number" data-line-number="533"></td>
        <td id="file-gistfile1-diff-LC533" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L534" class="blob-num js-line-number" data-line-number="534"></td>
        <td id="file-gistfile1-diff-LC534" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>uint8 Unit::getRace(bool forceoriginal) const</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L535" class="blob-num js-line-number" data-line-number="535"></td>
        <td id="file-gistfile1-diff-LC535" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>{</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L536" class="blob-num js-line-number" data-line-number="536"></td>
        <td id="file-gistfile1-diff-LC536" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    if (GetTypeId() == TYPEID_PLAYER)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L537" class="blob-num js-line-number" data-line-number="537"></td>
        <td id="file-gistfile1-diff-LC537" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    {</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L538" class="blob-num js-line-number" data-line-number="538"></td>
        <td id="file-gistfile1-diff-LC538" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        Player* pPlayer = ((Player*)this);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L539" class="blob-num js-line-number" data-line-number="539"></td>
        <td id="file-gistfile1-diff-LC539" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L540" class="blob-num js-line-number" data-line-number="540"></td>
        <td id="file-gistfile1-diff-LC540" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        if (forceoriginal)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L541" class="blob-num js-line-number" data-line-number="541"></td>
        <td id="file-gistfile1-diff-LC541" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            return pPlayer-&gt;getORace();</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L542" class="blob-num js-line-number" data-line-number="542"></td>
        <td id="file-gistfile1-diff-LC542" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L543" class="blob-num js-line-number" data-line-number="543"></td>
        <td id="file-gistfile1-diff-LC543" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        if (pPlayer-&gt;InArena())</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L544" class="blob-num js-line-number" data-line-number="544"></td>
        <td id="file-gistfile1-diff-LC544" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            return GetByteValue(UNIT_FIELD_BYTES_0, 0);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L545" class="blob-num js-line-number" data-line-number="545"></td>
        <td id="file-gistfile1-diff-LC545" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L546" class="blob-num js-line-number" data-line-number="546"></td>
        <td id="file-gistfile1-diff-LC546" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        if (!pPlayer-&gt;IsPlayingNative())</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L547" class="blob-num js-line-number" data-line-number="547"></td>
        <td id="file-gistfile1-diff-LC547" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            return pPlayer-&gt;getFRace();</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L548" class="blob-num js-line-number" data-line-number="548"></td>
        <td id="file-gistfile1-diff-LC548" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L549" class="blob-num js-line-number" data-line-number="549"></td>
        <td id="file-gistfile1-diff-LC549" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L550" class="blob-num js-line-number" data-line-number="550"></td>
        <td id="file-gistfile1-diff-LC550" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    return GetByteValue(UNIT_FIELD_BYTES_0, 0);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L551" class="blob-num js-line-number" data-line-number="551"></td>
        <td id="file-gistfile1-diff-LC551" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>}</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L552" class="blob-num js-line-number" data-line-number="552"></td>
        <td id="file-gistfile1-diff-LC552" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L553" class="blob-num js-line-number" data-line-number="553"></td>
        <td id="file-gistfile1-diff-LC553" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>bool Player::SendRealNameQuery()</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L554" class="blob-num js-line-number" data-line-number="554"></td>
        <td id="file-gistfile1-diff-LC554" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>{</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L555" class="blob-num js-line-number" data-line-number="555"></td>
        <td id="file-gistfile1-diff-LC555" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    if (IsPlayingNative())</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L556" class="blob-num js-line-number" data-line-number="556"></td>
        <td id="file-gistfile1-diff-LC556" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        return false;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L557" class="blob-num js-line-number" data-line-number="557"></td>
        <td id="file-gistfile1-diff-LC557" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L558" class="blob-num js-line-number" data-line-number="558"></td>
        <td id="file-gistfile1-diff-LC558" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    WorldPacket data(SMSG_NAME_QUERY_RESPONSE, (8 + 1 + 1 + 1 + 1 + 1 + 10));</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L559" class="blob-num js-line-number" data-line-number="559"></td>
        <td id="file-gistfile1-diff-LC559" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    data.appendPackGUID(GetGUID());                             // player guid</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L560" class="blob-num js-line-number" data-line-number="560"></td>
        <td id="file-gistfile1-diff-LC560" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    data &lt;&lt; uint8(0);                                       // added in 3.1; if &gt; 1, then end of packet</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L561" class="blob-num js-line-number" data-line-number="561"></td>
        <td id="file-gistfile1-diff-LC561" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    data &lt;&lt; GetName();                                   // played name</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L562" class="blob-num js-line-number" data-line-number="562"></td>
        <td id="file-gistfile1-diff-LC562" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    data &lt;&lt; uint8(0);                                       // realm name for cross realm BG usage</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L563" class="blob-num js-line-number" data-line-number="563"></td>
        <td id="file-gistfile1-diff-LC563" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    data &lt;&lt; uint8(getORace());</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L564" class="blob-num js-line-number" data-line-number="564"></td>
        <td id="file-gistfile1-diff-LC564" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    data &lt;&lt; uint8(getGender());</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L565" class="blob-num js-line-number" data-line-number="565"></td>
        <td id="file-gistfile1-diff-LC565" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    data &lt;&lt; uint8(getClass());</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L566" class="blob-num js-line-number" data-line-number="566"></td>
        <td id="file-gistfile1-diff-LC566" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    data &lt;&lt; uint8(0);                                   // is not declined</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L567" class="blob-num js-line-number" data-line-number="567"></td>
        <td id="file-gistfile1-diff-LC567" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    GetSession()-&gt;SendPacket(&amp;data);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L568" class="blob-num js-line-number" data-line-number="568"></td>
        <td id="file-gistfile1-diff-LC568" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L569" class="blob-num js-line-number" data-line-number="569"></td>
        <td id="file-gistfile1-diff-LC569" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    return true;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L570" class="blob-num js-line-number" data-line-number="570"></td>
        <td id="file-gistfile1-diff-LC570" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>}</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L571" class="blob-num js-line-number" data-line-number="571"></td>
        <td id="file-gistfile1-diff-LC571" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L572" class="blob-num js-line-number" data-line-number="572"></td>
        <td id="file-gistfile1-diff-LC572" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>void Player::SetFakeRaceAndMorph()</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L573" class="blob-num js-line-number" data-line-number="573"></td>
        <td id="file-gistfile1-diff-LC573" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>{</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L574" class="blob-num js-line-number" data-line-number="574"></td>
        <td id="file-gistfile1-diff-LC574" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>m_FakeRace = GetOTeam() == ALLIANCE ? RACE_BLOODELF : RACE_HUMAN;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L575" class="blob-num js-line-number" data-line-number="575"></td>
        <td id="file-gistfile1-diff-LC575" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>}</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L576" class="blob-num js-line-number" data-line-number="576"></td>
        <td id="file-gistfile1-diff-LC576" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L577" class="blob-num js-line-number" data-line-number="577"></td>
        <td id="file-gistfile1-diff-LC577" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>bool Player::SendBattleGroundChat(uint32 msgtype, std::string message)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L578" class="blob-num js-line-number" data-line-number="578"></td>
        <td id="file-gistfile1-diff-LC578" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>{</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L579" class="blob-num js-line-number" data-line-number="579"></td>
        <td id="file-gistfile1-diff-LC579" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    // Select distance to broadcast to.</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L580" class="blob-num js-line-number" data-line-number="580"></td>
        <td id="file-gistfile1-diff-LC580" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    float distance = msgtype == CHAT_MSG_SAY ? sWorld-&gt;getFloatConfig(CONFIG_LISTEN_RANGE_SAY) : sWorld-&gt;getFloatConfig(CONFIG_LISTEN_RANGE_YELL);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L581" class="blob-num js-line-number" data-line-number="581"></td>
        <td id="file-gistfile1-diff-LC581" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L582" class="blob-num js-line-number" data-line-number="582"></td>
        <td id="file-gistfile1-diff-LC582" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    if (Battleground* pBattleGround = GetBattleground())</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L583" class="blob-num js-line-number" data-line-number="583"></td>
        <td id="file-gistfile1-diff-LC583" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    {</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L584" class="blob-num js-line-number" data-line-number="584"></td>
        <td id="file-gistfile1-diff-LC584" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        if (pBattleGround-&gt;isArena()) // Only fake chat in BG&#39;s. CFBG should not interfere with arenas.</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L585" class="blob-num js-line-number" data-line-number="585"></td>
        <td id="file-gistfile1-diff-LC585" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            return false;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L586" class="blob-num js-line-number" data-line-number="586"></td>
        <td id="file-gistfile1-diff-LC586" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L587" class="blob-num js-line-number" data-line-number="587"></td>
        <td id="file-gistfile1-diff-LC587" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        for (Battleground::BattlegroundPlayerMap::const_iterator itr = pBattleGround-&gt;GetPlayers().begin(); itr != pBattleGround-&gt;GetPlayers().end(); ++itr)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L588" class="blob-num js-line-number" data-line-number="588"></td>
        <td id="file-gistfile1-diff-LC588" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        {</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L589" class="blob-num js-line-number" data-line-number="589"></td>
        <td id="file-gistfile1-diff-LC589" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            if (Player* pPlayer = ObjectAccessor::FindPlayer(itr-&gt;first))</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L590" class="blob-num js-line-number" data-line-number="590"></td>
        <td id="file-gistfile1-diff-LC590" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            {</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L591" class="blob-num js-line-number" data-line-number="591"></td>
        <td id="file-gistfile1-diff-LC591" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                if (GetDistance2d(pPlayer-&gt;GetPositionX(), pPlayer-&gt;GetPositionY()) &lt;= distance)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L592" class="blob-num js-line-number" data-line-number="592"></td>
        <td id="file-gistfile1-diff-LC592" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                {</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L593" class="blob-num js-line-number" data-line-number="593"></td>
        <td id="file-gistfile1-diff-LC593" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                    WorldPacket data(SMSG_MESSAGECHAT, 200);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L594" class="blob-num js-line-number" data-line-number="594"></td>
        <td id="file-gistfile1-diff-LC594" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L595" class="blob-num js-line-number" data-line-number="595"></td>
        <td id="file-gistfile1-diff-LC595" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                    if (GetTeam() == pPlayer-&gt;GetTeam())</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L596" class="blob-num js-line-number" data-line-number="596"></td>
        <td id="file-gistfile1-diff-LC596" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                        BuildPlayerChat(&amp;data, msgtype, message, LANG_UNIVERSAL);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L597" class="blob-num js-line-number" data-line-number="597"></td>
        <td id="file-gistfile1-diff-LC597" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                    else if (msgtype != CHAT_MSG_EMOTE)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L598" class="blob-num js-line-number" data-line-number="598"></td>
        <td id="file-gistfile1-diff-LC598" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                       BuildPlayerChat(&amp;data, msgtype, message, pPlayer-&gt;GetTeam() == ALLIANCE ? LANG_ORCISH : LANG_COMMON);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L599" class="blob-num js-line-number" data-line-number="599"></td>
        <td id="file-gistfile1-diff-LC599" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L600" class="blob-num js-line-number" data-line-number="600"></td>
        <td id="file-gistfile1-diff-LC600" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                    pPlayer-&gt;GetSession()-&gt;SendPacket(&amp;data);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L601" class="blob-num js-line-number" data-line-number="601"></td>
        <td id="file-gistfile1-diff-LC601" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L602" class="blob-num js-line-number" data-line-number="602"></td>
        <td id="file-gistfile1-diff-LC602" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L603" class="blob-num js-line-number" data-line-number="603"></td>
        <td id="file-gistfile1-diff-LC603" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L604" class="blob-num js-line-number" data-line-number="604"></td>
        <td id="file-gistfile1-diff-LC604" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        return true;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L605" class="blob-num js-line-number" data-line-number="605"></td>
        <td id="file-gistfile1-diff-LC605" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L606" class="blob-num js-line-number" data-line-number="606"></td>
        <td id="file-gistfile1-diff-LC606" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    else</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L607" class="blob-num js-line-number" data-line-number="607"></td>
        <td id="file-gistfile1-diff-LC607" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        return false;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L608" class="blob-num js-line-number" data-line-number="608"></td>
        <td id="file-gistfile1-diff-LC608" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>}</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L609" class="blob-num js-line-number" data-line-number="609"></td>
        <td id="file-gistfile1-diff-LC609" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L610" class="blob-num js-line-number" data-line-number="610"></td>
        <td id="file-gistfile1-diff-LC610" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>void Player::MorphFit(bool value)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L611" class="blob-num js-line-number" data-line-number="611"></td>
        <td id="file-gistfile1-diff-LC611" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>{</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L612" class="blob-num js-line-number" data-line-number="612"></td>
        <td id="file-gistfile1-diff-LC612" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    if (!IsPlayingNative() &amp;&amp; value)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L613" class="blob-num js-line-number" data-line-number="613"></td>
        <td id="file-gistfile1-diff-LC613" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    {</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L614" class="blob-num js-line-number" data-line-number="614"></td>
        <td id="file-gistfile1-diff-LC614" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        if (GetOTeam() == HORDE)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L615" class="blob-num js-line-number" data-line-number="615"></td>
        <td id="file-gistfile1-diff-LC615" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        {</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L616" class="blob-num js-line-number" data-line-number="616"></td>
        <td id="file-gistfile1-diff-LC616" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            if (getGender() == GENDER_MALE)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L617" class="blob-num js-line-number" data-line-number="617"></td>
        <td id="file-gistfile1-diff-LC617" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            {</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L618" class="blob-num js-line-number" data-line-number="618"></td>
        <td id="file-gistfile1-diff-LC618" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                SetDisplayId(19723);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L619" class="blob-num js-line-number" data-line-number="619"></td>
        <td id="file-gistfile1-diff-LC619" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                SetNativeDisplayId(19723);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L620" class="blob-num js-line-number" data-line-number="620"></td>
        <td id="file-gistfile1-diff-LC620" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L621" class="blob-num js-line-number" data-line-number="621"></td>
        <td id="file-gistfile1-diff-LC621" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            else</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L622" class="blob-num js-line-number" data-line-number="622"></td>
        <td id="file-gistfile1-diff-LC622" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            {</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L623" class="blob-num js-line-number" data-line-number="623"></td>
        <td id="file-gistfile1-diff-LC623" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                SetDisplayId(19724);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L624" class="blob-num js-line-number" data-line-number="624"></td>
        <td id="file-gistfile1-diff-LC624" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                SetNativeDisplayId(19724);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L625" class="blob-num js-line-number" data-line-number="625"></td>
        <td id="file-gistfile1-diff-LC625" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L626" class="blob-num js-line-number" data-line-number="626"></td>
        <td id="file-gistfile1-diff-LC626" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L627" class="blob-num js-line-number" data-line-number="627"></td>
        <td id="file-gistfile1-diff-LC627" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        else</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L628" class="blob-num js-line-number" data-line-number="628"></td>
        <td id="file-gistfile1-diff-LC628" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        {</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L629" class="blob-num js-line-number" data-line-number="629"></td>
        <td id="file-gistfile1-diff-LC629" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            if (getGender() == GENDER_MALE)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L630" class="blob-num js-line-number" data-line-number="630"></td>
        <td id="file-gistfile1-diff-LC630" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            {</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L631" class="blob-num js-line-number" data-line-number="631"></td>
        <td id="file-gistfile1-diff-LC631" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                SetDisplayId(20578);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L632" class="blob-num js-line-number" data-line-number="632"></td>
        <td id="file-gistfile1-diff-LC632" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                SetNativeDisplayId(20578);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L633" class="blob-num js-line-number" data-line-number="633"></td>
        <td id="file-gistfile1-diff-LC633" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L634" class="blob-num js-line-number" data-line-number="634"></td>
        <td id="file-gistfile1-diff-LC634" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            else</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L635" class="blob-num js-line-number" data-line-number="635"></td>
        <td id="file-gistfile1-diff-LC635" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            {</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L636" class="blob-num js-line-number" data-line-number="636"></td>
        <td id="file-gistfile1-diff-LC636" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                SetDisplayId(20579);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L637" class="blob-num js-line-number" data-line-number="637"></td>
        <td id="file-gistfile1-diff-LC637" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                SetNativeDisplayId(20579);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L638" class="blob-num js-line-number" data-line-number="638"></td>
        <td id="file-gistfile1-diff-LC638" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L639" class="blob-num js-line-number" data-line-number="639"></td>
        <td id="file-gistfile1-diff-LC639" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L640" class="blob-num js-line-number" data-line-number="640"></td>
        <td id="file-gistfile1-diff-LC640" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L641" class="blob-num js-line-number" data-line-number="641"></td>
        <td id="file-gistfile1-diff-LC641" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    else</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L642" class="blob-num js-line-number" data-line-number="642"></td>
        <td id="file-gistfile1-diff-LC642" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        InitDisplayIds();</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L643" class="blob-num js-line-number" data-line-number="643"></td>
        <td id="file-gistfile1-diff-LC643" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>}</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L644" class="blob-num js-line-number" data-line-number="644"></td>
        <td id="file-gistfile1-diff-LC644" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L645" class="blob-num js-line-number" data-line-number="645"></td>
        <td id="file-gistfile1-diff-LC645" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>void Player::FitPlayerInTeam(bool action, Battleground* pBattleGround)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L646" class="blob-num js-line-number" data-line-number="646"></td>
        <td id="file-gistfile1-diff-LC646" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>{</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L647" class="blob-num js-line-number" data-line-number="647"></td>
        <td id="file-gistfile1-diff-LC647" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    if (!pBattleGround)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L648" class="blob-num js-line-number" data-line-number="648"></td>
        <td id="file-gistfile1-diff-LC648" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        pBattleGround = GetBattleground();</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L649" class="blob-num js-line-number" data-line-number="649"></td>
        <td id="file-gistfile1-diff-LC649" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L650" class="blob-num js-line-number" data-line-number="650"></td>
        <td id="file-gistfile1-diff-LC650" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    if ((!pBattleGround || pBattleGround-&gt;isArena()) &amp;&amp; action)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L651" class="blob-num js-line-number" data-line-number="651"></td>
        <td id="file-gistfile1-diff-LC651" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        return;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L652" class="blob-num js-line-number" data-line-number="652"></td>
        <td id="file-gistfile1-diff-LC652" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L653" class="blob-num js-line-number" data-line-number="653"></td>
        <td id="file-gistfile1-diff-LC653" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    if(!IsPlayingNative() &amp;&amp; action)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L654" class="blob-num js-line-number" data-line-number="654"></td>
        <td id="file-gistfile1-diff-LC654" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        setFactionForRace(getRace());</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L655" class="blob-num js-line-number" data-line-number="655"></td>
        <td id="file-gistfile1-diff-LC655" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    else</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L656" class="blob-num js-line-number" data-line-number="656"></td>
        <td id="file-gistfile1-diff-LC656" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        setFactionForRace(getORace());</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L657" class="blob-num js-line-number" data-line-number="657"></td>
        <td id="file-gistfile1-diff-LC657" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L658" class="blob-num js-line-number" data-line-number="658"></td>
        <td id="file-gistfile1-diff-LC658" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    if (action)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L659" class="blob-num js-line-number" data-line-number="659"></td>
        <td id="file-gistfile1-diff-LC659" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        SetForgetBGPlayers(true);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L660" class="blob-num js-line-number" data-line-number="660"></td>
        <td id="file-gistfile1-diff-LC660" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    else</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L661" class="blob-num js-line-number" data-line-number="661"></td>
        <td id="file-gistfile1-diff-LC661" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        SetForgetInListPlayers(true);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L662" class="blob-num js-line-number" data-line-number="662"></td>
        <td id="file-gistfile1-diff-LC662" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L663" class="blob-num js-line-number" data-line-number="663"></td>
        <td id="file-gistfile1-diff-LC663" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    MorphFit(action);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L664" class="blob-num js-line-number" data-line-number="664"></td>
        <td id="file-gistfile1-diff-LC664" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L665" class="blob-num js-line-number" data-line-number="665"></td>
        <td id="file-gistfile1-diff-LC665" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    if (pBattleGround &amp;&amp; action)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L666" class="blob-num js-line-number" data-line-number="666"></td>
        <td id="file-gistfile1-diff-LC666" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        SendChatMessage(&quot;%sYou are playing for the %s%s in this %s&quot;, MSG_COLOR_WHITE, GetTeam() == ALLIANCE ? MSG_COLOR_DARKBLUE&quot;alliance&quot; : MSG_COLOR_RED&quot;horde&quot;, MSG_COLOR_WHITE, pBattleGround-&gt;GetName());</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L667" class="blob-num js-line-number" data-line-number="667"></td>
        <td id="file-gistfile1-diff-LC667" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>}</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L668" class="blob-num js-line-number" data-line-number="668"></td>
        <td id="file-gistfile1-diff-LC668" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L669" class="blob-num js-line-number" data-line-number="669"></td>
        <td id="file-gistfile1-diff-LC669" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>void Player::DoForgetPlayersInList()</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L670" class="blob-num js-line-number" data-line-number="670"></td>
        <td id="file-gistfile1-diff-LC670" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>{</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L671" class="blob-num js-line-number" data-line-number="671"></td>
        <td id="file-gistfile1-diff-LC671" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    // m_FakePlayers is filled from a vector within the battleground</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L672" class="blob-num js-line-number" data-line-number="672"></td>
        <td id="file-gistfile1-diff-LC672" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    // they were in previously so all players that have been in that BG will be invalidated.</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L673" class="blob-num js-line-number" data-line-number="673"></td>
        <td id="file-gistfile1-diff-LC673" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    for (FakePlayers::const_iterator itr = m_FakePlayers.begin(); itr != m_FakePlayers.end(); ++itr)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L674" class="blob-num js-line-number" data-line-number="674"></td>
        <td id="file-gistfile1-diff-LC674" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    {</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L675" class="blob-num js-line-number" data-line-number="675"></td>
        <td id="file-gistfile1-diff-LC675" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        WorldPacket data(SMSG_INVALIDATE_PLAYER, 8);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L676" class="blob-num js-line-number" data-line-number="676"></td>
        <td id="file-gistfile1-diff-LC676" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        data &lt;&lt; *itr;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L677" class="blob-num js-line-number" data-line-number="677"></td>
        <td id="file-gistfile1-diff-LC677" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        GetSession()-&gt;SendPacket(&amp;data);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L678" class="blob-num js-line-number" data-line-number="678"></td>
        <td id="file-gistfile1-diff-LC678" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        if (Player* pPlayer = ObjectAccessor::FindPlayer(*itr))</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L679" class="blob-num js-line-number" data-line-number="679"></td>
        <td id="file-gistfile1-diff-LC679" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            GetSession()-&gt;SendNameQueryOpcode(pPlayer-&gt;GetGUID());</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L680" class="blob-num js-line-number" data-line-number="680"></td>
        <td id="file-gistfile1-diff-LC680" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L681" class="blob-num js-line-number" data-line-number="681"></td>
        <td id="file-gistfile1-diff-LC681" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    m_FakePlayers.clear();</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L682" class="blob-num js-line-number" data-line-number="682"></td>
        <td id="file-gistfile1-diff-LC682" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>}</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L683" class="blob-num js-line-number" data-line-number="683"></td>
        <td id="file-gistfile1-diff-LC683" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L684" class="blob-num js-line-number" data-line-number="684"></td>
        <td id="file-gistfile1-diff-LC684" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>void Player::DoForgetPlayersInBG(Battleground* pBattleGround)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L685" class="blob-num js-line-number" data-line-number="685"></td>
        <td id="file-gistfile1-diff-LC685" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>{</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L686" class="blob-num js-line-number" data-line-number="686"></td>
        <td id="file-gistfile1-diff-LC686" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    for (Battleground::BattlegroundPlayerMap::const_iterator itr = pBattleGround-&gt;GetPlayers().begin(); itr != pBattleGround-&gt;GetPlayers().end(); ++itr)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L687" class="blob-num js-line-number" data-line-number="687"></td>
        <td id="file-gistfile1-diff-LC687" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    {</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L688" class="blob-num js-line-number" data-line-number="688"></td>
        <td id="file-gistfile1-diff-LC688" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        // Here we invalidate players in the bg to the added player</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L689" class="blob-num js-line-number" data-line-number="689"></td>
        <td id="file-gistfile1-diff-LC689" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        WorldPacket data1(SMSG_INVALIDATE_PLAYER, 8);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L690" class="blob-num js-line-number" data-line-number="690"></td>
        <td id="file-gistfile1-diff-LC690" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        data1 &lt;&lt; itr-&gt;first;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L691" class="blob-num js-line-number" data-line-number="691"></td>
        <td id="file-gistfile1-diff-LC691" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        GetSession()-&gt;SendPacket(&amp;data1);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L692" class="blob-num js-line-number" data-line-number="692"></td>
        <td id="file-gistfile1-diff-LC692" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L693" class="blob-num js-line-number" data-line-number="693"></td>
        <td id="file-gistfile1-diff-LC693" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        if (Player* pPlayer = ObjectAccessor::FindPlayer(itr-&gt;first))</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L694" class="blob-num js-line-number" data-line-number="694"></td>
        <td id="file-gistfile1-diff-LC694" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        {</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L695" class="blob-num js-line-number" data-line-number="695"></td>
        <td id="file-gistfile1-diff-LC695" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            GetSession()-&gt;SendNameQueryOpcode(pPlayer-&gt;GetGUID()); // Send namequery answer instantly if player is available</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L696" class="blob-num js-line-number" data-line-number="696"></td>
        <td id="file-gistfile1-diff-LC696" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            // Here we invalidate the player added to players in the bg</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L697" class="blob-num js-line-number" data-line-number="697"></td>
        <td id="file-gistfile1-diff-LC697" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            WorldPacket data2(SMSG_INVALIDATE_PLAYER, 8);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L698" class="blob-num js-line-number" data-line-number="698"></td>
        <td id="file-gistfile1-diff-LC698" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            data2 &lt;&lt; GetGUID();</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L699" class="blob-num js-line-number" data-line-number="699"></td>
        <td id="file-gistfile1-diff-LC699" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            pPlayer-&gt;GetSession()-&gt;SendPacket(&amp;data2);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L700" class="blob-num js-line-number" data-line-number="700"></td>
        <td id="file-gistfile1-diff-LC700" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            pPlayer-&gt;GetSession()-&gt;SendNameQueryOpcode(GetGUID());</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L701" class="blob-num js-line-number" data-line-number="701"></td>
        <td id="file-gistfile1-diff-LC701" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L702" class="blob-num js-line-number" data-line-number="702"></td>
        <td id="file-gistfile1-diff-LC702" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L703" class="blob-num js-line-number" data-line-number="703"></td>
        <td id="file-gistfile1-diff-LC703" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>}</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L704" class="blob-num js-line-number" data-line-number="704"></td>
        <td id="file-gistfile1-diff-LC704" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L705" class="blob-num js-line-number" data-line-number="705"></td>
        <td id="file-gistfile1-diff-LC705" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>bool BattlegroundQueue::CheckCrossFactionMatch(BattlegroundBracketId bracket_id, Battleground* bg)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L706" class="blob-num js-line-number" data-line-number="706"></td>
        <td id="file-gistfile1-diff-LC706" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>{</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L707" class="blob-num js-line-number" data-line-number="707"></td>
        <td id="file-gistfile1-diff-LC707" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    if (!sWorld-&gt;getBoolConfig(BATTLEGROUND_CROSSFACTION_ENABLED) || bg-&gt;isArena())</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L708" class="blob-num js-line-number" data-line-number="708"></td>
        <td id="file-gistfile1-diff-LC708" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        return false; // Only do this if crossbg&#39;s are enabled.</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L709" class="blob-num js-line-number" data-line-number="709"></td>
        <td id="file-gistfile1-diff-LC709" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L710" class="blob-num js-line-number" data-line-number="710"></td>
        <td id="file-gistfile1-diff-LC710" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    // Here we will add all players to selectionpool, later we check if there are enough and launch a bg.</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L711" class="blob-num js-line-number" data-line-number="711"></td>
        <td id="file-gistfile1-diff-LC711" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    FillXPlayersToBG(bracket_id, bg, true);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L712" class="blob-num js-line-number" data-line-number="712"></td>
        <td id="file-gistfile1-diff-LC712" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L713" class="blob-num js-line-number" data-line-number="713"></td>
        <td id="file-gistfile1-diff-LC713" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    if (sBattlegroundMgr-&gt;isTesting() &amp;&amp; (m_SelectionPools[TEAM_ALLIANCE].GetPlayerCount() || m_SelectionPools[TEAM_HORDE].GetPlayerCount()))</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L714" class="blob-num js-line-number" data-line-number="714"></td>
        <td id="file-gistfile1-diff-LC714" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        return true;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L715" class="blob-num js-line-number" data-line-number="715"></td>
        <td id="file-gistfile1-diff-LC715" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L716" class="blob-num js-line-number" data-line-number="716"></td>
        <td id="file-gistfile1-diff-LC716" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    uint8 MPT = bg-&gt;GetMinPlayersPerTeam();</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L717" class="blob-num js-line-number" data-line-number="717"></td>
        <td id="file-gistfile1-diff-LC717" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    if (m_SelectionPools[TEAM_ALLIANCE].GetPlayerCount() &lt; MPT || m_SelectionPools[TEAM_HORDE].GetPlayerCount() &lt; MPT)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L718" class="blob-num js-line-number" data-line-number="718"></td>
        <td id="file-gistfile1-diff-LC718" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        return false;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L719" class="blob-num js-line-number" data-line-number="719"></td>
        <td id="file-gistfile1-diff-LC719" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L720" class="blob-num js-line-number" data-line-number="720"></td>
        <td id="file-gistfile1-diff-LC720" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    return true;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L721" class="blob-num js-line-number" data-line-number="721"></td>
        <td id="file-gistfile1-diff-LC721" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>}</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L722" class="blob-num js-line-number" data-line-number="722"></td>
        <td id="file-gistfile1-diff-LC722" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L723" class="blob-num js-line-number" data-line-number="723"></td>
        <td id="file-gistfile1-diff-LC723" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>// This function will invite players in the least populated faction, which makes battleground queues much faster.</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L724" class="blob-num js-line-number" data-line-number="724"></td>
        <td id="file-gistfile1-diff-LC724" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>// This function will return true if cross faction battlegrounds are enabled, otherwise return false,</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L725" class="blob-num js-line-number" data-line-number="725"></td>
        <td id="file-gistfile1-diff-LC725" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>// which is useful in FillPlayersToBG. Because then we can interrupt the regular invitation if cross faction bg&#39;s are enabled.</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L726" class="blob-num js-line-number" data-line-number="726"></td>
        <td id="file-gistfile1-diff-LC726" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>bool BattlegroundQueue::FillXPlayersToBG(BattlegroundBracketId bracket_id, Battleground* bg, bool start)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L727" class="blob-num js-line-number" data-line-number="727"></td>
        <td id="file-gistfile1-diff-LC727" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>{</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L728" class="blob-num js-line-number" data-line-number="728"></td>
        <td id="file-gistfile1-diff-LC728" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    uint8 queuedPeople = 0;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L729" class="blob-num js-line-number" data-line-number="729"></td>
        <td id="file-gistfile1-diff-LC729" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    for (GroupsQueueType::const_iterator itr = m_QueuedGroups[bracket_id][BG_QUEUE_MIXED].begin(); itr != m_QueuedGroups[bracket_id][BG_QUEUE_MIXED].end(); ++itr)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L730" class="blob-num js-line-number" data-line-number="730"></td>
        <td id="file-gistfile1-diff-LC730" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        if (!(*itr)-&gt;IsInvitedToBGInstanceGUID)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L731" class="blob-num js-line-number" data-line-number="731"></td>
        <td id="file-gistfile1-diff-LC731" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            queuedPeople += (*itr)-&gt;Players.size();</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L732" class="blob-num js-line-number" data-line-number="732"></td>
        <td id="file-gistfile1-diff-LC732" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L733" class="blob-num js-line-number" data-line-number="733"></td>
        <td id="file-gistfile1-diff-LC733" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    if (sWorld-&gt;getBoolConfig(BATTLEGROUND_CROSSFACTION_ENABLED) &amp;&amp; (sBattlegroundMgr-&gt;isTesting() || queuedPeople &gt;= bg-&gt;GetMinPlayersPerTeam()*2 || !start))</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L734" class="blob-num js-line-number" data-line-number="734"></td>
        <td id="file-gistfile1-diff-LC734" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    {</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L735" class="blob-num js-line-number" data-line-number="735"></td>
        <td id="file-gistfile1-diff-LC735" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        int32 aliFree   = start ? bg-&gt;GetMaxPlayersPerTeam() : bg-&gt;GetFreeSlotsForTeam(ALLIANCE);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L736" class="blob-num js-line-number" data-line-number="736"></td>
        <td id="file-gistfile1-diff-LC736" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        int32 hordeFree = start ? bg-&gt;GetMaxPlayersPerTeam() : bg-&gt;GetFreeSlotsForTeam(HORDE);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L737" class="blob-num js-line-number" data-line-number="737"></td>
        <td id="file-gistfile1-diff-LC737" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        // Empty selection pools. They will be refilled from queued groups.</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L738" class="blob-num js-line-number" data-line-number="738"></td>
        <td id="file-gistfile1-diff-LC738" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        m_SelectionPools[TEAM_ALLIANCE].Init();</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L739" class="blob-num js-line-number" data-line-number="739"></td>
        <td id="file-gistfile1-diff-LC739" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        m_SelectionPools[TEAM_HORDE].Init();</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L740" class="blob-num js-line-number" data-line-number="740"></td>
        <td id="file-gistfile1-diff-LC740" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        int32 valiFree = aliFree;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L741" class="blob-num js-line-number" data-line-number="741"></td>
        <td id="file-gistfile1-diff-LC741" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        int32 vhordeFree = hordeFree;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L742" class="blob-num js-line-number" data-line-number="742"></td>
        <td id="file-gistfile1-diff-LC742" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        int32 diff = 0;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L743" class="blob-num js-line-number" data-line-number="743"></td>
        <td id="file-gistfile1-diff-LC743" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L744" class="blob-num js-line-number" data-line-number="744"></td>
        <td id="file-gistfile1-diff-LC744" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L745" class="blob-num js-line-number" data-line-number="745"></td>
        <td id="file-gistfile1-diff-LC745" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        // Add teams to their own factions as far as possible.</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L746" class="blob-num js-line-number" data-line-number="746"></td>
        <td id="file-gistfile1-diff-LC746" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        if (start)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L747" class="blob-num js-line-number" data-line-number="747"></td>
        <td id="file-gistfile1-diff-LC747" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        {</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L748" class="blob-num js-line-number" data-line-number="748"></td>
        <td id="file-gistfile1-diff-LC748" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            QueuedGroupMap m_PreGroupMap_a, m_PreGroupMap_h;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L749" class="blob-num js-line-number" data-line-number="749"></td>
        <td id="file-gistfile1-diff-LC749" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            int32 m_SmallestOfTeams = 0;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L750" class="blob-num js-line-number" data-line-number="750"></td>
        <td id="file-gistfile1-diff-LC750" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            int32 queuedAlliance = 0;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L751" class="blob-num js-line-number" data-line-number="751"></td>
        <td id="file-gistfile1-diff-LC751" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            int32 queuedHorde = 0;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L752" class="blob-num js-line-number" data-line-number="752"></td>
        <td id="file-gistfile1-diff-LC752" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L753" class="blob-num js-line-number" data-line-number="753"></td>
        <td id="file-gistfile1-diff-LC753" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            for (GroupsQueueType::const_iterator itr = m_QueuedGroups[bracket_id][BG_QUEUE_MIXED].begin(); itr != m_QueuedGroups[bracket_id][BG_QUEUE_MIXED].end(); ++itr)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L754" class="blob-num js-line-number" data-line-number="754"></td>
        <td id="file-gistfile1-diff-LC754" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            {</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L755" class="blob-num js-line-number" data-line-number="755"></td>
        <td id="file-gistfile1-diff-LC755" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                if ((*itr)-&gt;IsInvitedToBGInstanceGUID)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L756" class="blob-num js-line-number" data-line-number="756"></td>
        <td id="file-gistfile1-diff-LC756" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                    continue;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L757" class="blob-num js-line-number" data-line-number="757"></td>
        <td id="file-gistfile1-diff-LC757" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L758" class="blob-num js-line-number" data-line-number="758"></td>
        <td id="file-gistfile1-diff-LC758" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                bool alliance = (*itr)-&gt;OTeam == ALLIANCE;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L759" class="blob-num js-line-number" data-line-number="759"></td>
        <td id="file-gistfile1-diff-LC759" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L760" class="blob-num js-line-number" data-line-number="760"></td>
        <td id="file-gistfile1-diff-LC760" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                if (alliance)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L761" class="blob-num js-line-number" data-line-number="761"></td>
        <td id="file-gistfile1-diff-LC761" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                {</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L762" class="blob-num js-line-number" data-line-number="762"></td>
        <td id="file-gistfile1-diff-LC762" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                    m_PreGroupMap_a.insert(std::make_pair((*itr)-&gt;Players.size(), *itr));</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L763" class="blob-num js-line-number" data-line-number="763"></td>
        <td id="file-gistfile1-diff-LC763" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                    queuedAlliance += (*itr)-&gt;Players.size();</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L764" class="blob-num js-line-number" data-line-number="764"></td>
        <td id="file-gistfile1-diff-LC764" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L765" class="blob-num js-line-number" data-line-number="765"></td>
        <td id="file-gistfile1-diff-LC765" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                else</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L766" class="blob-num js-line-number" data-line-number="766"></td>
        <td id="file-gistfile1-diff-LC766" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                {</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L767" class="blob-num js-line-number" data-line-number="767"></td>
        <td id="file-gistfile1-diff-LC767" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                    m_PreGroupMap_h.insert(std::make_pair((*itr)-&gt;Players.size(), *itr));</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L768" class="blob-num js-line-number" data-line-number="768"></td>
        <td id="file-gistfile1-diff-LC768" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                    queuedHorde += (*itr)-&gt;Players.size();</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L769" class="blob-num js-line-number" data-line-number="769"></td>
        <td id="file-gistfile1-diff-LC769" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L770" class="blob-num js-line-number" data-line-number="770"></td>
        <td id="file-gistfile1-diff-LC770" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L771" class="blob-num js-line-number" data-line-number="771"></td>
        <td id="file-gistfile1-diff-LC771" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L772" class="blob-num js-line-number" data-line-number="772"></td>
        <td id="file-gistfile1-diff-LC772" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            m_SmallestOfTeams = std::min(std::min(aliFree, queuedAlliance), std::min(hordeFree, queuedHorde));</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L773" class="blob-num js-line-number" data-line-number="773"></td>
        <td id="file-gistfile1-diff-LC773" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L774" class="blob-num js-line-number" data-line-number="774"></td>
        <td id="file-gistfile1-diff-LC774" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            valiFree -= PreAddPlayers(m_PreGroupMap_a, m_SmallestOfTeams, aliFree);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L775" class="blob-num js-line-number" data-line-number="775"></td>
        <td id="file-gistfile1-diff-LC775" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            vhordeFree -= PreAddPlayers(m_PreGroupMap_h, m_SmallestOfTeams, hordeFree);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L776" class="blob-num js-line-number" data-line-number="776"></td>
        <td id="file-gistfile1-diff-LC776" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L777" class="blob-num js-line-number" data-line-number="777"></td>
        <td id="file-gistfile1-diff-LC777" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L778" class="blob-num js-line-number" data-line-number="778"></td>
        <td id="file-gistfile1-diff-LC778" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        QueuedGroupMap m_QueuedGroupMap;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L779" class="blob-num js-line-number" data-line-number="779"></td>
        <td id="file-gistfile1-diff-LC779" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L780" class="blob-num js-line-number" data-line-number="780"></td>
        <td id="file-gistfile1-diff-LC780" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        for (GroupsQueueType::const_iterator itr = m_QueuedGroups[bracket_id][BG_QUEUE_MIXED].begin(); itr != m_QueuedGroups[bracket_id][BG_QUEUE_MIXED].end(); ++itr)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L781" class="blob-num js-line-number" data-line-number="781"></td>
        <td id="file-gistfile1-diff-LC781" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            m_QueuedGroupMap.insert(std::make_pair((*itr)-&gt;Players.size(), *itr));</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L782" class="blob-num js-line-number" data-line-number="782"></td>
        <td id="file-gistfile1-diff-LC782" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L783" class="blob-num js-line-number" data-line-number="783"></td>
        <td id="file-gistfile1-diff-LC783" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        for (QueuedGroupMap::reverse_iterator itr = m_QueuedGroupMap.rbegin(); itr != m_QueuedGroupMap.rend(); ++itr)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L784" class="blob-num js-line-number" data-line-number="784"></td>
        <td id="file-gistfile1-diff-LC784" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        {</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L785" class="blob-num js-line-number" data-line-number="785"></td>
        <td id="file-gistfile1-diff-LC785" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            GroupsQueueType allypool = m_SelectionPools[TEAM_ALLIANCE].SelectedGroups;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L786" class="blob-num js-line-number" data-line-number="786"></td>
        <td id="file-gistfile1-diff-LC786" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            GroupsQueueType hordepool = m_SelectionPools[TEAM_HORDE].SelectedGroups;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L787" class="blob-num js-line-number" data-line-number="787"></td>
        <td id="file-gistfile1-diff-LC787" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L788" class="blob-num js-line-number" data-line-number="788"></td>
        <td id="file-gistfile1-diff-LC788" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            GroupQueueInfo* ginfo = itr-&gt;second;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L789" class="blob-num js-line-number" data-line-number="789"></td>
        <td id="file-gistfile1-diff-LC789" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L790" class="blob-num js-line-number" data-line-number="790"></td>
        <td id="file-gistfile1-diff-LC790" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            // If player already was invited via pre adding (add to own team first) or he was already invited to a bg, skip.</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L791" class="blob-num js-line-number" data-line-number="791"></td>
        <td id="file-gistfile1-diff-LC791" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            if (ginfo-&gt;IsInvitedToBGInstanceGUID ||</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L792" class="blob-num js-line-number" data-line-number="792"></td>
        <td id="file-gistfile1-diff-LC792" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                std::find(allypool.begin(), allypool.end(), ginfo) != allypool.end() ||</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L793" class="blob-num js-line-number" data-line-number="793"></td>
        <td id="file-gistfile1-diff-LC793" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                std::find(hordepool.begin(), hordepool.end(), ginfo) != hordepool.end() ||</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L794" class="blob-num js-line-number" data-line-number="794"></td>
        <td id="file-gistfile1-diff-LC794" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                (m_SelectionPools[TEAM_ALLIANCE].GetPlayerCount() &gt;= bg-&gt;GetMinPlayersPerTeam() &amp;&amp;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L795" class="blob-num js-line-number" data-line-number="795"></td>
        <td id="file-gistfile1-diff-LC795" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                m_SelectionPools[TEAM_HORDE].GetPlayerCount() &gt;= bg-&gt;GetMinPlayersPerTeam()))</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L796" class="blob-num js-line-number" data-line-number="796"></td>
        <td id="file-gistfile1-diff-LC796" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                continue;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L797" class="blob-num js-line-number" data-line-number="797"></td>
        <td id="file-gistfile1-diff-LC797" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L798" class="blob-num js-line-number" data-line-number="798"></td>
        <td id="file-gistfile1-diff-LC798" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            diff = abs(valiFree - vhordeFree);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L799" class="blob-num js-line-number" data-line-number="799"></td>
        <td id="file-gistfile1-diff-LC799" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            bool moreAli = valiFree &lt; vhordeFree;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L800" class="blob-num js-line-number" data-line-number="800"></td>
        <td id="file-gistfile1-diff-LC800" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L801" class="blob-num js-line-number" data-line-number="801"></td>
        <td id="file-gistfile1-diff-LC801" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            if (diff &gt; 0)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L802" class="blob-num js-line-number" data-line-number="802"></td>
        <td id="file-gistfile1-diff-LC802" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                ginfo-&gt;Team = moreAli ? HORDE : ALLIANCE;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L803" class="blob-num js-line-number" data-line-number="803"></td>
        <td id="file-gistfile1-diff-LC803" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L804" class="blob-num js-line-number" data-line-number="804"></td>
        <td id="file-gistfile1-diff-LC804" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            bool alliance = ginfo-&gt;Team == ALLIANCE;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L805" class="blob-num js-line-number" data-line-number="805"></td>
        <td id="file-gistfile1-diff-LC805" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L806" class="blob-num js-line-number" data-line-number="806"></td>
        <td id="file-gistfile1-diff-LC806" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            if (m_SelectionPools[alliance ? TEAM_ALLIANCE : TEAM_HORDE].AddGroup(ginfo, alliance ? aliFree : hordeFree))</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L807" class="blob-num js-line-number" data-line-number="807"></td>
        <td id="file-gistfile1-diff-LC807" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                alliance ? valiFree -= ginfo-&gt;Players.size() : vhordeFree -= ginfo-&gt;Players.size();</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L808" class="blob-num js-line-number" data-line-number="808"></td>
        <td id="file-gistfile1-diff-LC808" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L809" class="blob-num js-line-number" data-line-number="809"></td>
        <td id="file-gistfile1-diff-LC809" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L810" class="blob-num js-line-number" data-line-number="810"></td>
        <td id="file-gistfile1-diff-LC810" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        return true;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L811" class="blob-num js-line-number" data-line-number="811"></td>
        <td id="file-gistfile1-diff-LC811" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L812" class="blob-num js-line-number" data-line-number="812"></td>
        <td id="file-gistfile1-diff-LC812" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    return false;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L813" class="blob-num js-line-number" data-line-number="813"></td>
        <td id="file-gistfile1-diff-LC813" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>}</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L814" class="blob-num js-line-number" data-line-number="814"></td>
        <td id="file-gistfile1-diff-LC814" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L815" class="blob-num js-line-number" data-line-number="815"></td>
        <td id="file-gistfile1-diff-LC815" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>int32 BattlegroundQueue::PreAddPlayers(QueuedGroupMap m_PreGroupMap, int32 MaxAdd, uint32 MaxInTeam)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L816" class="blob-num js-line-number" data-line-number="816"></td>
        <td id="file-gistfile1-diff-LC816" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>{</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L817" class="blob-num js-line-number" data-line-number="817"></td>
        <td id="file-gistfile1-diff-LC817" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    int32 LeftToAdd = MaxAdd;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L818" class="blob-num js-line-number" data-line-number="818"></td>
        <td id="file-gistfile1-diff-LC818" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    uint32 Added = 0;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L819" class="blob-num js-line-number" data-line-number="819"></td>
        <td id="file-gistfile1-diff-LC819" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L820" class="blob-num js-line-number" data-line-number="820"></td>
        <td id="file-gistfile1-diff-LC820" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    for (QueuedGroupMap::reverse_iterator itr = m_PreGroupMap.rbegin(); itr != m_PreGroupMap.rend(); ++itr)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L821" class="blob-num js-line-number" data-line-number="821"></td>
        <td id="file-gistfile1-diff-LC821" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    {</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L822" class="blob-num js-line-number" data-line-number="822"></td>
        <td id="file-gistfile1-diff-LC822" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        int32 PlayerSize = itr-&gt;first;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L823" class="blob-num js-line-number" data-line-number="823"></td>
        <td id="file-gistfile1-diff-LC823" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        bool alliance = itr-&gt;second-&gt;OTeam == ALLIANCE;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L824" class="blob-num js-line-number" data-line-number="824"></td>
        <td id="file-gistfile1-diff-LC824" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L825" class="blob-num js-line-number" data-line-number="825"></td>
        <td id="file-gistfile1-diff-LC825" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        if (PlayerSize &lt;= LeftToAdd &amp;&amp; m_SelectionPools[alliance ? TEAM_ALLIANCE : TEAM_HORDE].AddGroup(itr-&gt;second, MaxInTeam))</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L826" class="blob-num js-line-number" data-line-number="826"></td>
        <td id="file-gistfile1-diff-LC826" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            LeftToAdd -= PlayerSize, Added -= PlayerSize;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L827" class="blob-num js-line-number" data-line-number="827"></td>
        <td id="file-gistfile1-diff-LC827" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L828" class="blob-num js-line-number" data-line-number="828"></td>
        <td id="file-gistfile1-diff-LC828" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L829" class="blob-num js-line-number" data-line-number="829"></td>
        <td id="file-gistfile1-diff-LC829" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    return LeftToAdd;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L830" class="blob-num js-line-number" data-line-number="830"></td>
        <td id="file-gistfile1-diff-LC830" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>}</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L831" class="blob-num js-line-number" data-line-number="831"></td>
        <td id="file-gistfile1-diff-LC831" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L832" class="blob-num js-line-number" data-line-number="832"></td>
        <td id="file-gistfile1-diff-LC832" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>void Player::SendChatMessage(const char *format, ...)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L833" class="blob-num js-line-number" data-line-number="833"></td>
        <td id="file-gistfile1-diff-LC833" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>{</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L834" class="blob-num js-line-number" data-line-number="834"></td>
        <td id="file-gistfile1-diff-LC834" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    if (!IsInWorld())</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L835" class="blob-num js-line-number" data-line-number="835"></td>
        <td id="file-gistfile1-diff-LC835" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        return;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L836" class="blob-num js-line-number" data-line-number="836"></td>
        <td id="file-gistfile1-diff-LC836" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L837" class="blob-num js-line-number" data-line-number="837"></td>
        <td id="file-gistfile1-diff-LC837" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    if (format)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L838" class="blob-num js-line-number" data-line-number="838"></td>
        <td id="file-gistfile1-diff-LC838" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    {</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L839" class="blob-num js-line-number" data-line-number="839"></td>
        <td id="file-gistfile1-diff-LC839" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        va_list ap;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L840" class="blob-num js-line-number" data-line-number="840"></td>
        <td id="file-gistfile1-diff-LC840" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        char str [2048];</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L841" class="blob-num js-line-number" data-line-number="841"></td>
        <td id="file-gistfile1-diff-LC841" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        va_start(ap, format);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L842" class="blob-num js-line-number" data-line-number="842"></td>
        <td id="file-gistfile1-diff-LC842" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        vsnprintf(str, 2048, format, ap);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L843" class="blob-num js-line-number" data-line-number="843"></td>
        <td id="file-gistfile1-diff-LC843" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        va_end(ap);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L844" class="blob-num js-line-number" data-line-number="844"></td>
        <td id="file-gistfile1-diff-LC844" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L845" class="blob-num js-line-number" data-line-number="845"></td>
        <td id="file-gistfile1-diff-LC845" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        ChatHandler(GetSession()).SendSysMessage(str);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L846" class="blob-num js-line-number" data-line-number="846"></td>
        <td id="file-gistfile1-diff-LC846" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L847" class="blob-num js-line-number" data-line-number="847"></td>
        <td id="file-gistfile1-diff-LC847" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>}</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L848" class="blob-num js-line-number" data-line-number="848"></td>
        <td id="file-gistfile1-diff-LC848" class="blob-code blob-code-inner js-file-line"><span class="pl-c1">diff --git a/src/server/game/Cfbg/Cfbg.h b/src/server/game/Cfbg/Cfbg.h</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L849" class="blob-num js-line-number" data-line-number="849"></td>
        <td id="file-gistfile1-diff-LC849" class="blob-code blob-code-inner js-file-line">new file mode 100644</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L850" class="blob-num js-line-number" data-line-number="850"></td>
        <td id="file-gistfile1-diff-LC850" class="blob-code blob-code-inner js-file-line">index 0000000..45567f8</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L851" class="blob-num js-line-number" data-line-number="851"></td>
        <td id="file-gistfile1-diff-LC851" class="blob-code blob-code-inner js-file-line"><span class="pl-md">--- /dev/null</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L852" class="blob-num js-line-number" data-line-number="852"></td>
        <td id="file-gistfile1-diff-LC852" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1">+++ b/src/server/game/Cfbg/Cfbg.h</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L853" class="blob-num js-line-number" data-line-number="853"></td>
        <td id="file-gistfile1-diff-LC853" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -0,0 +1,35 @@</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L854" class="blob-num js-line-number" data-line-number="854"></td>
        <td id="file-gistfile1-diff-LC854" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>#ifndef _CUSTOM_H</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L855" class="blob-num js-line-number" data-line-number="855"></td>
        <td id="file-gistfile1-diff-LC855" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>#define _CUSTOM_H</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L856" class="blob-num js-line-number" data-line-number="856"></td>
        <td id="file-gistfile1-diff-LC856" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L857" class="blob-num js-line-number" data-line-number="857"></td>
        <td id="file-gistfile1-diff-LC857" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>#define MSG_COLOR_LIGHTRED     &quot;|cffff6060&quot;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L858" class="blob-num js-line-number" data-line-number="858"></td>
        <td id="file-gistfile1-diff-LC858" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>#define MSG_COLOR_LIGHTBLUE    &quot;|cff00ccff&quot;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L859" class="blob-num js-line-number" data-line-number="859"></td>
        <td id="file-gistfile1-diff-LC859" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>#define MSG_COLOR_ANN_GREEN    &quot;|c1f40af20&quot;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L860" class="blob-num js-line-number" data-line-number="860"></td>
        <td id="file-gistfile1-diff-LC860" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>#define MSG_COLOR_RED          &quot;|cffff0000&quot;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L861" class="blob-num js-line-number" data-line-number="861"></td>
        <td id="file-gistfile1-diff-LC861" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>#define MSG_COLOR_GOLD         &quot;|cffffcc00&quot;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L862" class="blob-num js-line-number" data-line-number="862"></td>
        <td id="file-gistfile1-diff-LC862" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>#define MSG_COLOR_SUBWHITE     &quot;|cffbbbbbb&quot;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L863" class="blob-num js-line-number" data-line-number="863"></td>
        <td id="file-gistfile1-diff-LC863" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>#define MSG_COLOR_MAGENTA      &quot;|cffff00ff&quot;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L864" class="blob-num js-line-number" data-line-number="864"></td>
        <td id="file-gistfile1-diff-LC864" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>#define MSG_COLOR_YELLOW       &quot;|cffffff00&quot;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L865" class="blob-num js-line-number" data-line-number="865"></td>
        <td id="file-gistfile1-diff-LC865" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>#define MSG_COLOR_CYAN         &quot;|cff00ffff&quot;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L866" class="blob-num js-line-number" data-line-number="866"></td>
        <td id="file-gistfile1-diff-LC866" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>#define MSG_COLOR_DARKBLUE     &quot;|cff0000ff&quot;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L867" class="blob-num js-line-number" data-line-number="867"></td>
        <td id="file-gistfile1-diff-LC867" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L868" class="blob-num js-line-number" data-line-number="868"></td>
        <td id="file-gistfile1-diff-LC868" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>#define MSG_COLOR_GREY         &quot;|cff9d9d9d&quot;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L869" class="blob-num js-line-number" data-line-number="869"></td>
        <td id="file-gistfile1-diff-LC869" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>#define MSG_COLOR_WHITE        &quot;|cffffffff&quot;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L870" class="blob-num js-line-number" data-line-number="870"></td>
        <td id="file-gistfile1-diff-LC870" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>#define MSG_COLOR_GREEN        &quot;|cff1eff00&quot;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L871" class="blob-num js-line-number" data-line-number="871"></td>
        <td id="file-gistfile1-diff-LC871" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>#define MSG_COLOR_BLUE         &quot;|cff0080ff&quot;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L872" class="blob-num js-line-number" data-line-number="872"></td>
        <td id="file-gistfile1-diff-LC872" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>#define MSG_COLOR_PURPLE       &quot;|cffb048f8&quot;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L873" class="blob-num js-line-number" data-line-number="873"></td>
        <td id="file-gistfile1-diff-LC873" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>#define MSG_COLOR_ORANGE       &quot;|cffff8000&quot;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L874" class="blob-num js-line-number" data-line-number="874"></td>
        <td id="file-gistfile1-diff-LC874" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L875" class="blob-num js-line-number" data-line-number="875"></td>
        <td id="file-gistfile1-diff-LC875" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>#define MSG_COLOR_DRUID        &quot;|cffff7d0a&quot;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L876" class="blob-num js-line-number" data-line-number="876"></td>
        <td id="file-gistfile1-diff-LC876" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>#define MSG_COLOR_HUNTER       &quot;|cffabd473&quot;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L877" class="blob-num js-line-number" data-line-number="877"></td>
        <td id="file-gistfile1-diff-LC877" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>#define MSG_COLOR_MAGE         &quot;|cff69ccf0&quot;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L878" class="blob-num js-line-number" data-line-number="878"></td>
        <td id="file-gistfile1-diff-LC878" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>#define MSG_COLOR_PALADIN      &quot;|cfff58cba&quot;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L879" class="blob-num js-line-number" data-line-number="879"></td>
        <td id="file-gistfile1-diff-LC879" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>#define MSG_COLOR_PRIEST       &quot;|cffffffff&quot;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L880" class="blob-num js-line-number" data-line-number="880"></td>
        <td id="file-gistfile1-diff-LC880" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>#define MSG_COLOR_ROGUE        &quot;|cfffff569&quot;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L881" class="blob-num js-line-number" data-line-number="881"></td>
        <td id="file-gistfile1-diff-LC881" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>#define MSG_COLOR_SHAMAN       &quot;|cff0070de&quot;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L882" class="blob-num js-line-number" data-line-number="882"></td>
        <td id="file-gistfile1-diff-LC882" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>#define MSG_COLOR_WARLOCK      &quot;|cff9482c9&quot;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L883" class="blob-num js-line-number" data-line-number="883"></td>
        <td id="file-gistfile1-diff-LC883" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>#define MSG_COLOR_WARRIOR      &quot;|cffc79c6e&quot;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L884" class="blob-num js-line-number" data-line-number="884"></td>
        <td id="file-gistfile1-diff-LC884" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>#define MSG_COLOR_DEATH_KNIGHT &quot;|cffc41f3b&quot;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L885" class="blob-num js-line-number" data-line-number="885"></td>
        <td id="file-gistfile1-diff-LC885" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>#define MSG_COLOR_MONK         &quot;|cff00ff96&quot;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L886" class="blob-num js-line-number" data-line-number="886"></td>
        <td id="file-gistfile1-diff-LC886" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L887" class="blob-num js-line-number" data-line-number="887"></td>
        <td id="file-gistfile1-diff-LC887" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>#define LIMIT_UINT32 2147483647</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L888" class="blob-num js-line-number" data-line-number="888"></td>
        <td id="file-gistfile1-diff-LC888" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>#endif</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L889" class="blob-num js-line-number" data-line-number="889"></td>
        <td id="file-gistfile1-diff-LC889" class="blob-code blob-code-inner js-file-line"><span class="pl-c1">diff --git a/src/server/game/Entities/Player/Player.cpp b/src/server/game/Entities/Player/Player.cpp</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L890" class="blob-num js-line-number" data-line-number="890"></td>
        <td id="file-gistfile1-diff-LC890" class="blob-code blob-code-inner js-file-line">index 8653106..d884da2 100644</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L891" class="blob-num js-line-number" data-line-number="891"></td>
        <td id="file-gistfile1-diff-LC891" class="blob-code blob-code-inner js-file-line"><span class="pl-md">--- a/src/server/game/Entities/Player/Player.cpp</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L892" class="blob-num js-line-number" data-line-number="892"></td>
        <td id="file-gistfile1-diff-LC892" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1">+++ b/src/server/game/Entities/Player/Player.cpp</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L893" class="blob-num js-line-number" data-line-number="893"></td>
        <td id="file-gistfile1-diff-LC893" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -651,6 +651,12 @@</span> void KillRewarder::Reward()</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L894" class="blob-num js-line-number" data-line-number="894"></td>
        <td id="file-gistfile1-diff-LC894" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L895" class="blob-num js-line-number" data-line-number="895"></td>
        <td id="file-gistfile1-diff-LC895" class="blob-code blob-code-inner js-file-line"> Player::Player(WorldSession* session): Unit(true)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L896" class="blob-num js-line-number" data-line-number="896"></td>
        <td id="file-gistfile1-diff-LC896" class="blob-code blob-code-inner js-file-line"> {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L897" class="blob-num js-line-number" data-line-number="897"></td>
        <td id="file-gistfile1-diff-LC897" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    m_FakeRace = 0;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L898" class="blob-num js-line-number" data-line-number="898"></td>
        <td id="file-gistfile1-diff-LC898" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    m_RealRace = 0;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L899" class="blob-num js-line-number" data-line-number="899"></td>
        <td id="file-gistfile1-diff-LC899" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    m_FakeMorph = 0;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L900" class="blob-num js-line-number" data-line-number="900"></td>
        <td id="file-gistfile1-diff-LC900" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    m_ForgetBGPlayers = false;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L901" class="blob-num js-line-number" data-line-number="901"></td>
        <td id="file-gistfile1-diff-LC901" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    m_ForgetInListPlayers = false;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L902" class="blob-num js-line-number" data-line-number="902"></td>
        <td id="file-gistfile1-diff-LC902" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L903" class="blob-num js-line-number" data-line-number="903"></td>
        <td id="file-gistfile1-diff-LC903" class="blob-code blob-code-inner js-file-line">     m_speakTime = 0;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L904" class="blob-num js-line-number" data-line-number="904"></td>
        <td id="file-gistfile1-diff-LC904" class="blob-code blob-code-inner js-file-line">     m_speakCount = 0;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L905" class="blob-num js-line-number" data-line-number="905"></td>
        <td id="file-gistfile1-diff-LC905" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L906" class="blob-num js-line-number" data-line-number="906"></td>
        <td id="file-gistfile1-diff-LC906" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -1001,6 +1007,12 @@</span> bool Player::Create(uint32 guidlow, CharacterCreateInfo* createInfo)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L907" class="blob-num js-line-number" data-line-number="907"></td>
        <td id="file-gistfile1-diff-LC907" class="blob-code blob-code-inner js-file-line">     uint32 RaceClassGender = (createInfo-&gt;Race) | (createInfo-&gt;Class &lt;&lt; 8) | (createInfo-&gt;Gender &lt;&lt; 16);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L908" class="blob-num js-line-number" data-line-number="908"></td>
        <td id="file-gistfile1-diff-LC908" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L909" class="blob-num js-line-number" data-line-number="909"></td>
        <td id="file-gistfile1-diff-LC909" class="blob-code blob-code-inner js-file-line">     SetUInt32Value(UNIT_FIELD_BYTES_0, (RaceClassGender | (powertype &lt;&lt; 24)));</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L910" class="blob-num js-line-number" data-line-number="910"></td>
        <td id="file-gistfile1-diff-LC910" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L911" class="blob-num js-line-number" data-line-number="911"></td>
        <td id="file-gistfile1-diff-LC911" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    SetORace();</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L912" class="blob-num js-line-number" data-line-number="912"></td>
        <td id="file-gistfile1-diff-LC912" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    m_team = TeamForRace(getORace());</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L913" class="blob-num js-line-number" data-line-number="913"></td>
        <td id="file-gistfile1-diff-LC913" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    SetFakeRaceAndMorph(); // m_team must be set before this can be used.</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L914" class="blob-num js-line-number" data-line-number="914"></td>
        <td id="file-gistfile1-diff-LC914" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    setFactionForRace(getORace());</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L915" class="blob-num js-line-number" data-line-number="915"></td>
        <td id="file-gistfile1-diff-LC915" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L916" class="blob-num js-line-number" data-line-number="916"></td>
        <td id="file-gistfile1-diff-LC916" class="blob-code blob-code-inner js-file-line">     InitDisplayIds();</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L917" class="blob-num js-line-number" data-line-number="917"></td>
        <td id="file-gistfile1-diff-LC917" class="blob-code blob-code-inner js-file-line">     if (sWorld-&gt;getIntConfig(CONFIG_GAME_TYPE) == REALM_TYPE_PVP || sWorld-&gt;getIntConfig(CONFIG_GAME_TYPE) == REALM_TYPE_RPPVP)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L918" class="blob-num js-line-number" data-line-number="918"></td>
        <td id="file-gistfile1-diff-LC918" class="blob-code blob-code-inner js-file-line">     {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L919" class="blob-num js-line-number" data-line-number="919"></td>
        <td id="file-gistfile1-diff-LC919" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -3017,7 +3029,7 @@</span> void Player::GiveLevel(uint8 level)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L920" class="blob-num js-line-number" data-line-number="920"></td>
        <td id="file-gistfile1-diff-LC920" class="blob-code blob-code-inner js-file-line">         guild-&gt;UpdateMemberData(this, GUILD_MEMBER_DATA_LEVEL, level);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L921" class="blob-num js-line-number" data-line-number="921"></td>
        <td id="file-gistfile1-diff-LC921" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L922" class="blob-num js-line-number" data-line-number="922"></td>
        <td id="file-gistfile1-diff-LC922" class="blob-code blob-code-inner js-file-line">     PlayerLevelInfo info;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L923" class="blob-num js-line-number" data-line-number="923"></td>
        <td id="file-gistfile1-diff-LC923" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>    sObjectMgr-&gt;GetPlayerLevelInfo(getRace(), getClass(), level, &amp;info);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L924" class="blob-num js-line-number" data-line-number="924"></td>
        <td id="file-gistfile1-diff-LC924" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    sObjectMgr-&gt;GetPlayerLevelInfo(getORace(), getClass(), level, &amp;info);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L925" class="blob-num js-line-number" data-line-number="925"></td>
        <td id="file-gistfile1-diff-LC925" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L926" class="blob-num js-line-number" data-line-number="926"></td>
        <td id="file-gistfile1-diff-LC926" class="blob-code blob-code-inner js-file-line">     PlayerClassLevelInfo classInfo;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L927" class="blob-num js-line-number" data-line-number="927"></td>
        <td id="file-gistfile1-diff-LC927" class="blob-code blob-code-inner js-file-line">     sObjectMgr-&gt;GetPlayerClassLevelInfo(getClass(), level, &amp;classInfo);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L928" class="blob-num js-line-number" data-line-number="928"></td>
        <td id="file-gistfile1-diff-LC928" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -3155,7 +3167,7 @@</span> void Player::InitStatsForLevel(bool reapplyMods)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L929" class="blob-num js-line-number" data-line-number="929"></td>
        <td id="file-gistfile1-diff-LC929" class="blob-code blob-code-inner js-file-line">     sObjectMgr-&gt;GetPlayerClassLevelInfo(getClass(), getLevel(), &amp;classInfo);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L930" class="blob-num js-line-number" data-line-number="930"></td>
        <td id="file-gistfile1-diff-LC930" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L931" class="blob-num js-line-number" data-line-number="931"></td>
        <td id="file-gistfile1-diff-LC931" class="blob-code blob-code-inner js-file-line">     PlayerLevelInfo info;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L932" class="blob-num js-line-number" data-line-number="932"></td>
        <td id="file-gistfile1-diff-LC932" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>    sObjectMgr-&gt;GetPlayerLevelInfo(getRace(), getClass(), getLevel(), &amp;info);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L933" class="blob-num js-line-number" data-line-number="933"></td>
        <td id="file-gistfile1-diff-LC933" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    sObjectMgr-&gt;GetPlayerLevelInfo(getORace(), getClass(), getLevel(), &amp;info);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L934" class="blob-num js-line-number" data-line-number="934"></td>
        <td id="file-gistfile1-diff-LC934" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L935" class="blob-num js-line-number" data-line-number="935"></td>
        <td id="file-gistfile1-diff-LC935" class="blob-code blob-code-inner js-file-line">     SetUInt32Value(PLAYER_FIELD_MAX_LEVEL, sWorld-&gt;getIntConfig(CONFIG_MAX_PLAYER_LEVEL));</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L936" class="blob-num js-line-number" data-line-number="936"></td>
        <td id="file-gistfile1-diff-LC936" class="blob-code blob-code-inner js-file-line">     SetUInt32Value(PLAYER_NEXT_LEVEL_XP, sObjectMgr-&gt;GetXPForLevel(getLevel()));</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L937" class="blob-num js-line-number" data-line-number="937"></td>
        <td id="file-gistfile1-diff-LC937" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -5254,7 +5266,7 @@</span> void Player::CreateCorpse()</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L938" class="blob-num js-line-number" data-line-number="938"></td>
        <td id="file-gistfile1-diff-LC938" class="blob-code blob-code-inner js-file-line">         return;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L939" class="blob-num js-line-number" data-line-number="939"></td>
        <td id="file-gistfile1-diff-LC939" class="blob-code blob-code-inner js-file-line">     }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L940" class="blob-num js-line-number" data-line-number="940"></td>
        <td id="file-gistfile1-diff-LC940" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L941" class="blob-num js-line-number" data-line-number="941"></td>
        <td id="file-gistfile1-diff-LC941" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>    _uf = GetUInt32Value(UNIT_FIELD_BYTES_0);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L942" class="blob-num js-line-number" data-line-number="942"></td>
        <td id="file-gistfile1-diff-LC942" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    _uf = getORace();</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L943" class="blob-num js-line-number" data-line-number="943"></td>
        <td id="file-gistfile1-diff-LC943" class="blob-code blob-code-inner js-file-line">     _pb = GetUInt32Value(PLAYER_BYTES);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L944" class="blob-num js-line-number" data-line-number="944"></td>
        <td id="file-gistfile1-diff-LC944" class="blob-code blob-code-inner js-file-line">     _pb2 = GetUInt32Value(PLAYER_BYTES_2);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L945" class="blob-num js-line-number" data-line-number="945"></td>
        <td id="file-gistfile1-diff-LC945" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L946" class="blob-num js-line-number" data-line-number="946"></td>
        <td id="file-gistfile1-diff-LC946" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -6924,10 +6936,10 @@</span> uint32 Player::TeamForRace(uint8 race)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L947" class="blob-num js-line-number" data-line-number="947"></td>
        <td id="file-gistfile1-diff-LC947" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L948" class="blob-num js-line-number" data-line-number="948"></td>
        <td id="file-gistfile1-diff-LC948" class="blob-code blob-code-inner js-file-line"> void Player::setFactionForRace(uint8 race)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L949" class="blob-num js-line-number" data-line-number="949"></td>
        <td id="file-gistfile1-diff-LC949" class="blob-code blob-code-inner js-file-line"> {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L950" class="blob-num js-line-number" data-line-number="950"></td>
        <td id="file-gistfile1-diff-LC950" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>    m_team = TeamForRace(race);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L951" class="blob-num js-line-number" data-line-number="951"></td>
        <td id="file-gistfile1-diff-LC951" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    SetBGTeam(TeamForRace(race));</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L952" class="blob-num js-line-number" data-line-number="952"></td>
        <td id="file-gistfile1-diff-LC952" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L953" class="blob-num js-line-number" data-line-number="953"></td>
        <td id="file-gistfile1-diff-LC953" class="blob-code blob-code-inner js-file-line">     ChrRacesEntry const* rEntry = sChrRacesStore.LookupEntry(race);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L954" class="blob-num js-line-number" data-line-number="954"></td>
        <td id="file-gistfile1-diff-LC954" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>    setFaction(rEntry ? rEntry-&gt;FactionID : 0);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L955" class="blob-num js-line-number" data-line-number="955"></td>
        <td id="file-gistfile1-diff-LC955" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    setFaction(rEntry ? rEntry-&gt;FactionID : getFaction());</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L956" class="blob-num js-line-number" data-line-number="956"></td>
        <td id="file-gistfile1-diff-LC956" class="blob-code blob-code-inner js-file-line"> }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L957" class="blob-num js-line-number" data-line-number="957"></td>
        <td id="file-gistfile1-diff-LC957" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L958" class="blob-num js-line-number" data-line-number="958"></td>
        <td id="file-gistfile1-diff-LC958" class="blob-code blob-code-inner js-file-line"> ReputationRank Player::GetReputationRank(uint32 faction) const</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L959" class="blob-num js-line-number" data-line-number="959"></td>
        <td id="file-gistfile1-diff-LC959" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -7029,6 +7041,27 @@</span> void Player::RewardReputation(Unit* victim, float rate)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L960" class="blob-num js-line-number" data-line-number="960"></td>
        <td id="file-gistfile1-diff-LC960" class="blob-code blob-code-inner js-file-line">     if (!Rep)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L961" class="blob-num js-line-number" data-line-number="961"></td>
        <td id="file-gistfile1-diff-LC961" class="blob-code blob-code-inner js-file-line">         return;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L962" class="blob-num js-line-number" data-line-number="962"></td>
        <td id="file-gistfile1-diff-LC962" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L963" class="blob-num js-line-number" data-line-number="963"></td>
        <td id="file-gistfile1-diff-LC963" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    uint32 repfaction1 = Rep-&gt;RepFaction1;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L964" class="blob-num js-line-number" data-line-number="964"></td>
        <td id="file-gistfile1-diff-LC964" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    uint32 repfaction2 = Rep-&gt;RepFaction2;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L965" class="blob-num js-line-number" data-line-number="965"></td>
        <td id="file-gistfile1-diff-LC965" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L966" class="blob-num js-line-number" data-line-number="966"></td>
        <td id="file-gistfile1-diff-LC966" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    if (!IsPlayingNative())</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L967" class="blob-num js-line-number" data-line-number="967"></td>
        <td id="file-gistfile1-diff-LC967" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    {</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L968" class="blob-num js-line-number" data-line-number="968"></td>
        <td id="file-gistfile1-diff-LC968" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        if (GetOTeam() == ALLIANCE)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L969" class="blob-num js-line-number" data-line-number="969"></td>
        <td id="file-gistfile1-diff-LC969" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        {</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L970" class="blob-num js-line-number" data-line-number="970"></td>
        <td id="file-gistfile1-diff-LC970" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            if (repfaction1 == 729)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L971" class="blob-num js-line-number" data-line-number="971"></td>
        <td id="file-gistfile1-diff-LC971" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                repfaction1 = 730;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L972" class="blob-num js-line-number" data-line-number="972"></td>
        <td id="file-gistfile1-diff-LC972" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            if (repfaction2 == 729)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L973" class="blob-num js-line-number" data-line-number="973"></td>
        <td id="file-gistfile1-diff-LC973" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                repfaction2 = 730;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L974" class="blob-num js-line-number" data-line-number="974"></td>
        <td id="file-gistfile1-diff-LC974" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L975" class="blob-num js-line-number" data-line-number="975"></td>
        <td id="file-gistfile1-diff-LC975" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        else</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L976" class="blob-num js-line-number" data-line-number="976"></td>
        <td id="file-gistfile1-diff-LC976" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        {</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L977" class="blob-num js-line-number" data-line-number="977"></td>
        <td id="file-gistfile1-diff-LC977" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            if (repfaction1 == 730)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L978" class="blob-num js-line-number" data-line-number="978"></td>
        <td id="file-gistfile1-diff-LC978" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                repfaction1 = 729;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L979" class="blob-num js-line-number" data-line-number="979"></td>
        <td id="file-gistfile1-diff-LC979" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            if (repfaction2 == 730)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L980" class="blob-num js-line-number" data-line-number="980"></td>
        <td id="file-gistfile1-diff-LC980" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                repfaction2 = 729;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L981" class="blob-num js-line-number" data-line-number="981"></td>
        <td id="file-gistfile1-diff-LC981" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L982" class="blob-num js-line-number" data-line-number="982"></td>
        <td id="file-gistfile1-diff-LC982" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L983" class="blob-num js-line-number" data-line-number="983"></td>
        <td id="file-gistfile1-diff-LC983" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L984" class="blob-num js-line-number" data-line-number="984"></td>
        <td id="file-gistfile1-diff-LC984" class="blob-code blob-code-inner js-file-line">     uint32 ChampioningFaction = 0;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L985" class="blob-num js-line-number" data-line-number="985"></td>
        <td id="file-gistfile1-diff-LC985" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L986" class="blob-num js-line-number" data-line-number="986"></td>
        <td id="file-gistfile1-diff-LC986" class="blob-code blob-code-inner js-file-line">     if (GetChampioningFaction())</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L987" class="blob-num js-line-number" data-line-number="987"></td>
        <td id="file-gistfile1-diff-LC987" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -7043,23 +7076,23 @@</span> void Player::RewardReputation(Unit* victim, float rate)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L988" class="blob-num js-line-number" data-line-number="988"></td>
        <td id="file-gistfile1-diff-LC988" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L989" class="blob-num js-line-number" data-line-number="989"></td>
        <td id="file-gistfile1-diff-LC989" class="blob-code blob-code-inner js-file-line">     uint32 team = GetTeam();</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L990" class="blob-num js-line-number" data-line-number="990"></td>
        <td id="file-gistfile1-diff-LC990" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L991" class="blob-num js-line-number" data-line-number="991"></td>
        <td id="file-gistfile1-diff-LC991" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>    if (Rep-&gt;RepFaction1 &amp;&amp; (!Rep-&gt;TeamDependent || team == ALLIANCE))</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L992" class="blob-num js-line-number" data-line-number="992"></td>
        <td id="file-gistfile1-diff-LC992" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    if (repfaction1 &amp;&amp; (!Rep-&gt;TeamDependent || team == ALLIANCE))</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L993" class="blob-num js-line-number" data-line-number="993"></td>
        <td id="file-gistfile1-diff-LC993" class="blob-code blob-code-inner js-file-line">     {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L994" class="blob-num js-line-number" data-line-number="994"></td>
        <td id="file-gistfile1-diff-LC994" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>        int32 donerep1 = CalculateReputationGain(REPUTATION_SOURCE_KILL, victim-&gt;getLevel(), Rep-&gt;RepValue1, ChampioningFaction ? ChampioningFaction : Rep-&gt;RepFaction1);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L995" class="blob-num js-line-number" data-line-number="995"></td>
        <td id="file-gistfile1-diff-LC995" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        int32 donerep1 = CalculateReputationGain(REPUTATION_SOURCE_KILL, victim-&gt;getLevel(), Rep-&gt;RepValue1, ChampioningFaction ? ChampioningFaction : repfaction1);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L996" class="blob-num js-line-number" data-line-number="996"></td>
        <td id="file-gistfile1-diff-LC996" class="blob-code blob-code-inner js-file-line">         donerep1 = int32(donerep1 * rate);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L997" class="blob-num js-line-number" data-line-number="997"></td>
        <td id="file-gistfile1-diff-LC997" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L998" class="blob-num js-line-number" data-line-number="998"></td>
        <td id="file-gistfile1-diff-LC998" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>        FactionEntry const* factionEntry1 = sFactionStore.LookupEntry(ChampioningFaction ? ChampioningFaction : Rep-&gt;RepFaction1);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L999" class="blob-num js-line-number" data-line-number="999"></td>
        <td id="file-gistfile1-diff-LC999" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        FactionEntry const* factionEntry1 = sFactionStore.LookupEntry(ChampioningFaction ? ChampioningFaction : repfaction1);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1000" class="blob-num js-line-number" data-line-number="1000"></td>
        <td id="file-gistfile1-diff-LC1000" class="blob-code blob-code-inner js-file-line">         uint32 current_reputation_rank1 = GetReputationMgr().GetRank(factionEntry1);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1001" class="blob-num js-line-number" data-line-number="1001"></td>
        <td id="file-gistfile1-diff-LC1001" class="blob-code blob-code-inner js-file-line">         if (factionEntry1 &amp;&amp; current_reputation_rank1 &lt;= Rep-&gt;ReputationMaxCap1)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1002" class="blob-num js-line-number" data-line-number="1002"></td>
        <td id="file-gistfile1-diff-LC1002" class="blob-code blob-code-inner js-file-line">             GetReputationMgr().ModifyReputation(factionEntry1, donerep1);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1003" class="blob-num js-line-number" data-line-number="1003"></td>
        <td id="file-gistfile1-diff-LC1003" class="blob-code blob-code-inner js-file-line">     }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1004" class="blob-num js-line-number" data-line-number="1004"></td>
        <td id="file-gistfile1-diff-LC1004" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1005" class="blob-num js-line-number" data-line-number="1005"></td>
        <td id="file-gistfile1-diff-LC1005" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>    if (Rep-&gt;RepFaction2 &amp;&amp; (!Rep-&gt;TeamDependent || team == HORDE))</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1006" class="blob-num js-line-number" data-line-number="1006"></td>
        <td id="file-gistfile1-diff-LC1006" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    if (repfaction2 &amp;&amp; (!Rep-&gt;TeamDependent || team == HORDE))</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1007" class="blob-num js-line-number" data-line-number="1007"></td>
        <td id="file-gistfile1-diff-LC1007" class="blob-code blob-code-inner js-file-line">     {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1008" class="blob-num js-line-number" data-line-number="1008"></td>
        <td id="file-gistfile1-diff-LC1008" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>        int32 donerep2 = CalculateReputationGain(REPUTATION_SOURCE_KILL, victim-&gt;getLevel(), Rep-&gt;RepValue2, ChampioningFaction ? ChampioningFaction : Rep-&gt;RepFaction2);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1009" class="blob-num js-line-number" data-line-number="1009"></td>
        <td id="file-gistfile1-diff-LC1009" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        int32 donerep2 = CalculateReputationGain(REPUTATION_SOURCE_KILL, victim-&gt;getLevel(), Rep-&gt;RepValue2, ChampioningFaction ? ChampioningFaction : repfaction2);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1010" class="blob-num js-line-number" data-line-number="1010"></td>
        <td id="file-gistfile1-diff-LC1010" class="blob-code blob-code-inner js-file-line">         donerep2 = int32(donerep2 * rate);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1011" class="blob-num js-line-number" data-line-number="1011"></td>
        <td id="file-gistfile1-diff-LC1011" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1012" class="blob-num js-line-number" data-line-number="1012"></td>
        <td id="file-gistfile1-diff-LC1012" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>        FactionEntry const* factionEntry2 = sFactionStore.LookupEntry(ChampioningFaction ? ChampioningFaction : Rep-&gt;RepFaction2);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1013" class="blob-num js-line-number" data-line-number="1013"></td>
        <td id="file-gistfile1-diff-LC1013" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        FactionEntry const* factionEntry2 = sFactionStore.LookupEntry(ChampioningFaction ? ChampioningFaction : repfaction2);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1014" class="blob-num js-line-number" data-line-number="1014"></td>
        <td id="file-gistfile1-diff-LC1014" class="blob-code blob-code-inner js-file-line">         uint32 current_reputation_rank2 = GetReputationMgr().GetRank(factionEntry2);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1015" class="blob-num js-line-number" data-line-number="1015"></td>
        <td id="file-gistfile1-diff-LC1015" class="blob-code blob-code-inner js-file-line">         if (factionEntry2 &amp;&amp; current_reputation_rank2 &lt;= Rep-&gt;ReputationMaxCap2)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1016" class="blob-num js-line-number" data-line-number="1016"></td>
        <td id="file-gistfile1-diff-LC1016" class="blob-code blob-code-inner js-file-line">             GetReputationMgr().ModifyReputation(factionEntry2, donerep2);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1017" class="blob-num js-line-number" data-line-number="1017"></td>
        <td id="file-gistfile1-diff-LC1017" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -7154,7 +7187,7 @@</span> bool Player::RewardHonor(Unit* victim, uint32 groupsize, int32 honor, bool pvpto</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1018" class="blob-num js-line-number" data-line-number="1018"></td>
        <td id="file-gistfile1-diff-LC1018" class="blob-code blob-code-inner js-file-line">         if (!victim || victim == this || victim-&gt;GetTypeId() != TYPEID_PLAYER)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1019" class="blob-num js-line-number" data-line-number="1019"></td>
        <td id="file-gistfile1-diff-LC1019" class="blob-code blob-code-inner js-file-line">             return false;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1020" class="blob-num js-line-number" data-line-number="1020"></td>
        <td id="file-gistfile1-diff-LC1020" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1021" class="blob-num js-line-number" data-line-number="1021"></td>
        <td id="file-gistfile1-diff-LC1021" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>        if (GetBGTeam() == victim-&gt;ToPlayer()-&gt;GetBGTeam())</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1022" class="blob-num js-line-number" data-line-number="1022"></td>
        <td id="file-gistfile1-diff-LC1022" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        if (GetTeam() == victim-&gt;ToPlayer()-&gt;GetTeam())</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1023" class="blob-num js-line-number" data-line-number="1023"></td>
        <td id="file-gistfile1-diff-LC1023" class="blob-code blob-code-inner js-file-line">             return false;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1024" class="blob-num js-line-number" data-line-number="1024"></td>
        <td id="file-gistfile1-diff-LC1024" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1025" class="blob-num js-line-number" data-line-number="1025"></td>
        <td id="file-gistfile1-diff-LC1025" class="blob-code blob-code-inner js-file-line">         return true;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1026" class="blob-num js-line-number" data-line-number="1026"></td>
        <td id="file-gistfile1-diff-LC1026" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -7478,7 +7511,7 @@</span> void Player::UpdateArea(uint32 newArea)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1027" class="blob-num js-line-number" data-line-number="1027"></td>
        <td id="file-gistfile1-diff-LC1027" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1028" class="blob-num js-line-number" data-line-number="1028"></td>
        <td id="file-gistfile1-diff-LC1028" class="blob-code blob-code-inner js-file-line">     // previously this was in UpdateZone (but after UpdateArea) so nothing will break</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1029" class="blob-num js-line-number" data-line-number="1029"></td>
        <td id="file-gistfile1-diff-LC1029" class="blob-code blob-code-inner js-file-line">     pvpInfo.IsInNoPvPArea = false;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1030" class="blob-num js-line-number" data-line-number="1030"></td>
        <td id="file-gistfile1-diff-LC1030" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>    if (area &amp;&amp; area-&gt;IsSanctuary())    // in sanctuary</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1031" class="blob-num js-line-number" data-line-number="1031"></td>
        <td id="file-gistfile1-diff-LC1031" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    if(area &amp;&amp; area-&gt;IsSanctuary() || GetAreaId() == 4413)    // in sanctuary</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1032" class="blob-num js-line-number" data-line-number="1032"></td>
        <td id="file-gistfile1-diff-LC1032" class="blob-code blob-code-inner js-file-line">     {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1033" class="blob-num js-line-number" data-line-number="1033"></td>
        <td id="file-gistfile1-diff-LC1033" class="blob-code blob-code-inner js-file-line">         SetByteFlag(UNIT_FIELD_BYTES_2, 1, UNIT_BYTE2_FLAG_SANCTUARY);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1034" class="blob-num js-line-number" data-line-number="1034"></td>
        <td id="file-gistfile1-diff-LC1034" class="blob-code blob-code-inner js-file-line">         pvpInfo.IsInNoPvPArea = true;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1035" class="blob-num js-line-number" data-line-number="1035"></td>
        <td id="file-gistfile1-diff-LC1035" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -11987,13 +12020,13 @@</span> InventoryResult Player::CanUseItem(ItemTemplate const* proto) const</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1036" class="blob-num js-line-number" data-line-number="1036"></td>
        <td id="file-gistfile1-diff-LC1036" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1037" class="blob-num js-line-number" data-line-number="1037"></td>
        <td id="file-gistfile1-diff-LC1037" class="blob-code blob-code-inner js-file-line">     if (proto)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1038" class="blob-num js-line-number" data-line-number="1038"></td>
        <td id="file-gistfile1-diff-LC1038" class="blob-code blob-code-inner js-file-line">     {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1039" class="blob-num js-line-number" data-line-number="1039"></td>
        <td id="file-gistfile1-diff-LC1039" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>        if ((proto-&gt;Flags2 &amp; ITEM_FLAGS_EXTRA_HORDE_ONLY) &amp;&amp; GetTeam() != HORDE)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1040" class="blob-num js-line-number" data-line-number="1040"></td>
        <td id="file-gistfile1-diff-LC1040" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        if ((proto-&gt;Flags2 &amp; ITEM_FLAGS_EXTRA_HORDE_ONLY) &amp;&amp; GetOTeam() != HORDE)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1041" class="blob-num js-line-number" data-line-number="1041"></td>
        <td id="file-gistfile1-diff-LC1041" class="blob-code blob-code-inner js-file-line">             return EQUIP_ERR_YOU_CAN_NEVER_USE_THAT_ITEM;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1042" class="blob-num js-line-number" data-line-number="1042"></td>
        <td id="file-gistfile1-diff-LC1042" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1043" class="blob-num js-line-number" data-line-number="1043"></td>
        <td id="file-gistfile1-diff-LC1043" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>        if ((proto-&gt;Flags2 &amp; ITEM_FLAGS_EXTRA_ALLIANCE_ONLY) &amp;&amp; GetTeam() != ALLIANCE)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1044" class="blob-num js-line-number" data-line-number="1044"></td>
        <td id="file-gistfile1-diff-LC1044" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        if ((proto-&gt;Flags2 &amp; ITEM_FLAGS_EXTRA_ALLIANCE_ONLY) &amp;&amp; GetOTeam() != ALLIANCE)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1045" class="blob-num js-line-number" data-line-number="1045"></td>
        <td id="file-gistfile1-diff-LC1045" class="blob-code blob-code-inner js-file-line">             return EQUIP_ERR_YOU_CAN_NEVER_USE_THAT_ITEM;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1046" class="blob-num js-line-number" data-line-number="1046"></td>
        <td id="file-gistfile1-diff-LC1046" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1047" class="blob-num js-line-number" data-line-number="1047"></td>
        <td id="file-gistfile1-diff-LC1047" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>        if ((proto-&gt;AllowableClass &amp; getClassMask()) == 0 || (proto-&gt;AllowableRace &amp; getRaceMask()) == 0)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1048" class="blob-num js-line-number" data-line-number="1048"></td>
        <td id="file-gistfile1-diff-LC1048" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        if ((proto-&gt;AllowableClass &amp; getClassMask()) == 0 || (proto-&gt;AllowableRace &amp; getORaceMask()) == 0)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1049" class="blob-num js-line-number" data-line-number="1049"></td>
        <td id="file-gistfile1-diff-LC1049" class="blob-code blob-code-inner js-file-line">             return EQUIP_ERR_YOU_CAN_NEVER_USE_THAT_ITEM;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1050" class="blob-num js-line-number" data-line-number="1050"></td>
        <td id="file-gistfile1-diff-LC1050" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1051" class="blob-num js-line-number" data-line-number="1051"></td>
        <td id="file-gistfile1-diff-LC1051" class="blob-code blob-code-inner js-file-line">         if (proto-&gt;RequiredSkill != 0)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1052" class="blob-num js-line-number" data-line-number="1052"></td>
        <td id="file-gistfile1-diff-LC1052" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -17231,6 +17264,11 @@</span> bool Player::LoadFromDB(uint32 guid, SQLQueryHolder *holder)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1053" class="blob-num js-line-number" data-line-number="1053"></td>
        <td id="file-gistfile1-diff-LC1053" class="blob-code blob-code-inner js-file-line">         return false;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1054" class="blob-num js-line-number" data-line-number="1054"></td>
        <td id="file-gistfile1-diff-LC1054" class="blob-code blob-code-inner js-file-line">     }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1055" class="blob-num js-line-number" data-line-number="1055"></td>
        <td id="file-gistfile1-diff-LC1055" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1056" class="blob-num js-line-number" data-line-number="1056"></td>
        <td id="file-gistfile1-diff-LC1056" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    SetORace();</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1057" class="blob-num js-line-number" data-line-number="1057"></td>
        <td id="file-gistfile1-diff-LC1057" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    m_team = TeamForRace(getORace());</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1058" class="blob-num js-line-number" data-line-number="1058"></td>
        <td id="file-gistfile1-diff-LC1058" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    SetFakeRaceAndMorph(); // m_team must be set before this can be used.</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1059" class="blob-num js-line-number" data-line-number="1059"></td>
        <td id="file-gistfile1-diff-LC1059" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    setFactionForRace(getORace());//Need to call it to initialize m_team (m_team can be calculated from race)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1060" class="blob-num js-line-number" data-line-number="1060"></td>
        <td id="file-gistfile1-diff-LC1060" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1061" class="blob-num js-line-number" data-line-number="1061"></td>
        <td id="file-gistfile1-diff-LC1061" class="blob-code blob-code-inner js-file-line">     SetUInt32Value(UNIT_FIELD_LEVEL, fields[6].GetUInt8());</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1062" class="blob-num js-line-number" data-line-number="1062"></td>
        <td id="file-gistfile1-diff-LC1062" class="blob-code blob-code-inner js-file-line">     SetUInt32Value(PLAYER_XP, fields[7].GetUInt32());</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1063" class="blob-num js-line-number" data-line-number="1063"></td>
        <td id="file-gistfile1-diff-LC1063" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1064" class="blob-num js-line-number" data-line-number="1064"></td>
        <td id="file-gistfile1-diff-LC1064" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -17277,10 +17315,6 @@</span> bool Player::LoadFromDB(uint32 guid, SQLQueryHolder *holder)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1065" class="blob-num js-line-number" data-line-number="1065"></td>
        <td id="file-gistfile1-diff-LC1065" class="blob-code blob-code-inner js-file-line">     TC_LOG_DEBUG(&quot;entities.player.loading&quot;, &quot;Load Basic value of player %s is: &quot;, m_name.c_str());</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1066" class="blob-num js-line-number" data-line-number="1066"></td>
        <td id="file-gistfile1-diff-LC1066" class="blob-code blob-code-inner js-file-line">     outDebugValues();</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1067" class="blob-num js-line-number" data-line-number="1067"></td>
        <td id="file-gistfile1-diff-LC1067" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1068" class="blob-num js-line-number" data-line-number="1068"></td>
        <td id="file-gistfile1-diff-LC1068" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>    //Need to call it to initialize m_team (m_team can be calculated from race)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1069" class="blob-num js-line-number" data-line-number="1069"></td>
        <td id="file-gistfile1-diff-LC1069" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>    //Other way is to saves m_team into characters table.</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1070" class="blob-num js-line-number" data-line-number="1070"></td>
        <td id="file-gistfile1-diff-LC1070" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>    setFactionForRace(getRace());</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1071" class="blob-num js-line-number" data-line-number="1071"></td>
        <td id="file-gistfile1-diff-LC1071" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1072" class="blob-num js-line-number" data-line-number="1072"></td>
        <td id="file-gistfile1-diff-LC1072" class="blob-code blob-code-inner js-file-line">     // load home bind and check in same time class/race pair, it used later for restore broken positions</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1073" class="blob-num js-line-number" data-line-number="1073"></td>
        <td id="file-gistfile1-diff-LC1073" class="blob-code blob-code-inner js-file-line">     if (!_LoadHomeBind(holder-&gt;GetPreparedResult(PLAYER_LOGIN_QUERY_LOAD_HOME_BIND)))</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1074" class="blob-num js-line-number" data-line-number="1074"></td>
        <td id="file-gistfile1-diff-LC1074" class="blob-code blob-code-inner js-file-line">         return false;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1075" class="blob-num js-line-number" data-line-number="1075"></td>
        <td id="file-gistfile1-diff-LC1075" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -17547,7 +17581,7 @@</span> bool Player::LoadFromDB(uint32 guid, SQLQueryHolder *holder)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1076" class="blob-num js-line-number" data-line-number="1076"></td>
        <td id="file-gistfile1-diff-LC1076" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1077" class="blob-num js-line-number" data-line-number="1077"></td>
        <td id="file-gistfile1-diff-LC1077" class="blob-code blob-code-inner js-file-line">     if (!map)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1078" class="blob-num js-line-number" data-line-number="1078"></td>
        <td id="file-gistfile1-diff-LC1078" class="blob-code blob-code-inner js-file-line">     {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1079" class="blob-num js-line-number" data-line-number="1079"></td>
        <td id="file-gistfile1-diff-LC1079" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>        PlayerInfo const* info = sObjectMgr-&gt;GetPlayerInfo(getRace(), getClass());</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1080" class="blob-num js-line-number" data-line-number="1080"></td>
        <td id="file-gistfile1-diff-LC1080" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        PlayerInfo const* info = sObjectMgr-&gt;GetPlayerInfo(getORace(), getClass());</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1081" class="blob-num js-line-number" data-line-number="1081"></td>
        <td id="file-gistfile1-diff-LC1081" class="blob-code blob-code-inner js-file-line">         mapId = info-&gt;mapId;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1082" class="blob-num js-line-number" data-line-number="1082"></td>
        <td id="file-gistfile1-diff-LC1082" class="blob-code blob-code-inner js-file-line">         Relocate(info-&gt;positionX, info-&gt;positionY, info-&gt;positionZ, 0.0f);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1083" class="blob-num js-line-number" data-line-number="1083"></td>
        <td id="file-gistfile1-diff-LC1083" class="blob-code blob-code-inner js-file-line">         map = sMapMgr-&gt;CreateMap(mapId, this);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1084" class="blob-num js-line-number" data-line-number="1084"></td>
        <td id="file-gistfile1-diff-LC1084" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -19197,7 +19231,7 @@</span> void Player::SaveToDB(bool create /*=false*/)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1085" class="blob-num js-line-number" data-line-number="1085"></td>
        <td id="file-gistfile1-diff-LC1085" class="blob-code blob-code-inner js-file-line">         stmt-&gt;setUInt32(index++, GetGUIDLow());</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1086" class="blob-num js-line-number" data-line-number="1086"></td>
        <td id="file-gistfile1-diff-LC1086" class="blob-code blob-code-inner js-file-line">         stmt-&gt;setUInt32(index++, GetSession()-&gt;GetAccountId());</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1087" class="blob-num js-line-number" data-line-number="1087"></td>
        <td id="file-gistfile1-diff-LC1087" class="blob-code blob-code-inner js-file-line">         stmt-&gt;setString(index++, GetName());</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1088" class="blob-num js-line-number" data-line-number="1088"></td>
        <td id="file-gistfile1-diff-LC1088" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>        stmt-&gt;setUInt8(index++, getRace());</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1089" class="blob-num js-line-number" data-line-number="1089"></td>
        <td id="file-gistfile1-diff-LC1089" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        stmt-&gt;setUInt8(index++, getORace());</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1090" class="blob-num js-line-number" data-line-number="1090"></td>
        <td id="file-gistfile1-diff-LC1090" class="blob-code blob-code-inner js-file-line">         stmt-&gt;setUInt8(index++, getClass());</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1091" class="blob-num js-line-number" data-line-number="1091"></td>
        <td id="file-gistfile1-diff-LC1091" class="blob-code blob-code-inner js-file-line">         stmt-&gt;setUInt8(index++, getGender());</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1092" class="blob-num js-line-number" data-line-number="1092"></td>
        <td id="file-gistfile1-diff-LC1092" class="blob-code blob-code-inner js-file-line">         stmt-&gt;setUInt8(index++, getLevel());</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1093" class="blob-num js-line-number" data-line-number="1093"></td>
        <td id="file-gistfile1-diff-LC1093" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -19302,7 +19336,7 @@</span> void Player::SaveToDB(bool create /*=false*/)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1094" class="blob-num js-line-number" data-line-number="1094"></td>
        <td id="file-gistfile1-diff-LC1094" class="blob-code blob-code-inner js-file-line">         // Update query</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1095" class="blob-num js-line-number" data-line-number="1095"></td>
        <td id="file-gistfile1-diff-LC1095" class="blob-code blob-code-inner js-file-line">         stmt = CharacterDatabase.GetPreparedStatement(CHAR_UPD_CHARACTER);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1096" class="blob-num js-line-number" data-line-number="1096"></td>
        <td id="file-gistfile1-diff-LC1096" class="blob-code blob-code-inner js-file-line">         stmt-&gt;setString(index++, GetName());</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1097" class="blob-num js-line-number" data-line-number="1097"></td>
        <td id="file-gistfile1-diff-LC1097" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>        stmt-&gt;setUInt8(index++, getRace());</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1098" class="blob-num js-line-number" data-line-number="1098"></td>
        <td id="file-gistfile1-diff-LC1098" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        stmt-&gt;setUInt8(index++, getORace());</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1099" class="blob-num js-line-number" data-line-number="1099"></td>
        <td id="file-gistfile1-diff-LC1099" class="blob-code blob-code-inner js-file-line">         stmt-&gt;setUInt8(index++, getClass());</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1100" class="blob-num js-line-number" data-line-number="1100"></td>
        <td id="file-gistfile1-diff-LC1100" class="blob-code blob-code-inner js-file-line">         stmt-&gt;setUInt8(index++, getGender());</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1101" class="blob-num js-line-number" data-line-number="1101"></td>
        <td id="file-gistfile1-diff-LC1101" class="blob-code blob-code-inner js-file-line">         stmt-&gt;setUInt8(index++, getLevel());</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1102" class="blob-num js-line-number" data-line-number="1102"></td>
        <td id="file-gistfile1-diff-LC1102" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -20541,6 +20575,19 @@</span> void Player::StopCastingCharm()</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1103" class="blob-num js-line-number" data-line-number="1103"></td>
        <td id="file-gistfile1-diff-LC1103" class="blob-code blob-code-inner js-file-line">     }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1104" class="blob-num js-line-number" data-line-number="1104"></td>
        <td id="file-gistfile1-diff-LC1104" class="blob-code blob-code-inner js-file-line"> }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1105" class="blob-num js-line-number" data-line-number="1105"></td>
        <td id="file-gistfile1-diff-LC1105" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1106" class="blob-num js-line-number" data-line-number="1106"></td>
        <td id="file-gistfile1-diff-LC1106" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>void Player::BuildPlayerChat(WorldPacket* data, uint8 msgtype, const std::string&amp; text, uint32 language) const</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1107" class="blob-num js-line-number" data-line-number="1107"></td>
        <td id="file-gistfile1-diff-LC1107" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>{</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1108" class="blob-num js-line-number" data-line-number="1108"></td>
        <td id="file-gistfile1-diff-LC1108" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    *data &lt;&lt; uint8(msgtype);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1109" class="blob-num js-line-number" data-line-number="1109"></td>
        <td id="file-gistfile1-diff-LC1109" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    *data &lt;&lt; uint32(language);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1110" class="blob-num js-line-number" data-line-number="1110"></td>
        <td id="file-gistfile1-diff-LC1110" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    *data &lt;&lt; uint64(GetGUID());</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1111" class="blob-num js-line-number" data-line-number="1111"></td>
        <td id="file-gistfile1-diff-LC1111" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    *data &lt;&lt; uint32(0);                                      // constant unknown time</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1112" class="blob-num js-line-number" data-line-number="1112"></td>
        <td id="file-gistfile1-diff-LC1112" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    *data &lt;&lt; uint64(GetGUID());</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1113" class="blob-num js-line-number" data-line-number="1113"></td>
        <td id="file-gistfile1-diff-LC1113" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    *data &lt;&lt; uint32(text.length() + 1);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1114" class="blob-num js-line-number" data-line-number="1114"></td>
        <td id="file-gistfile1-diff-LC1114" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    *data &lt;&lt; text;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1115" class="blob-num js-line-number" data-line-number="1115"></td>
        <td id="file-gistfile1-diff-LC1115" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    *data &lt;&lt; uint8(GetChatTag());</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1116" class="blob-num js-line-number" data-line-number="1116"></td>
        <td id="file-gistfile1-diff-LC1116" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>}</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1117" class="blob-num js-line-number" data-line-number="1117"></td>
        <td id="file-gistfile1-diff-LC1117" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1118" class="blob-num js-line-number" data-line-number="1118"></td>
        <td id="file-gistfile1-diff-LC1118" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1119" class="blob-num js-line-number" data-line-number="1119"></td>
        <td id="file-gistfile1-diff-LC1119" class="blob-code blob-code-inner js-file-line"> void Player::Say(const std::string&amp; text, const uint32 language)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1120" class="blob-num js-line-number" data-line-number="1120"></td>
        <td id="file-gistfile1-diff-LC1120" class="blob-code blob-code-inner js-file-line"> {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1121" class="blob-num js-line-number" data-line-number="1121"></td>
        <td id="file-gistfile1-diff-LC1121" class="blob-code blob-code-inner js-file-line">     std::string _text(text);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1122" class="blob-num js-line-number" data-line-number="1122"></td>
        <td id="file-gistfile1-diff-LC1122" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -22326,11 +22373,6 @@</span> void Player::SetBGTeam(uint32 team)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1123" class="blob-num js-line-number" data-line-number="1123"></td>
        <td id="file-gistfile1-diff-LC1123" class="blob-code blob-code-inner js-file-line">     SetByteValue(PLAYER_BYTES_3, 3, uint8(team == ALLIANCE ? 1 : 0));</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1124" class="blob-num js-line-number" data-line-number="1124"></td>
        <td id="file-gistfile1-diff-LC1124" class="blob-code blob-code-inner js-file-line"> }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1125" class="blob-num js-line-number" data-line-number="1125"></td>
        <td id="file-gistfile1-diff-LC1125" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1126" class="blob-num js-line-number" data-line-number="1126"></td>
        <td id="file-gistfile1-diff-LC1126" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>uint32 Player::GetBGTeam() const</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1127" class="blob-num js-line-number" data-line-number="1127"></td>
        <td id="file-gistfile1-diff-LC1127" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>{</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1128" class="blob-num js-line-number" data-line-number="1128"></td>
        <td id="file-gistfile1-diff-LC1128" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>    return m_bgData.bgTeam ? m_bgData.bgTeam : GetTeam();</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1129" class="blob-num js-line-number" data-line-number="1129"></td>
        <td id="file-gistfile1-diff-LC1129" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>}</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1130" class="blob-num js-line-number" data-line-number="1130"></td>
        <td id="file-gistfile1-diff-LC1130" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1131" class="blob-num js-line-number" data-line-number="1131"></td>
        <td id="file-gistfile1-diff-LC1131" class="blob-code blob-code-inner js-file-line"> void Player::LeaveBattleground(bool teleportToEntryPoint)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1132" class="blob-num js-line-number" data-line-number="1132"></td>
        <td id="file-gistfile1-diff-LC1132" class="blob-code blob-code-inner js-file-line"> {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1133" class="blob-num js-line-number" data-line-number="1133"></td>
        <td id="file-gistfile1-diff-LC1133" class="blob-code blob-code-inner js-file-line">     if (Battleground* bg = GetBattleground())</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1134" class="blob-num js-line-number" data-line-number="1134"></td>
        <td id="file-gistfile1-diff-LC1134" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -22406,7 +22448,7 @@</span> void Player::ReportedAfkBy(Player* reporter)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1135" class="blob-num js-line-number" data-line-number="1135"></td>
        <td id="file-gistfile1-diff-LC1135" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1136" class="blob-num js-line-number" data-line-number="1136"></td>
        <td id="file-gistfile1-diff-LC1136" class="blob-code blob-code-inner js-file-line"> WorldLocation Player::GetStartPosition() const</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1137" class="blob-num js-line-number" data-line-number="1137"></td>
        <td id="file-gistfile1-diff-LC1137" class="blob-code blob-code-inner js-file-line"> {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1138" class="blob-num js-line-number" data-line-number="1138"></td>
        <td id="file-gistfile1-diff-LC1138" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>    PlayerInfo const* info = sObjectMgr-&gt;GetPlayerInfo(getRace(), getClass());</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1139" class="blob-num js-line-number" data-line-number="1139"></td>
        <td id="file-gistfile1-diff-LC1139" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    PlayerInfo const* info = sObjectMgr-&gt;GetPlayerInfo(getORace(), getClass());</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1140" class="blob-num js-line-number" data-line-number="1140"></td>
        <td id="file-gistfile1-diff-LC1140" class="blob-code blob-code-inner js-file-line">     uint32 mapId = info-&gt;mapId;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1141" class="blob-num js-line-number" data-line-number="1141"></td>
        <td id="file-gistfile1-diff-LC1141" class="blob-code blob-code-inner js-file-line">     if (getClass() == CLASS_DEATH_KNIGHT &amp;&amp; HasSpell(50977))</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1142" class="blob-num js-line-number" data-line-number="1142"></td>
        <td id="file-gistfile1-diff-LC1142" class="blob-code blob-code-inner js-file-line">         mapId = 0;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1143" class="blob-num js-line-number" data-line-number="1143"></td>
        <td id="file-gistfile1-diff-LC1143" class="blob-code blob-code-inner js-file-line"><span class="pl-c1">diff --git a/src/server/game/Entities/Player/Player.h b/src/server/game/Entities/Player/Player.h</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1144" class="blob-num js-line-number" data-line-number="1144"></td>
        <td id="file-gistfile1-diff-LC1144" class="blob-code blob-code-inner js-file-line">index fdebbde..dbe11df 100644</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1145" class="blob-num js-line-number" data-line-number="1145"></td>
        <td id="file-gistfile1-diff-LC1145" class="blob-code blob-code-inner js-file-line"><span class="pl-md">--- a/src/server/game/Entities/Player/Player.h</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1146" class="blob-num js-line-number" data-line-number="1146"></td>
        <td id="file-gistfile1-diff-LC1146" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1">+++ b/src/server/game/Entities/Player/Player.h</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1147" class="blob-num js-line-number" data-line-number="1147"></td>
        <td id="file-gistfile1-diff-LC1147" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -1070,6 +1070,35 @@</span> class Player : public Unit, public GridObject&lt;Player&gt;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1148" class="blob-num js-line-number" data-line-number="1148"></td>
        <td id="file-gistfile1-diff-LC1148" class="blob-code blob-code-inner js-file-line">     public:</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1149" class="blob-num js-line-number" data-line-number="1149"></td>
        <td id="file-gistfile1-diff-LC1149" class="blob-code blob-code-inner js-file-line">         explicit Player(WorldSession* session);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1150" class="blob-num js-line-number" data-line-number="1150"></td>
        <td id="file-gistfile1-diff-LC1150" class="blob-code blob-code-inner js-file-line">         ~Player();</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1151" class="blob-num js-line-number" data-line-number="1151"></td>
        <td id="file-gistfile1-diff-LC1151" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        private:</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1152" class="blob-num js-line-number" data-line-number="1152"></td>
        <td id="file-gistfile1-diff-LC1152" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        bool m_ForgetBGPlayers;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1153" class="blob-num js-line-number" data-line-number="1153"></td>
        <td id="file-gistfile1-diff-LC1153" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        bool m_ForgetInListPlayers;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1154" class="blob-num js-line-number" data-line-number="1154"></td>
        <td id="file-gistfile1-diff-LC1154" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        uint8 m_FakeRace;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1155" class="blob-num js-line-number" data-line-number="1155"></td>
        <td id="file-gistfile1-diff-LC1155" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        uint8 m_RealRace;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1156" class="blob-num js-line-number" data-line-number="1156"></td>
        <td id="file-gistfile1-diff-LC1156" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        uint32 m_FakeMorph;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1157" class="blob-num js-line-number" data-line-number="1157"></td>
        <td id="file-gistfile1-diff-LC1157" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    public:</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1158" class="blob-num js-line-number" data-line-number="1158"></td>
        <td id="file-gistfile1-diff-LC1158" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        typedef std::vector&lt;uint64&gt; FakePlayers;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1159" class="blob-num js-line-number" data-line-number="1159"></td>
        <td id="file-gistfile1-diff-LC1159" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        void SendChatMessage(const char *format, ...);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1160" class="blob-num js-line-number" data-line-number="1160"></td>
        <td id="file-gistfile1-diff-LC1160" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        void FitPlayerInTeam(bool action, Battleground* pBattleGround = NULL);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1161" class="blob-num js-line-number" data-line-number="1161"></td>
        <td id="file-gistfile1-diff-LC1161" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        void DoForgetPlayersInList();</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1162" class="blob-num js-line-number" data-line-number="1162"></td>
        <td id="file-gistfile1-diff-LC1162" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        void DoForgetPlayersInBG(Battleground* pBattleGround);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1163" class="blob-num js-line-number" data-line-number="1163"></td>
        <td id="file-gistfile1-diff-LC1163" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        uint8 getORace() const { return m_RealRace; }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1164" class="blob-num js-line-number" data-line-number="1164"></td>
        <td id="file-gistfile1-diff-LC1164" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        void SetORace() { m_RealRace = GetByteValue(UNIT_FIELD_BYTES_0, 0); }; // SHOULD ONLY BE CALLED ON LOGIN</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1165" class="blob-num js-line-number" data-line-number="1165"></td>
        <td id="file-gistfile1-diff-LC1165" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        void SetFakeRace(); // SHOULD ONLY BE CALLED ON LOGIN</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1166" class="blob-num js-line-number" data-line-number="1166"></td>
        <td id="file-gistfile1-diff-LC1166" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        void SetFakeRaceAndMorph(); // SHOULD ONLY BE CALLED ON LOGIN</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1167" class="blob-num js-line-number" data-line-number="1167"></td>
        <td id="file-gistfile1-diff-LC1167" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        uint32 GetFakeMorph() { return m_FakeMorph; };</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1168" class="blob-num js-line-number" data-line-number="1168"></td>
        <td id="file-gistfile1-diff-LC1168" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        uint8 getFRace() const { return m_FakeRace; }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1169" class="blob-num js-line-number" data-line-number="1169"></td>
        <td id="file-gistfile1-diff-LC1169" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        void SetForgetBGPlayers(bool value) { m_ForgetBGPlayers = value; }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1170" class="blob-num js-line-number" data-line-number="1170"></td>
        <td id="file-gistfile1-diff-LC1170" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        bool ShouldForgetBGPlayers() { return m_ForgetBGPlayers; }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1171" class="blob-num js-line-number" data-line-number="1171"></td>
        <td id="file-gistfile1-diff-LC1171" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        void SetForgetInListPlayers(bool value) { m_ForgetInListPlayers = value; }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1172" class="blob-num js-line-number" data-line-number="1172"></td>
        <td id="file-gistfile1-diff-LC1172" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        bool ShouldForgetInListPlayers() { return m_ForgetInListPlayers; }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1173" class="blob-num js-line-number" data-line-number="1173"></td>
        <td id="file-gistfile1-diff-LC1173" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        bool SendBattleGroundChat(uint32 msgtype, std::string message);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1174" class="blob-num js-line-number" data-line-number="1174"></td>
        <td id="file-gistfile1-diff-LC1174" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        void MorphFit(bool value);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1175" class="blob-num js-line-number" data-line-number="1175"></td>
        <td id="file-gistfile1-diff-LC1175" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        bool IsPlayingNative() const { return GetTeam() == m_team; }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1176" class="blob-num js-line-number" data-line-number="1176"></td>
        <td id="file-gistfile1-diff-LC1176" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        uint32 GetOTeam() const { return m_team; }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1177" class="blob-num js-line-number" data-line-number="1177"></td>
        <td id="file-gistfile1-diff-LC1177" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        uint32 GetTeam() const { return m_bgData.bgTeam &amp;&amp; GetBattleground() ? m_bgData.bgTeam : m_team; }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1178" class="blob-num js-line-number" data-line-number="1178"></td>
        <td id="file-gistfile1-diff-LC1178" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        bool SendRealNameQuery();</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1179" class="blob-num js-line-number" data-line-number="1179"></td>
        <td id="file-gistfile1-diff-LC1179" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        FakePlayers m_FakePlayers;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1180" class="blob-num js-line-number" data-line-number="1180"></td>
        <td id="file-gistfile1-diff-LC1180" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1181" class="blob-num js-line-number" data-line-number="1181"></td>
        <td id="file-gistfile1-diff-LC1181" class="blob-code blob-code-inner js-file-line">         void CleanupsBeforeDelete(bool finalCleanup = true);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1182" class="blob-num js-line-number" data-line-number="1182"></td>
        <td id="file-gistfile1-diff-LC1182" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1183" class="blob-num js-line-number" data-line-number="1183"></td>
        <td id="file-gistfile1-diff-LC1183" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -1123,7 +1152,7 @@</span> class Player : public Unit, public GridObject&lt;Player&gt;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1184" class="blob-num js-line-number" data-line-number="1184"></td>
        <td id="file-gistfile1-diff-LC1184" class="blob-code blob-code-inner js-file-line">         PlayerSocial *GetSocial() { return m_social; }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1185" class="blob-num js-line-number" data-line-number="1185"></td>
        <td id="file-gistfile1-diff-LC1185" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1186" class="blob-num js-line-number" data-line-number="1186"></td>
        <td id="file-gistfile1-diff-LC1186" class="blob-code blob-code-inner js-file-line">         PlayerTaxi m_taxi;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1187" class="blob-num js-line-number" data-line-number="1187"></td>
        <td id="file-gistfile1-diff-LC1187" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>        void InitTaxiNodesForLevel() { m_taxi.InitTaxiNodesForLevel(getRace(), getClass(), getLevel()); }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1188" class="blob-num js-line-number" data-line-number="1188"></td>
        <td id="file-gistfile1-diff-LC1188" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        void InitTaxiNodesForLevel() { m_taxi.InitTaxiNodesForLevel(getORace(), getClass(), getLevel()); }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1189" class="blob-num js-line-number" data-line-number="1189"></td>
        <td id="file-gistfile1-diff-LC1189" class="blob-code blob-code-inner js-file-line">         bool ActivateTaxiPathTo(std::vector&lt;uint32&gt; const&amp; nodes, Creature* npc = NULL, uint32 spellid = 0);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1190" class="blob-num js-line-number" data-line-number="1190"></td>
        <td id="file-gistfile1-diff-LC1190" class="blob-code blob-code-inner js-file-line">         bool ActivateTaxiPathTo(uint32 taxi_path_id, uint32 spellid = 0);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1191" class="blob-num js-line-number" data-line-number="1191"></td>
        <td id="file-gistfile1-diff-LC1191" class="blob-code blob-code-inner js-file-line">         void CleanupAfterTaxiFlight();</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1192" class="blob-num js-line-number" data-line-number="1192"></td>
        <td id="file-gistfile1-diff-LC1192" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -1191,6 +1220,8 @@</span> class Player : public Unit, public GridObject&lt;Player&gt;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1193" class="blob-num js-line-number" data-line-number="1193"></td>
        <td id="file-gistfile1-diff-LC1193" class="blob-code blob-code-inner js-file-line">         void TextEmote(std::string const&amp; text);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1194" class="blob-num js-line-number" data-line-number="1194"></td>
        <td id="file-gistfile1-diff-LC1194" class="blob-code blob-code-inner js-file-line">         /// Handles whispers from Addons and players based on sender, receiver&#39;s guid and language.</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1195" class="blob-num js-line-number" data-line-number="1195"></td>
        <td id="file-gistfile1-diff-LC1195" class="blob-code blob-code-inner js-file-line">         void Whisper(std::string const&amp; text, const uint32 language, uint64 receiver);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1196" class="blob-num js-line-number" data-line-number="1196"></td>
        <td id="file-gistfile1-diff-LC1196" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        /// Constructs the player Chat data for the specific functions to use</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1197" class="blob-num js-line-number" data-line-number="1197"></td>
        <td id="file-gistfile1-diff-LC1197" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        void BuildPlayerChat(WorldPacket* data, uint8 msgtype, std::string const&amp; text, uint32 language) const;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1198" class="blob-num js-line-number" data-line-number="1198"></td>
        <td id="file-gistfile1-diff-LC1198" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1199" class="blob-num js-line-number" data-line-number="1199"></td>
        <td id="file-gistfile1-diff-LC1199" class="blob-code blob-code-inner js-file-line">         /*********************************************************/</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1200" class="blob-num js-line-number" data-line-number="1200"></td>
        <td id="file-gistfile1-diff-LC1200" class="blob-code blob-code-inner js-file-line">         /***                    STORAGE SYSTEM                 ***/</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1201" class="blob-num js-line-number" data-line-number="1201"></td>
        <td id="file-gistfile1-diff-LC1201" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -1891,8 +1922,7 @@</span> class Player : public Unit, public GridObject&lt;Player&gt;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1202" class="blob-num js-line-number" data-line-number="1202"></td>
        <td id="file-gistfile1-diff-LC1202" class="blob-code blob-code-inner js-file-line">         void CheckAreaExploreAndOutdoor(void);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1203" class="blob-num js-line-number" data-line-number="1203"></td>
        <td id="file-gistfile1-diff-LC1203" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1204" class="blob-num js-line-number" data-line-number="1204"></td>
        <td id="file-gistfile1-diff-LC1204" class="blob-code blob-code-inner js-file-line">         static uint32 TeamForRace(uint8 race);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1205" class="blob-num js-line-number" data-line-number="1205"></td>
        <td id="file-gistfile1-diff-LC1205" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>        uint32 GetTeam() const { return m_team; }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1206" class="blob-num js-line-number" data-line-number="1206"></td>
        <td id="file-gistfile1-diff-LC1206" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>        TeamId GetTeamId() const { return m_team == ALLIANCE ? TEAM_ALLIANCE : TEAM_HORDE; }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1207" class="blob-num js-line-number" data-line-number="1207"></td>
        <td id="file-gistfile1-diff-LC1207" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        TeamId GetTeamId() const { return GetTeam() == ALLIANCE ? TEAM_ALLIANCE : TEAM_HORDE; }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1208" class="blob-num js-line-number" data-line-number="1208"></td>
        <td id="file-gistfile1-diff-LC1208" class="blob-code blob-code-inner js-file-line">         void setFactionForRace(uint8 race);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1209" class="blob-num js-line-number" data-line-number="1209"></td>
        <td id="file-gistfile1-diff-LC1209" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1210" class="blob-num js-line-number" data-line-number="1210"></td>
        <td id="file-gistfile1-diff-LC1210" class="blob-code blob-code-inner js-file-line">         void InitDisplayIds();</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1211" class="blob-num js-line-number" data-line-number="1211"></td>
        <td id="file-gistfile1-diff-LC1211" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -2036,7 +2066,6 @@</span> class Player : public Unit, public GridObject&lt;Player&gt;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1212" class="blob-num js-line-number" data-line-number="1212"></td>
        <td id="file-gistfile1-diff-LC1212" class="blob-code blob-code-inner js-file-line">         void SetBattlegroundEntryPoint();</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1213" class="blob-num js-line-number" data-line-number="1213"></td>
        <td id="file-gistfile1-diff-LC1213" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1214" class="blob-num js-line-number" data-line-number="1214"></td>
        <td id="file-gistfile1-diff-LC1214" class="blob-code blob-code-inner js-file-line">         void SetBGTeam(uint32 team);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1215" class="blob-num js-line-number" data-line-number="1215"></td>
        <td id="file-gistfile1-diff-LC1215" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>        uint32 GetBGTeam() const;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1216" class="blob-num js-line-number" data-line-number="1216"></td>
        <td id="file-gistfile1-diff-LC1216" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1217" class="blob-num js-line-number" data-line-number="1217"></td>
        <td id="file-gistfile1-diff-LC1217" class="blob-code blob-code-inner js-file-line">         void LeaveBattleground(bool teleportToEntryPoint = true);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1218" class="blob-num js-line-number" data-line-number="1218"></td>
        <td id="file-gistfile1-diff-LC1218" class="blob-code blob-code-inner js-file-line">         bool CanJoinToBattleground(Battleground const* bg) const;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1219" class="blob-num js-line-number" data-line-number="1219"></td>
        <td id="file-gistfile1-diff-LC1219" class="blob-code blob-code-inner js-file-line"><span class="pl-c1">diff --git a/src/server/game/Entities/Unit/Unit.cpp b/src/server/game/Entities/Unit/Unit.cpp</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1220" class="blob-num js-line-number" data-line-number="1220"></td>
        <td id="file-gistfile1-diff-LC1220" class="blob-code blob-code-inner js-file-line">index ca4780b..7d8e6fe 100644</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1221" class="blob-num js-line-number" data-line-number="1221"></td>
        <td id="file-gistfile1-diff-LC1221" class="blob-code blob-code-inner js-file-line"><span class="pl-md">--- a/src/server/game/Entities/Unit/Unit.cpp</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1222" class="blob-num js-line-number" data-line-number="1222"></td>
        <td id="file-gistfile1-diff-LC1222" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1">+++ b/src/server/game/Entities/Unit/Unit.cpp</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1223" class="blob-num js-line-number" data-line-number="1223"></td>
        <td id="file-gistfile1-diff-LC1223" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -15995,7 +15995,7 @@</span> void Unit::RemoveCharmedBy(Unit* charmer)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1224" class="blob-num js-line-number" data-line-number="1224"></td>
        <td id="file-gistfile1-diff-LC1224" class="blob-code blob-code-inner js-file-line"> void Unit::RestoreFaction()</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1225" class="blob-num js-line-number" data-line-number="1225"></td>
        <td id="file-gistfile1-diff-LC1225" class="blob-code blob-code-inner js-file-line"> {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1226" class="blob-num js-line-number" data-line-number="1226"></td>
        <td id="file-gistfile1-diff-LC1226" class="blob-code blob-code-inner js-file-line">     if (GetTypeId() == TYPEID_PLAYER)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1227" class="blob-num js-line-number" data-line-number="1227"></td>
        <td id="file-gistfile1-diff-LC1227" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>        ToPlayer()-&gt;setFactionForRace(getRace());</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1228" class="blob-num js-line-number" data-line-number="1228"></td>
        <td id="file-gistfile1-diff-LC1228" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        ToPlayer()-&gt;setFactionForRace(ToPlayer()-&gt;getRace());</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1229" class="blob-num js-line-number" data-line-number="1229"></td>
        <td id="file-gistfile1-diff-LC1229" class="blob-code blob-code-inner js-file-line">     else</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1230" class="blob-num js-line-number" data-line-number="1230"></td>
        <td id="file-gistfile1-diff-LC1230" class="blob-code blob-code-inner js-file-line">     {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1231" class="blob-num js-line-number" data-line-number="1231"></td>
        <td id="file-gistfile1-diff-LC1231" class="blob-code blob-code-inner js-file-line">         if (HasUnitTypeMask(UNIT_MASK_MINION))</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1232" class="blob-num js-line-number" data-line-number="1232"></td>
        <td id="file-gistfile1-diff-LC1232" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -16746,6 +16746,21 @@</span> uint32 Unit::GetModelForTotem(PlayerTotemType totemType)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1233" class="blob-num js-line-number" data-line-number="1233"></td>
        <td id="file-gistfile1-diff-LC1233" class="blob-code blob-code-inner js-file-line">             }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1234" class="blob-num js-line-number" data-line-number="1234"></td>
        <td id="file-gistfile1-diff-LC1234" class="blob-code blob-code-inner js-file-line">             break;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1235" class="blob-num js-line-number" data-line-number="1235"></td>
        <td id="file-gistfile1-diff-LC1235" class="blob-code blob-code-inner js-file-line">         }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1236" class="blob-num js-line-number" data-line-number="1236"></td>
        <td id="file-gistfile1-diff-LC1236" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        default: // One standard for other races.</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1237" class="blob-num js-line-number" data-line-number="1237"></td>
        <td id="file-gistfile1-diff-LC1237" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        {        // THANKS L30m4nc3r for this</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1238" class="blob-num js-line-number" data-line-number="1238"></td>
        <td id="file-gistfile1-diff-LC1238" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            switch (totemType)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1239" class="blob-num js-line-number" data-line-number="1239"></td>
        <td id="file-gistfile1-diff-LC1239" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            {</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1240" class="blob-num js-line-number" data-line-number="1240"></td>
        <td id="file-gistfile1-diff-LC1240" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                case SUMMON_TYPE_TOTEM_FIRE:    // fire</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1241" class="blob-num js-line-number" data-line-number="1241"></td>
        <td id="file-gistfile1-diff-LC1241" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                    return 4589;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1242" class="blob-num js-line-number" data-line-number="1242"></td>
        <td id="file-gistfile1-diff-LC1242" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                case SUMMON_TYPE_TOTEM_EARTH:   // earth</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1243" class="blob-num js-line-number" data-line-number="1243"></td>
        <td id="file-gistfile1-diff-LC1243" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                    return 4588;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1244" class="blob-num js-line-number" data-line-number="1244"></td>
        <td id="file-gistfile1-diff-LC1244" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                case SUMMON_TYPE_TOTEM_WATER:   // water</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1245" class="blob-num js-line-number" data-line-number="1245"></td>
        <td id="file-gistfile1-diff-LC1245" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                    return 4587;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1246" class="blob-num js-line-number" data-line-number="1246"></td>
        <td id="file-gistfile1-diff-LC1246" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                case SUMMON_TYPE_TOTEM_AIR:     // air</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1247" class="blob-num js-line-number" data-line-number="1247"></td>
        <td id="file-gistfile1-diff-LC1247" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                    return 4590;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1248" class="blob-num js-line-number" data-line-number="1248"></td>
        <td id="file-gistfile1-diff-LC1248" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1249" class="blob-num js-line-number" data-line-number="1249"></td>
        <td id="file-gistfile1-diff-LC1249" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            break;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1250" class="blob-num js-line-number" data-line-number="1250"></td>
        <td id="file-gistfile1-diff-LC1250" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1251" class="blob-num js-line-number" data-line-number="1251"></td>
        <td id="file-gistfile1-diff-LC1251" class="blob-code blob-code-inner js-file-line">     }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1252" class="blob-num js-line-number" data-line-number="1252"></td>
        <td id="file-gistfile1-diff-LC1252" class="blob-code blob-code-inner js-file-line">     return 0;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1253" class="blob-num js-line-number" data-line-number="1253"></td>
        <td id="file-gistfile1-diff-LC1253" class="blob-code blob-code-inner js-file-line"> }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1254" class="blob-num js-line-number" data-line-number="1254"></td>
        <td id="file-gistfile1-diff-LC1254" class="blob-code blob-code-inner js-file-line"><span class="pl-c1">diff --git a/src/server/game/Entities/Unit/Unit.h b/src/server/game/Entities/Unit/Unit.h</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1255" class="blob-num js-line-number" data-line-number="1255"></td>
        <td id="file-gistfile1-diff-LC1255" class="blob-code blob-code-inner js-file-line">index 535d75a..ca0d601 100644</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1256" class="blob-num js-line-number" data-line-number="1256"></td>
        <td id="file-gistfile1-diff-LC1256" class="blob-code blob-code-inner js-file-line"><span class="pl-md">--- a/src/server/game/Entities/Unit/Unit.h</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1257" class="blob-num js-line-number" data-line-number="1257"></td>
        <td id="file-gistfile1-diff-LC1257" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1">+++ b/src/server/game/Entities/Unit/Unit.h</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1258" class="blob-num js-line-number" data-line-number="1258"></td>
        <td id="file-gistfile1-diff-LC1258" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -1359,8 +1359,10 @@</span> class Unit : public WorldObject</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1259" class="blob-num js-line-number" data-line-number="1259"></td>
        <td id="file-gistfile1-diff-LC1259" class="blob-code blob-code-inner js-file-line">         uint8 getLevel() const { return uint8(GetUInt32Value(UNIT_FIELD_LEVEL)); }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1260" class="blob-num js-line-number" data-line-number="1260"></td>
        <td id="file-gistfile1-diff-LC1260" class="blob-code blob-code-inner js-file-line">         uint8 getLevelForTarget(WorldObject const* /*target*/) const { return getLevel(); }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1261" class="blob-num js-line-number" data-line-number="1261"></td>
        <td id="file-gistfile1-diff-LC1261" class="blob-code blob-code-inner js-file-line">         void SetLevel(uint8 lvl);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1262" class="blob-num js-line-number" data-line-number="1262"></td>
        <td id="file-gistfile1-diff-LC1262" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>        uint8 getRace() const { return GetByteValue(UNIT_FIELD_BYTES_0, 0); }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1263" class="blob-num js-line-number" data-line-number="1263"></td>
        <td id="file-gistfile1-diff-LC1263" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        uint8 getRace(bool forceoriginal = false) const;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1264" class="blob-num js-line-number" data-line-number="1264"></td>
        <td id="file-gistfile1-diff-LC1264" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        uint8 getORace() { return getRace(true); }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1265" class="blob-num js-line-number" data-line-number="1265"></td>
        <td id="file-gistfile1-diff-LC1265" class="blob-code blob-code-inner js-file-line">         uint32 getRaceMask() const { return 1 &lt;&lt; (getRace()-1); }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1266" class="blob-num js-line-number" data-line-number="1266"></td>
        <td id="file-gistfile1-diff-LC1266" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        uint32 getORaceMask() const { return 1 &lt;&lt; (getRace(true) - 1); }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1267" class="blob-num js-line-number" data-line-number="1267"></td>
        <td id="file-gistfile1-diff-LC1267" class="blob-code blob-code-inner js-file-line">         uint8 getClass() const { return GetByteValue(UNIT_FIELD_BYTES_0, 1); }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1268" class="blob-num js-line-number" data-line-number="1268"></td>
        <td id="file-gistfile1-diff-LC1268" class="blob-code blob-code-inner js-file-line">         uint32 getClassMask() const { return 1 &lt;&lt; (getClass()-1); }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1269" class="blob-num js-line-number" data-line-number="1269"></td>
        <td id="file-gistfile1-diff-LC1269" class="blob-code blob-code-inner js-file-line">         uint8 getGender() const { return GetByteValue(UNIT_FIELD_BYTES_0, 2); }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1270" class="blob-num js-line-number" data-line-number="1270"></td>
        <td id="file-gistfile1-diff-LC1270" class="blob-code blob-code-inner js-file-line"><span class="pl-c1">diff --git a/src/server/game/Handlers/BattleGroundHandler.cpp b/src/server/game/Handlers/BattleGroundHandler.cpp</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1271" class="blob-num js-line-number" data-line-number="1271"></td>
        <td id="file-gistfile1-diff-LC1271" class="blob-code blob-code-inner js-file-line">index 7def6b0..caa424e 100644</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1272" class="blob-num js-line-number" data-line-number="1272"></td>
        <td id="file-gistfile1-diff-LC1272" class="blob-code blob-code-inner js-file-line"><span class="pl-md">--- a/src/server/game/Handlers/BattleGroundHandler.cpp</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1273" class="blob-num js-line-number" data-line-number="1273"></td>
        <td id="file-gistfile1-diff-LC1273" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1">+++ b/src/server/game/Handlers/BattleGroundHandler.cpp</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1274" class="blob-num js-line-number" data-line-number="1274"></td>
        <td id="file-gistfile1-diff-LC1274" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -35,6 +35,8 @@</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1275" class="blob-num js-line-number" data-line-number="1275"></td>
        <td id="file-gistfile1-diff-LC1275" class="blob-code blob-code-inner js-file-line"> #include &quot;DisableMgr.h&quot;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1276" class="blob-num js-line-number" data-line-number="1276"></td>
        <td id="file-gistfile1-diff-LC1276" class="blob-code blob-code-inner js-file-line"> #include &quot;Group.h&quot;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1277" class="blob-num js-line-number" data-line-number="1277"></td>
        <td id="file-gistfile1-diff-LC1277" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1278" class="blob-num js-line-number" data-line-number="1278"></td>
        <td id="file-gistfile1-diff-LC1278" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>#include &quot;Cfbg/Cfbg.h&quot;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1279" class="blob-num js-line-number" data-line-number="1279"></td>
        <td id="file-gistfile1-diff-LC1279" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1280" class="blob-num js-line-number" data-line-number="1280"></td>
        <td id="file-gistfile1-diff-LC1280" class="blob-code blob-code-inner js-file-line"> void WorldSession::HandleBattlemasterHelloOpcode(WorldPacket&amp; recvData)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1281" class="blob-num js-line-number" data-line-number="1281"></td>
        <td id="file-gistfile1-diff-LC1281" class="blob-code blob-code-inner js-file-line"> {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1282" class="blob-num js-line-number" data-line-number="1282"></td>
        <td id="file-gistfile1-diff-LC1282" class="blob-code blob-code-inner js-file-line">     uint64 guid;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1283" class="blob-num js-line-number" data-line-number="1283"></td>
        <td id="file-gistfile1-diff-LC1283" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -543,7 +545,7 @@</span> void WorldSession::HandleBattlefieldStatusOpcode(WorldPacket &amp; /*recvData*/)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1284" class="blob-num js-line-number" data-line-number="1284"></td>
        <td id="file-gistfile1-diff-LC1284" class="blob-code blob-code-inner js-file-line">             {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1285" class="blob-num js-line-number" data-line-number="1285"></td>
        <td id="file-gistfile1-diff-LC1285" class="blob-code blob-code-inner js-file-line">                 // this line is checked, i only don&#39;t know if GetStartTime is changing itself after bg end!</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1286" class="blob-num js-line-number" data-line-number="1286"></td>
        <td id="file-gistfile1-diff-LC1286" class="blob-code blob-code-inner js-file-line">                 // send status in Battleground</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1287" class="blob-num js-line-number" data-line-number="1287"></td>
        <td id="file-gistfile1-diff-LC1287" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>                sBattlegroundMgr-&gt;BuildBattlegroundStatusPacket(&amp;data, bg, i, STATUS_IN_PROGRESS, bg-&gt;GetEndTime(), bg-&gt;GetStartTime(), arenaType, _player-&gt;GetBGTeam());</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1288" class="blob-num js-line-number" data-line-number="1288"></td>
        <td id="file-gistfile1-diff-LC1288" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                sBattlegroundMgr-&gt;BuildBattlegroundStatusPacket(&amp;data, bg, i, STATUS_IN_PROGRESS, bg-&gt;GetEndTime(), bg-&gt;GetStartTime(), arenaType, _player-&gt;GetTeam());</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1289" class="blob-num js-line-number" data-line-number="1289"></td>
        <td id="file-gistfile1-diff-LC1289" class="blob-code blob-code-inner js-file-line">                 SendPacket(&amp;data);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1290" class="blob-num js-line-number" data-line-number="1290"></td>
        <td id="file-gistfile1-diff-LC1290" class="blob-code blob-code-inner js-file-line">                 continue;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1291" class="blob-num js-line-number" data-line-number="1291"></td>
        <td id="file-gistfile1-diff-LC1291" class="blob-code blob-code-inner js-file-line">             }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1292" class="blob-num js-line-number" data-line-number="1292"></td>
        <td id="file-gistfile1-diff-LC1292" class="blob-code blob-code-inner js-file-line"><span class="pl-c1">diff --git a/src/server/game/Handlers/CharacterHandler.cpp b/src/server/game/Handlers/CharacterHandler.cpp</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1293" class="blob-num js-line-number" data-line-number="1293"></td>
        <td id="file-gistfile1-diff-LC1293" class="blob-code blob-code-inner js-file-line">index 9ad382b..bca9e7e 100644</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1294" class="blob-num js-line-number" data-line-number="1294"></td>
        <td id="file-gistfile1-diff-LC1294" class="blob-code blob-code-inner js-file-line"><span class="pl-md">--- a/src/server/game/Handlers/CharacterHandler.cpp</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1295" class="blob-num js-line-number" data-line-number="1295"></td>
        <td id="file-gistfile1-diff-LC1295" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1">+++ b/src/server/game/Handlers/CharacterHandler.cpp</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1296" class="blob-num js-line-number" data-line-number="1296"></td>
        <td id="file-gistfile1-diff-LC1296" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -1043,6 +1043,9 @@</span> void WorldSession::HandlePlayerLogin(LoginQueryHolder* holder)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1297" class="blob-num js-line-number" data-line-number="1297"></td>
        <td id="file-gistfile1-diff-LC1297" class="blob-code blob-code-inner js-file-line">     sScriptMgr-&gt;OnPlayerLogin(pCurrChar, firstLogin);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1298" class="blob-num js-line-number" data-line-number="1298"></td>
        <td id="file-gistfile1-diff-LC1298" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1299" class="blob-num js-line-number" data-line-number="1299"></td>
        <td id="file-gistfile1-diff-LC1299" class="blob-code blob-code-inner js-file-line">     delete holder;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1300" class="blob-num js-line-number" data-line-number="1300"></td>
        <td id="file-gistfile1-diff-LC1300" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1301" class="blob-num js-line-number" data-line-number="1301"></td>
        <td id="file-gistfile1-diff-LC1301" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    if (pCurrChar-&gt;GetTeam() != pCurrChar-&gt;GetOTeam())</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1302" class="blob-num js-line-number" data-line-number="1302"></td>
        <td id="file-gistfile1-diff-LC1302" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        pCurrChar-&gt;FitPlayerInTeam(pCurrChar-&gt;GetBattleground() &amp;&amp; !pCurrChar-&gt;GetBattleground()-&gt;isArena() ? true : false, pCurrChar-&gt;GetBattleground());</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1303" class="blob-num js-line-number" data-line-number="1303"></td>
        <td id="file-gistfile1-diff-LC1303" class="blob-code blob-code-inner js-file-line"> }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1304" class="blob-num js-line-number" data-line-number="1304"></td>
        <td id="file-gistfile1-diff-LC1304" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1305" class="blob-num js-line-number" data-line-number="1305"></td>
        <td id="file-gistfile1-diff-LC1305" class="blob-code blob-code-inner js-file-line"> void WorldSession::HandleSetFactionAtWar(WorldPacket&amp; recvData)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1306" class="blob-num js-line-number" data-line-number="1306"></td>
        <td id="file-gistfile1-diff-LC1306" class="blob-code blob-code-inner js-file-line"><span class="pl-c1">diff --git a/src/server/game/Handlers/ChatHandler.cpp b/src/server/game/Handlers/ChatHandler.cpp</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1307" class="blob-num js-line-number" data-line-number="1307"></td>
        <td id="file-gistfile1-diff-LC1307" class="blob-code blob-code-inner js-file-line">index eccf7a6..b177617d 100644</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1308" class="blob-num js-line-number" data-line-number="1308"></td>
        <td id="file-gistfile1-diff-LC1308" class="blob-code blob-code-inner js-file-line"><span class="pl-md">--- a/src/server/game/Handlers/ChatHandler.cpp</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1309" class="blob-num js-line-number" data-line-number="1309"></td>
        <td id="file-gistfile1-diff-LC1309" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1">+++ b/src/server/game/Handlers/ChatHandler.cpp</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1310" class="blob-num js-line-number" data-line-number="1310"></td>
        <td id="file-gistfile1-diff-LC1310" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -48,6 +48,18 @@</span> void WorldSession::HandleMessagechatOpcode(WorldPacket&amp; recvData)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1311" class="blob-num js-line-number" data-line-number="1311"></td>
        <td id="file-gistfile1-diff-LC1311" class="blob-code blob-code-inner js-file-line">     recvData &gt;&gt; type;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1312" class="blob-num js-line-number" data-line-number="1312"></td>
        <td id="file-gistfile1-diff-LC1312" class="blob-code blob-code-inner js-file-line">     recvData &gt;&gt; lang;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1313" class="blob-num js-line-number" data-line-number="1313"></td>
        <td id="file-gistfile1-diff-LC1313" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1314" class="blob-num js-line-number" data-line-number="1314"></td>
        <td id="file-gistfile1-diff-LC1314" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    if (sWorld-&gt;getBoolConfig(BATTLEGROUND_CROSSFACTION_ENABLED) &amp;&amp; lang != LANG_ADDON)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1315" class="blob-num js-line-number" data-line-number="1315"></td>
        <td id="file-gistfile1-diff-LC1315" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    {</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1316" class="blob-num js-line-number" data-line-number="1316"></td>
        <td id="file-gistfile1-diff-LC1316" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        switch (type)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1317" class="blob-num js-line-number" data-line-number="1317"></td>
        <td id="file-gistfile1-diff-LC1317" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        {</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1318" class="blob-num js-line-number" data-line-number="1318"></td>
        <td id="file-gistfile1-diff-LC1318" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        case CHAT_MSG_BATTLEGROUND:</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1319" class="blob-num js-line-number" data-line-number="1319"></td>
        <td id="file-gistfile1-diff-LC1319" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        case CHAT_MSG_BATTLEGROUND_LEADER:</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1320" class="blob-num js-line-number" data-line-number="1320"></td>
        <td id="file-gistfile1-diff-LC1320" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            lang = LANG_UNIVERSAL;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1321" class="blob-num js-line-number" data-line-number="1321"></td>
        <td id="file-gistfile1-diff-LC1321" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        default:</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1322" class="blob-num js-line-number" data-line-number="1322"></td>
        <td id="file-gistfile1-diff-LC1322" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            break;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1323" class="blob-num js-line-number" data-line-number="1323"></td>
        <td id="file-gistfile1-diff-LC1323" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1324" class="blob-num js-line-number" data-line-number="1324"></td>
        <td id="file-gistfile1-diff-LC1324" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1325" class="blob-num js-line-number" data-line-number="1325"></td>
        <td id="file-gistfile1-diff-LC1325" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1326" class="blob-num js-line-number" data-line-number="1326"></td>
        <td id="file-gistfile1-diff-LC1326" class="blob-code blob-code-inner js-file-line">     if (type &gt;= MAX_CHAT_MSG_TYPE)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1327" class="blob-num js-line-number" data-line-number="1327"></td>
        <td id="file-gistfile1-diff-LC1327" class="blob-code blob-code-inner js-file-line">     {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1328" class="blob-num js-line-number" data-line-number="1328"></td>
        <td id="file-gistfile1-diff-LC1328" class="blob-code blob-code-inner js-file-line">         TC_LOG_ERROR(&quot;network&quot;, &quot;CHAT: Wrong message type received: %u&quot;, type);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1329" class="blob-num js-line-number" data-line-number="1329"></td>
        <td id="file-gistfile1-diff-LC1329" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -55,7 +67,7 @@</span> void WorldSession::HandleMessagechatOpcode(WorldPacket&amp; recvData)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1330" class="blob-num js-line-number" data-line-number="1330"></td>
        <td id="file-gistfile1-diff-LC1330" class="blob-code blob-code-inner js-file-line">         return;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1331" class="blob-num js-line-number" data-line-number="1331"></td>
        <td id="file-gistfile1-diff-LC1331" class="blob-code blob-code-inner js-file-line">     }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1332" class="blob-num js-line-number" data-line-number="1332"></td>
        <td id="file-gistfile1-diff-LC1332" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1333" class="blob-num js-line-number" data-line-number="1333"></td>
        <td id="file-gistfile1-diff-LC1333" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>    if (lang == LANG_UNIVERSAL &amp;&amp; type != CHAT_MSG_AFK &amp;&amp; type != CHAT_MSG_DND)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1334" class="blob-num js-line-number" data-line-number="1334"></td>
        <td id="file-gistfile1-diff-LC1334" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    if (lang == CHAT_MSG_AFK &amp;&amp; type != CHAT_MSG_DND)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1335" class="blob-num js-line-number" data-line-number="1335"></td>
        <td id="file-gistfile1-diff-LC1335" class="blob-code blob-code-inner js-file-line">     {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1336" class="blob-num js-line-number" data-line-number="1336"></td>
        <td id="file-gistfile1-diff-LC1336" class="blob-code blob-code-inner js-file-line">         TC_LOG_ERROR(&quot;network&quot;, &quot;CMSG_MESSAGECHAT: Possible hacking-attempt: %s tried to send a message in universal language&quot;, GetPlayerInfo().c_str());</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1337" class="blob-num js-line-number" data-line-number="1337"></td>
        <td id="file-gistfile1-diff-LC1337" class="blob-code blob-code-inner js-file-line">         SendNotification(LANG_UNKNOWN_LANGUAGE);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1338" class="blob-num js-line-number" data-line-number="1338"></td>
        <td id="file-gistfile1-diff-LC1338" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -253,6 +265,10 @@</span> void WorldSession::HandleMessagechatOpcode(WorldPacket&amp; recvData)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1339" class="blob-num js-line-number" data-line-number="1339"></td>
        <td id="file-gistfile1-diff-LC1339" class="blob-code blob-code-inner js-file-line">                 return;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1340" class="blob-num js-line-number" data-line-number="1340"></td>
        <td id="file-gistfile1-diff-LC1340" class="blob-code blob-code-inner js-file-line">             }</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1341" class="blob-num js-line-number" data-line-number="1341"></td>
        <td id="file-gistfile1-diff-LC1341" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1342" class="blob-num js-line-number" data-line-number="1342"></td>
        <td id="file-gistfile1-diff-LC1342" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            if (!GetPlayer()-&gt;IsGameMaster())</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1343" class="blob-num js-line-number" data-line-number="1343"></td>
        <td id="file-gistfile1-diff-LC1343" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                if (GetPlayer()-&gt;SendBattleGroundChat(type, msg))</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1344" class="blob-num js-line-number" data-line-number="1344"></td>
        <td id="file-gistfile1-diff-LC1344" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>                    return;</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1345" class="blob-num js-line-number" data-line-number="1345"></td>
        <td id="file-gistfile1-diff-LC1345" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1346" class="blob-num js-line-number" data-line-number="1346"></td>
        <td id="file-gistfile1-diff-LC1346" class="blob-code blob-code-inner js-file-line">             if (type == CHAT_MSG_SAY)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1347" class="blob-num js-line-number" data-line-number="1347"></td>
        <td id="file-gistfile1-diff-LC1347" class="blob-code blob-code-inner js-file-line">                 sender-&gt;Say(msg, lang);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1348" class="blob-num js-line-number" data-line-number="1348"></td>
        <td id="file-gistfile1-diff-LC1348" class="blob-code blob-code-inner js-file-line">             else if (type == CHAT_MSG_EMOTE)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1349" class="blob-num js-line-number" data-line-number="1349"></td>
        <td id="file-gistfile1-diff-LC1349" class="blob-code blob-code-inner js-file-line"><span class="pl-c1">diff --git a/src/server/game/Handlers/MiscHandler.cpp b/src/server/game/Handlers/MiscHandler.cpp</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1350" class="blob-num js-line-number" data-line-number="1350"></td>
        <td id="file-gistfile1-diff-LC1350" class="blob-code blob-code-inner js-file-line">index c4ff258..9103769 100644</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1351" class="blob-num js-line-number" data-line-number="1351"></td>
        <td id="file-gistfile1-diff-LC1351" class="blob-code blob-code-inner js-file-line"><span class="pl-md">--- a/src/server/game/Handlers/MiscHandler.cpp</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1352" class="blob-num js-line-number" data-line-number="1352"></td>
        <td id="file-gistfile1-diff-LC1352" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1">+++ b/src/server/game/Handlers/MiscHandler.cpp</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1353" class="blob-num js-line-number" data-line-number="1353"></td>
        <td id="file-gistfile1-diff-LC1353" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -1431,6 +1431,21 @@</span> void WorldSession::HandleSetTitleOpcode(WorldPacket&amp; recvData)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1354" class="blob-num js-line-number" data-line-number="1354"></td>
        <td id="file-gistfile1-diff-LC1354" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1355" class="blob-num js-line-number" data-line-number="1355"></td>
        <td id="file-gistfile1-diff-LC1355" class="blob-code blob-code-inner js-file-line"> void WorldSession::HandleTimeSyncResp(WorldPacket&amp; recvData)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1356" class="blob-num js-line-number" data-line-number="1356"></td>
        <td id="file-gistfile1-diff-LC1356" class="blob-code blob-code-inner js-file-line"> {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1357" class="blob-num js-line-number" data-line-number="1357"></td>
        <td id="file-gistfile1-diff-LC1357" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    Battleground* bg = _player-&gt;GetBattleground();</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1358" class="blob-num js-line-number" data-line-number="1358"></td>
        <td id="file-gistfile1-diff-LC1358" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    if (bg)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1359" class="blob-num js-line-number" data-line-number="1359"></td>
        <td id="file-gistfile1-diff-LC1359" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    {</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1360" class="blob-num js-line-number" data-line-number="1360"></td>
        <td id="file-gistfile1-diff-LC1360" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        if (_player-&gt;ShouldForgetBGPlayers() &amp;&amp; bg)</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1361" class="blob-num js-line-number" data-line-number="1361"></td>
        <td id="file-gistfile1-diff-LC1361" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        {</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1362" class="blob-num js-line-number" data-line-number="1362"></td>
        <td id="file-gistfile1-diff-LC1362" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            _player-&gt;DoForgetPlayersInBG(bg);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1363" class="blob-num js-line-number" data-line-number="1363"></td>
        <td id="file-gistfile1-diff-LC1363" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>            _player-&gt;SetForgetBGPlayers(false);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1364" class="blob-num js-line-number" data-line-number="1364"></td>
        <td id="file-gistfile1-diff-LC1364" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1365" class="blob-num js-line-number" data-line-number="1365"></td>
        <td id="file-gistfile1-diff-LC1365" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1366" class="blob-num js-line-number" data-line-number="1366"></td>
        <td id="file-gistfile1-diff-LC1366" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    else if (_player-&gt;ShouldForgetInListPlayers())</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1367" class="blob-num js-line-number" data-line-number="1367"></td>
        <td id="file-gistfile1-diff-LC1367" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    {</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1368" class="blob-num js-line-number" data-line-number="1368"></td>
        <td id="file-gistfile1-diff-LC1368" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        _player-&gt;DoForgetPlayersInList();</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1369" class="blob-num js-line-number" data-line-number="1369"></td>
        <td id="file-gistfile1-diff-LC1369" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>        _player-&gt;SetForgetInListPlayers(false);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1370" class="blob-num js-line-number" data-line-number="1370"></td>
        <td id="file-gistfile1-diff-LC1370" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    }</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1371" class="blob-num js-line-number" data-line-number="1371"></td>
        <td id="file-gistfile1-diff-LC1371" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1372" class="blob-num js-line-number" data-line-number="1372"></td>
        <td id="file-gistfile1-diff-LC1372" class="blob-code blob-code-inner js-file-line">     TC_LOG_DEBUG(&quot;network&quot;, &quot;CMSG_TIME_SYNC_RESP&quot;);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1373" class="blob-num js-line-number" data-line-number="1373"></td>
        <td id="file-gistfile1-diff-LC1373" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1374" class="blob-num js-line-number" data-line-number="1374"></td>
        <td id="file-gistfile1-diff-LC1374" class="blob-code blob-code-inner js-file-line">     uint32 counter, clientTicks;</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1375" class="blob-num js-line-number" data-line-number="1375"></td>
        <td id="file-gistfile1-diff-LC1375" class="blob-code blob-code-inner js-file-line"><span class="pl-c1">diff --git a/src/server/game/Handlers/QueryHandler.cpp b/src/server/game/Handlers/QueryHandler.cpp</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1376" class="blob-num js-line-number" data-line-number="1376"></td>
        <td id="file-gistfile1-diff-LC1376" class="blob-code blob-code-inner js-file-line">index dbcfb1c..f3ff127 100644</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1377" class="blob-num js-line-number" data-line-number="1377"></td>
        <td id="file-gistfile1-diff-LC1377" class="blob-code blob-code-inner js-file-line"><span class="pl-md">--- a/src/server/game/Handlers/QueryHandler.cpp</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1378" class="blob-num js-line-number" data-line-number="1378"></td>
        <td id="file-gistfile1-diff-LC1378" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1">+++ b/src/server/game/Handlers/QueryHandler.cpp</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1379" class="blob-num js-line-number" data-line-number="1379"></td>
        <td id="file-gistfile1-diff-LC1379" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -48,7 +48,7 @@</span> void WorldSession::SendNameQueryOpcode(uint64 guid)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1380" class="blob-num js-line-number" data-line-number="1380"></td>
        <td id="file-gistfile1-diff-LC1380" class="blob-code blob-code-inner js-file-line">     data &lt;&lt; uint8(0);                               // name known</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1381" class="blob-num js-line-number" data-line-number="1381"></td>
        <td id="file-gistfile1-diff-LC1381" class="blob-code blob-code-inner js-file-line">     data &lt;&lt; nameData-&gt;m_name;                       // played name</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1382" class="blob-num js-line-number" data-line-number="1382"></td>
        <td id="file-gistfile1-diff-LC1382" class="blob-code blob-code-inner js-file-line">     data &lt;&lt; uint8(0);                               // realm name - only set for cross realm interaction (such as Battlegrounds)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1383" class="blob-num js-line-number" data-line-number="1383"></td>
        <td id="file-gistfile1-diff-LC1383" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>    data &lt;&lt; uint8(nameData-&gt;m_race);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1384" class="blob-num js-line-number" data-line-number="1384"></td>
        <td id="file-gistfile1-diff-LC1384" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    data &lt;&lt; uint8(player ? player-&gt;getRace() : nameData-&gt;m_race);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1385" class="blob-num js-line-number" data-line-number="1385"></td>
        <td id="file-gistfile1-diff-LC1385" class="blob-code blob-code-inner js-file-line">     data &lt;&lt; uint8(nameData-&gt;m_gender);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1386" class="blob-num js-line-number" data-line-number="1386"></td>
        <td id="file-gistfile1-diff-LC1386" class="blob-code blob-code-inner js-file-line">     data &lt;&lt; uint8(nameData-&gt;m_class);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1387" class="blob-num js-line-number" data-line-number="1387"></td>
        <td id="file-gistfile1-diff-LC1387" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1388" class="blob-num js-line-number" data-line-number="1388"></td>
        <td id="file-gistfile1-diff-LC1388" class="blob-code blob-code-inner js-file-line"><span class="pl-c1">diff --git a/src/server/game/World/World.cpp b/src/server/game/World/World.cpp</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1389" class="blob-num js-line-number" data-line-number="1389"></td>
        <td id="file-gistfile1-diff-LC1389" class="blob-code blob-code-inner js-file-line">index 78470d4..b442a7c 100644</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1390" class="blob-num js-line-number" data-line-number="1390"></td>
        <td id="file-gistfile1-diff-LC1390" class="blob-code blob-code-inner js-file-line"><span class="pl-md">--- a/src/server/game/World/World.cpp</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1391" class="blob-num js-line-number" data-line-number="1391"></td>
        <td id="file-gistfile1-diff-LC1391" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1">+++ b/src/server/game/World/World.cpp</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1392" class="blob-num js-line-number" data-line-number="1392"></td>
        <td id="file-gistfile1-diff-LC1392" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -1046,6 +1046,8 @@</span> void World::LoadConfigSettings(bool reload)</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1393" class="blob-num js-line-number" data-line-number="1393"></td>
        <td id="file-gistfile1-diff-LC1393" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1394" class="blob-num js-line-number" data-line-number="1394"></td>
        <td id="file-gistfile1-diff-LC1394" class="blob-code blob-code-inner js-file-line">     m_int_configs[CONFIG_CREATURE_PICKPOCKET_REFILL] = sConfigMgr-&gt;GetIntDefault(&quot;Creature.PickPocketRefillDelay&quot;, 10 * MINUTE);</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1395" class="blob-num js-line-number" data-line-number="1395"></td>
        <td id="file-gistfile1-diff-LC1395" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1396" class="blob-num js-line-number" data-line-number="1396"></td>
        <td id="file-gistfile1-diff-LC1396" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    m_bool_configs[BATTLEGROUND_CROSSFACTION_ENABLED]                = sConfigMgr-&gt;GetBoolDefault(&quot;CrossfactionBG.enable&quot;, true);</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1397" class="blob-num js-line-number" data-line-number="1397"></td>
        <td id="file-gistfile1-diff-LC1397" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1398" class="blob-num js-line-number" data-line-number="1398"></td>
        <td id="file-gistfile1-diff-LC1398" class="blob-code blob-code-inner js-file-line">     if (int32 clientCacheId = sConfigMgr-&gt;GetIntDefault(&quot;ClientCacheVersion&quot;, 0))</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1399" class="blob-num js-line-number" data-line-number="1399"></td>
        <td id="file-gistfile1-diff-LC1399" class="blob-code blob-code-inner js-file-line">     {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1400" class="blob-num js-line-number" data-line-number="1400"></td>
        <td id="file-gistfile1-diff-LC1400" class="blob-code blob-code-inner js-file-line">         // overwrite DB/old value</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1401" class="blob-num js-line-number" data-line-number="1401"></td>
        <td id="file-gistfile1-diff-LC1401" class="blob-code blob-code-inner js-file-line"><span class="pl-c1">diff --git a/src/server/game/World/World.h b/src/server/game/World/World.h</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1402" class="blob-num js-line-number" data-line-number="1402"></td>
        <td id="file-gistfile1-diff-LC1402" class="blob-code blob-code-inner js-file-line">index 61acdc3..23290b8 100644</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1403" class="blob-num js-line-number" data-line-number="1403"></td>
        <td id="file-gistfile1-diff-LC1403" class="blob-code blob-code-inner js-file-line"><span class="pl-md">--- a/src/server/game/World/World.h</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1404" class="blob-num js-line-number" data-line-number="1404"></td>
        <td id="file-gistfile1-diff-LC1404" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1">+++ b/src/server/game/World/World.h</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1405" class="blob-num js-line-number" data-line-number="1405"></td>
        <td id="file-gistfile1-diff-LC1405" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -85,6 +85,7 @@</span> enum WorldTimers</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1406" class="blob-num js-line-number" data-line-number="1406"></td>
        <td id="file-gistfile1-diff-LC1406" class="blob-code blob-code-inner js-file-line"> enum WorldBoolConfigs</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1407" class="blob-num js-line-number" data-line-number="1407"></td>
        <td id="file-gistfile1-diff-LC1407" class="blob-code blob-code-inner js-file-line"> {</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1408" class="blob-num js-line-number" data-line-number="1408"></td>
        <td id="file-gistfile1-diff-LC1408" class="blob-code blob-code-inner js-file-line">     CONFIG_DURABILITY_LOSS_IN_PVP = 0,</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1409" class="blob-num js-line-number" data-line-number="1409"></td>
        <td id="file-gistfile1-diff-LC1409" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>    BATTLEGROUND_CROSSFACTION_ENABLED,</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1410" class="blob-num js-line-number" data-line-number="1410"></td>
        <td id="file-gistfile1-diff-LC1410" class="blob-code blob-code-inner js-file-line">     CONFIG_ADDON_CHANNEL,</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1411" class="blob-num js-line-number" data-line-number="1411"></td>
        <td id="file-gistfile1-diff-LC1411" class="blob-code blob-code-inner js-file-line">     CONFIG_ALLOW_PLAYER_COMMANDS,</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1412" class="blob-num js-line-number" data-line-number="1412"></td>
        <td id="file-gistfile1-diff-LC1412" class="blob-code blob-code-inner js-file-line">     CONFIG_CLEAN_CHARACTER_DB,</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1413" class="blob-num js-line-number" data-line-number="1413"></td>
        <td id="file-gistfile1-diff-LC1413" class="blob-code blob-code-inner js-file-line"><span class="pl-c1">diff --git a/src/server/worldserver/worldserver.conf.dist b/src/server/worldserver/worldserver.conf.dist</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1414" class="blob-num js-line-number" data-line-number="1414"></td>
        <td id="file-gistfile1-diff-LC1414" class="blob-code blob-code-inner js-file-line">index 90f330b..740a835 100644</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1415" class="blob-num js-line-number" data-line-number="1415"></td>
        <td id="file-gistfile1-diff-LC1415" class="blob-code blob-code-inner js-file-line"><span class="pl-md">--- a/src/server/worldserver/worldserver.conf.dist</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1416" class="blob-num js-line-number" data-line-number="1416"></td>
        <td id="file-gistfile1-diff-LC1416" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1">+++ b/src/server/worldserver/worldserver.conf.dist</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1417" class="blob-num js-line-number" data-line-number="1417"></td>
        <td id="file-gistfile1-diff-LC1417" class="blob-code blob-code-inner js-file-line"><span class="pl-mdr">@@ -2786,3 +2786,15 @@</span> PacketSpoof.BanDuration = 86400</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1418" class="blob-num js-line-number" data-line-number="1418"></td>
        <td id="file-gistfile1-diff-LC1418" class="blob-code blob-code-inner js-file-line"> </td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1419" class="blob-num js-line-number" data-line-number="1419"></td>
        <td id="file-gistfile1-diff-LC1419" class="blob-code blob-code-inner js-file-line"> #</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1420" class="blob-num js-line-number" data-line-number="1420"></td>
        <td id="file-gistfile1-diff-LC1420" class="blob-code blob-code-inner js-file-line"> ###################################################################################################</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1421" class="blob-num js-line-number" data-line-number="1421"></td>
        <td id="file-gistfile1-diff-LC1421" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1422" class="blob-num js-line-number" data-line-number="1422"></td>
        <td id="file-gistfile1-diff-LC1422" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>###################################################################################################</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1423" class="blob-num js-line-number" data-line-number="1423"></td>
        <td id="file-gistfile1-diff-LC1423" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>#</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1424" class="blob-num js-line-number" data-line-number="1424"></td>
        <td id="file-gistfile1-diff-LC1424" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span># CROSSFACTION BG CONFIG</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1425" class="blob-num js-line-number" data-line-number="1425"></td>
        <td id="file-gistfile1-diff-LC1425" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>#</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1426" class="blob-num js-line-number" data-line-number="1426"></td>
        <td id="file-gistfile1-diff-LC1426" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>#    CrossfactionBG.enable = 1 - Mixed battleground enabled.</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1427" class="blob-num js-line-number" data-line-number="1427"></td>
        <td id="file-gistfile1-diff-LC1427" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>#    CrossfactionBG.enable = 0 - Mixed battleground disabled.</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1428" class="blob-num js-line-number" data-line-number="1428"></td>
        <td id="file-gistfile1-diff-LC1428" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1429" class="blob-num js-line-number" data-line-number="1429"></td>
        <td id="file-gistfile1-diff-LC1429" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>CrossfactionBG.enable = 1</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1430" class="blob-num js-line-number" data-line-number="1430"></td>
        <td id="file-gistfile1-diff-LC1430" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span></span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1431" class="blob-num js-line-number" data-line-number="1431"></td>
        <td id="file-gistfile1-diff-LC1431" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>#</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1432" class="blob-num js-line-number" data-line-number="1432"></td>
        <td id="file-gistfile1-diff-LC1432" class="blob-code blob-code-inner js-file-line"><span class="pl-mi1"><span class="pl-mi1">+</span>###################################################################################################</span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1433" class="blob-num js-line-number" data-line-number="1433"></td>
        <td id="file-gistfile1-diff-LC1433" class="blob-code blob-code-inner js-file-line">\ No newline at end of file</td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1434" class="blob-num js-line-number" data-line-number="1434"></td>
        <td id="file-gistfile1-diff-LC1434" class="blob-code blob-code-inner js-file-line"><span class="pl-md"><span class="pl-md">-</span>- </span></td>
      </tr>
      <tr>
        <td id="file-gistfile1-diff-L1435" class="blob-num js-line-number" data-line-number="1435"></td>
        <td id="file-gistfile1-diff-LC1435" class="blob-code blob-code-inner js-file-line">1.7.10.4</td>
      </tr>
</table>

  </div>

  </div>
  
</div>


    <a name="comments"></a>
    <div class="discussion-timeline gist-discussion-timeline js-quote-selection-container ">
      <div class="js-discussion js-socket-channel" data-channel="marked-as-read:gist:10913800">
        


  <div class="timeline-comment-wrapper js-comment-container">

    

<div class="avatar-parent-child timeline-comment-avatar">
    <a href="/Adeer">
      <img alt="@Adeer" class="avatar rounded-1" height="44" src="https://avatars3.githubusercontent.com/u/832386?v=3&amp;s=88" width="44" />
    </a>

</div>



      

<div id="gistcomment-1212670"
     class="comment previewable-edit timeline-comment js-comment js-task-list-container
                     "
     data-body-version="7393b0ad82088e7b07e4c299722c1976">

  
<div class="timeline-comment-header">
  <div class="timeline-comment-actions">


  </div>

    



  <div class="timeline-comment-header-text">

    <strong>
        <a href="/Adeer" class="author">Adeer</a>
        
    </strong>

    commented

    <a href="#gistcomment-1212670" class="timestamp"><relative-time datetime="2014-04-16T19:00:45Z">Apr 16, 2014</relative-time></a>


  </div>
</div>


  <div class="edit-comment-hide">
    <table class="d-block">
      <tbody class="d-block">
        <tr class="d-block">
          <td class="d-block comment-body markdown-body  js-comment-body">
              <p>Delete, not your release. Stolen from emu-devstore.com.</p>
          </td>
        </tr>
      </tbody>
    </table>

  </div>

</div>

  </div>

  <div class="timeline-comment-wrapper js-comment-container">

    

<div class="avatar-parent-child timeline-comment-avatar">
    <a href="/irancore">
      <img alt="@irancore" class="avatar rounded-1" height="44" src="https://avatars0.githubusercontent.com/u/5402381?v=3&amp;s=88" width="44" />
    </a>

</div>



      

<div id="gistcomment-1212677"
     class="comment previewable-edit timeline-comment js-comment js-task-list-container
                     "
     data-body-version="433b61dcc6df97edb3fa1807b3a04061">

  
<div class="timeline-comment-header">
  <div class="timeline-comment-actions">


  </div>

    
  <span class="timeline-comment-label text-bold tooltipped tooltipped-multiline tooltipped-s" aria-label="This user is the owner of the gist.">
    Owner
  </span>



  <div class="timeline-comment-header-text">

    <strong>
        <a href="/irancore" class="author">irancore</a>
        
    </strong>

    commented

    <a href="#gistcomment-1212677" class="timestamp"><relative-time datetime="2014-04-16T19:20:21Z">Apr 16, 2014</relative-time></a>


  </div>
</div>


  <div class="edit-comment-hide">
    <table class="d-block">
      <tbody class="d-block">
        <tr class="d-block">
          <td class="d-block comment-body markdown-body  js-comment-body">
              <p>where exactly i said that it's my 'release' ?<br>
i just updated the original patch by Lillecarl for last trinitycore rev</p>
          </td>
        </tr>
      </tbody>
    </table>

  </div>

</div>

  </div>

  <div class="timeline-comment-wrapper js-comment-container">

    

<div class="avatar-parent-child timeline-comment-avatar">
    <a href="/JunkyBulgaria">
      <img alt="@JunkyBulgaria" class="avatar rounded-1" height="44" src="https://avatars2.githubusercontent.com/u/1922208?v=3&amp;s=88" width="44" />
    </a>

</div>



      

<div id="gistcomment-1214647"
     class="comment previewable-edit timeline-comment js-comment js-task-list-container
                     "
     data-body-version="6932a581a51ae45329b191d26ae7b77d">

  
<div class="timeline-comment-header">
  <div class="timeline-comment-actions">


  </div>

    



  <div class="timeline-comment-header-text">

    <strong>
        <a href="/JunkyBulgaria" class="author">JunkyBulgaria</a>
        
    </strong>

    commented

    <a href="#gistcomment-1214647" class="timestamp"><relative-time datetime="2014-04-20T19:19:00Z">Apr 20, 2014</relative-time></a>


  </div>
</div>


  <div class="edit-comment-hide">
    <table class="d-block">
      <tbody class="d-block">
        <tr class="d-block">
          <td class="d-block comment-body markdown-body  js-comment-body">
              <p>emu-devstore can suck everyone's dick, does emu-devstore made it? no. LittleCarl made it!</p>
          </td>
        </tr>
      </tbody>
    </table>

  </div>

</div>

  </div>

  <div class="timeline-comment-wrapper js-comment-container">

    

<div class="avatar-parent-child timeline-comment-avatar">
    <a href="/SQLfix">
      <img alt="@SQLfix" class="avatar rounded-1" height="44" src="https://avatars3.githubusercontent.com/u/4575114?v=3&amp;s=88" width="44" />
    </a>

</div>



      

<div id="gistcomment-1214669"
     class="comment previewable-edit timeline-comment js-comment js-task-list-container
                     "
     data-body-version="ccea9f3928522a71a837e9884d260d57">

  
<div class="timeline-comment-header">
  <div class="timeline-comment-actions">


  </div>

    



  <div class="timeline-comment-header-text">

    <strong>
        <a href="/SQLfix" class="author">SQLfix</a>
        
    </strong>

    commented

    <a href="#gistcomment-1214669" class="timestamp"><relative-time datetime="2014-04-20T21:23:47Z">Apr 20, 2014</relative-time></a>


  </div>
</div>


  <div class="edit-comment-hide">
    <table class="d-block">
      <tbody class="d-block">
        <tr class="d-block">
          <td class="d-block comment-body markdown-body  js-comment-body">
              <p>WTF <a href="https://github.com/adeer" class="user-mention">@adeer</a> . its for me :D<br>
go away</p>
          </td>
        </tr>
      </tbody>
    </table>

  </div>

</div>

  </div>

  <div class="timeline-comment-wrapper js-comment-container">

    

<div class="avatar-parent-child timeline-comment-avatar">
    <img alt="@ghost" class="avatar rounded-1" height="44" src="https://avatars1.githubusercontent.com/u/10137?v=3&amp;s=88" width="44" />

</div>



      

<div id="gistcomment-1226085"
     class="comment previewable-edit timeline-comment js-comment js-task-list-container
                     "
     data-body-version="9bb5b69f619f79f316be794882480d3b">

  
<div class="timeline-comment-header">
  <div class="timeline-comment-actions">


  </div>

    



  <div class="timeline-comment-header-text">

    <strong>
        <a href="/ghost" class="author">ghost</a>
    </strong>

    commented

    <a href="#gistcomment-1226085" class="timestamp"><relative-time datetime="2014-05-10T09:33:29Z">May 10, 2014</relative-time></a>


  </div>
</div>


  <div class="edit-comment-hide">
    <table class="d-block">
      <tbody class="d-block">
        <tr class="d-block">
          <td class="d-block comment-body markdown-body  js-comment-body">
              <p>gj</p>
          </td>
        </tr>
      </tbody>
    </table>

  </div>

</div>

  </div>

  <div class="timeline-comment-wrapper js-comment-container">

    

<div class="avatar-parent-child timeline-comment-avatar">
    <a href="/Lillecarl">
      <img alt="@Lillecarl" class="avatar rounded-1" height="44" src="https://avatars3.githubusercontent.com/u/207073?v=3&amp;s=88" width="44" />
    </a>

</div>



      

<div id="gistcomment-1228865"
     class="comment previewable-edit timeline-comment js-comment js-task-list-container
                     "
     data-body-version="e62317c6867c5550e3575bbe2e57ba03">

  
<div class="timeline-comment-header">
  <div class="timeline-comment-actions">


  </div>

    



  <div class="timeline-comment-header-text">

    <strong>
        <a href="/Lillecarl" class="author">Lillecarl</a>
        
    </strong>

    commented

    <a href="#gistcomment-1228865" class="timestamp"><relative-time datetime="2014-05-14T23:26:14Z">May 14, 2014</relative-time></a>


  </div>
</div>


  <div class="edit-comment-hide">
    <table class="d-block">
      <tbody class="d-block">
        <tr class="d-block">
          <td class="d-block comment-body markdown-body  js-comment-body">
              <p><a href="https://github.com/adeer" class="user-mention">@adeer</a> Are you seriously trying to claim this as "yours"? That's just pathetic.</p>
          </td>
        </tr>
      </tbody>
    </table>

  </div>

</div>

  </div>

  <div class="timeline-comment-wrapper js-comment-container">

    

<div class="avatar-parent-child timeline-comment-avatar">
    <a href="/Pirricli">
      <img alt="@Pirricli" class="avatar rounded-1" height="44" src="https://avatars1.githubusercontent.com/u/1678519?v=3&amp;s=88" width="44" />
    </a>

</div>



      

<div id="gistcomment-1281716"
     class="comment previewable-edit timeline-comment js-comment js-task-list-container
                     "
     data-body-version="bd899a6bc11df331559d6683524dd309">

  
<div class="timeline-comment-header">
  <div class="timeline-comment-actions">


  </div>

    



  <div class="timeline-comment-header-text">

    <strong>
        <a href="/Pirricli" class="author">Pirricli</a>
        
    </strong>

    commented

    <a href="#gistcomment-1281716" class="timestamp"><relative-time datetime="2014-08-14T16:31:34Z">Aug 14, 2014</relative-time></a>


  </div>
</div>


  <div class="edit-comment-hide">
    <table class="d-block">
      <tbody class="d-block">
        <tr class="d-block">
          <td class="d-block comment-body markdown-body  js-comment-body">
              <p>Problems aplying on last trinitycore commit 5b355c57baf1c06082f78fd311f87a18fa0d257e</p>
          </td>
        </tr>
      </tbody>
    </table>

  </div>

</div>

  </div>



<!-- Rendered timeline since 2017-04-09 13:48:31 -->
<div id="partial-timeline-marker"
      class="js-timeline-marker js-updatable-content"
      data-url="/irancore/10913800/show_partial?partial=gist%2Ftimeline_marker&amp;since=1491770911"
      data-last-modified="Sun, 09 Apr 2017 20:48:31 GMT"
      >
</div>


        <div class="discussion-timeline-actions">
            <div class="flash flash-warn mt-3">
    <a href="/join?source=comment-gist" class="btn btn-primary" rel="nofollow">Sign up for free</a>
    <strong>to join this conversation on GitHub</strong>.
    Already have an account?
    <a href="/login?return_to=https%3A%2F%2Fgist.github.com%2Firancore%2F10913800" rel="nofollow">Sign in to comment</a>
</div>

        </div>
      </div>
    </div>
</div>
  </div>

  <div class="modal-backdrop js-touch-events"></div>
</div><!-- /.container -->

    </div>
  </div>

  </div>

      <div class="container site-footer-container">
  <div class="site-footer" role="contentinfo">
    <ul class="site-footer-links float-right">
        <li><a href="https://github.com/contact" data-ga-click="Footer, go to contact, text:contact">Contact GitHub</a></li>
      <li><a href="https://developer.github.com" data-ga-click="Footer, go to api, text:api">API</a></li>
      <li><a href="https://training.github.com" data-ga-click="Footer, go to training, text:training">Training</a></li>
      <li><a href="https://shop.github.com" data-ga-click="Footer, go to shop, text:shop">Shop</a></li>
        <li><a href="https://github.com/blog" data-ga-click="Footer, go to blog, text:blog">Blog</a></li>
        <li><a href="https://github.com/about" data-ga-click="Footer, go to about, text:about">About</a></li>

    </ul>

    <a href="https://github.com" aria-label="Homepage" class="site-footer-mark" title="GitHub">
      <svg aria-hidden="true" class="octicon octicon-mark-github" height="24" version="1.1" viewBox="0 0 16 16" width="24"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg>
</a>
    <ul class="site-footer-links">
      <li>&copy; 2017 <span title="0.18664s from github-fe158-cp1-prd.iad.github.net">GitHub</span>, Inc.</li>
        <li><a href="https://github.com/site/terms" data-ga-click="Footer, go to terms, text:terms">Terms</a></li>
        <li><a href="https://github.com/site/privacy" data-ga-click="Footer, go to privacy, text:privacy">Privacy</a></li>
        <li><a href="https://github.com/security" data-ga-click="Footer, go to security, text:security">Security</a></li>
        <li><a href="https://status.github.com/" data-ga-click="Footer, go to status, text:status">Status</a></li>
        <li><a href="https://help.github.com" data-ga-click="Footer, go to help, text:help">Help</a></li>
    </ul>
  </div>
</div>



  

  <div id="ajax-error-message" class="ajax-error-message flash flash-error">
    <svg aria-hidden="true" class="octicon octicon-alert" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M8.865 1.52c-.18-.31-.51-.5-.87-.5s-.69.19-.87.5L.275 13.5c-.18.31-.18.69 0 1 .19.31.52.5.87.5h13.7c.36 0 .69-.19.86-.5.17-.31.18-.69.01-1L8.865 1.52zM8.995 13h-2v-2h2v2zm0-3h-2V6h2v4z"/></svg>
    <button type="button" class="flash-close js-flash-close js-ajax-error-dismiss" aria-label="Dismiss error">
      <svg aria-hidden="true" class="octicon octicon-x" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48z"/></svg>
    </button>
    You can't perform that action at this time.
  </div>


    <script crossorigin="anonymous" src="https://assets-cdn.github.com/assets/compat-8a4318ffea09a0cdb8214b76cf2926b9f6a0ced318a317bed419db19214c690d.js"></script>
    <script crossorigin="anonymous" src="https://assets-cdn.github.com/assets/frameworks-6d109e75ad8471ba415082726c00c35fb929ceab975082492835f11eca8c07d9.js"></script>
    <script async="async" crossorigin="anonymous" src="https://assets-cdn.github.com/assets/github-8f30c4122a2e20872d9c1f277c02176c552d4488cf69e537b7a785a655cd1559.js"></script>
    
    
    
    
  <div class="js-stale-session-flash stale-session-flash flash flash-warn flash-banner d-none">
    <svg aria-hidden="true" class="octicon octicon-alert" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M8.865 1.52c-.18-.31-.51-.5-.87-.5s-.69.19-.87.5L.275 13.5c-.18.31-.18.69 0 1 .19.31.52.5.87.5h13.7c.36 0 .69-.19.86-.5.17-.31.18-.69.01-1L8.865 1.52zM8.995 13h-2v-2h2v2zm0-3h-2V6h2v4z"/></svg>
    <span class="signed-in-tab-flash">You signed in with another tab or window. <a href="">Reload</a> to refresh your session.</span>
    <span class="signed-out-tab-flash">You signed out in another tab or window. <a href="">Reload</a> to refresh your session.</span>
  </div>
  <div class="facebox" id="facebox" style="display:none;">
  <div class="facebox-popup">
    <div class="facebox-content" role="dialog" aria-labelledby="facebox-header" aria-describedby="facebox-description">
    </div>
    <button type="button" class="facebox-close js-facebox-close" aria-label="Close modal">
      <svg aria-hidden="true" class="octicon octicon-x" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48z"/></svg>
    </button>
  </div>
</div>


  </body>
</html>

